(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.timesheetpersonresume=e():t.timesheetpersonresume=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(a){if(i[a])return i[a].exports;var s=i[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,a){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{datas:{required:!0}},data:function(){return{debug:null}},computed:{years:function(){var t=this,e={};return Object.keys(this.datas.periods).forEach(function(i){if(!t.datas.periods[i].futur){var a=i.split("-"),s=a[0];a[1];e.hasOwnProperty(s)||(e[s]={periods:{},total:0,periodDuration:0,total_activities:0,total_horslots:0}),e[s].periods[i]=t.datas.periods[i],e[s].total+=t.datas.periods[i].total,e[s].periodDuration+=t.datas.periods[i].periodDuration,e[s].total_activities+=t.datas.periods[i].total_activities,e[s].total_horslots+=t.datas.periods[i].total_horslots}}),e},periods:function(){var t=this,e=[];return Object.keys(this.datas.periods).forEach(function(i){e.push(t.datas.periods[i])}),e}},methods:{getActivity:function(t){}}}},function(t,e,i){t.exports=i(2)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(0),s=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var o=i(4),n=i(3),l=n(s.a,o.a,!1,null,null,null);e.default=l.exports},function(t,e){t.exports=function(t,e,i,a,s,r){var o,n=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(o=t,n=t.default);var c="function"==typeof n?n.options:n;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),i&&(c.functional=!0),s&&(c._scopeId=s);var d;if(r?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=d):a&&(d=a),d){var _=c.functional,u=_?c.render:c.beforeCreate;_?(c._injectStyles=d,c.render=function(t,e){return d.call(e),u(t,e)}):c.beforeCreate=u?[].concat(u,d):[d]}return{esModule:o,exports:n,options:c}}},function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",[t._v("Vos déclarations")]),t._v(" "),t.debug?i("div",{staticClass:"overlay"},[i("div",{staticClass:"overlay-content"},[i("button",{on:{click:function(e){t.debug=null}}},[t._v("close")]),t._v(" "),i("pre",[t._v(t._s(t.debug))])])]):t._e(),t._v(" "),i("table",{staticClass:"table declarations-resume"},[t._m(0),t._v(" "),t._l(t.years,function(e,a){return[i("tr",{staticClass:"heading-year"},[i("th",{attrs:{colspan:"7"}},[t._v(t._s(a))])]),t._v(" "),i("tbody",{staticClass:"yearrow"},[t._l(e.periods,function(e){return i("tr",{class:{"valid-100":e.total==e.periodDuration,"valid-95":e.total>=.95*e.periodDuration&&e.total<e.periodDuration,"valid-105":e.total<=1.05*e.periodDuration&&e.total>e.periodDuration,"error-105":e.total>1.05*e.periodDuration,"error-95":e.total<.95*e.periodDuration,optional:0==e.activities_id.length,conflict:"conflict"==e.validation_state,validating:e.validation_state&&0==e.validation_state.indexOf("send-"),validated:"valid"==e.validation_state}},[i("th",{staticClass:"period"},[i("strong",{on:{click:function(i){t.debug=e}}},[0==e.activities_id.length?i("i",{staticClass:"icon-ellipsis",attrs:{title:"Aucune déclaration requise pour cette période"}}):t._e(),t._v(" "),e.activities_id.length&&!e.validations_id.length&&e.past?i("i",{staticClass:"icon-attention-1",attrs:{title:"Il faut déclarer pour cette période"}}):t._e(),t._v(" "),e.activities_id.length&&e.validations_id.length?i("i",{staticClass:"icon-calendar",attrs:{title:"Procédure de déclaration en cours"}}):t._e(),t._v("\n\n                    "+t._s(t._f("period")(e.period)))])]),t._v(" "),i("td",{staticClass:"required"},[e.activities_id.length?i("em",[e.validations_id.length?i("span",[i("i",{class:"icon-"+e.validation_state}),t._v(" "),e.validators.length?i("small",[t._v("\n                                Validateur(s) :\n                                "),t._l(e.validators,function(e){return i("strong",{staticClass:"cartouche"},[i("i",{staticClass:"icon-user"}),t._v("\n                                    "+t._s(e))])})],2):t._e()]):t._e(),t._v(" "),"valid"==e.validation_state?i("a",{attrs:{href:"/feuille-de-temps/excel?action=export&period="+e.period+"&personid="+e.person_id}},[i("i",{staticClass:"icon-download-outline"}),t._v("\n                            Télécharger la feuille de temps (Excel)\n                        ")]):t._e(),t._v(" "),0==e.validations_id.length?i("em",[t._v("\n                           Pas de déclaration envoyée\n                        ")]):t._e()]):i("em",[t._v("\n                        Facultatif\n                    ")])]),t._v(" "),i("td",t._l(e.activities_id,function(a){return i("div",[i("i",{staticClass:"icon-cube"}),t._v(" "),i("strong",{attrs:{title:t.datas.activities[a].acronym+" : "+t.datas.activities[a].label}},[t._v(t._s(t.datas.activities[a].acronym))]),t._v(" "),e.total_activities_details?i("span",[t._v("\n                            "+t._s(t._f("heures")(e.total_activities_details[a]))+"\n                        ")]):i("em",[t._v("Rien")])])})),t._v(" "),i("td",{staticClass:"soustotal text-right"},[t._v(t._s(t._f("heures")(e.total_activities)))]),t._v(" "),i("td",{staticClass:"soustotal text-right"},[t._v(t._s(t._f("heures")(e.total_horslots)))]),t._v(" "),i("td",{staticClass:"total text-right"},[i("i",{staticClass:"icon-time icon-clock"}),t._v(" "),i("strong",[t._v(t._s(t._f("heures")(e.total)))]),t._v(" "),i("small",[t._v("/ "+t._s(t._f("heures")(e.periodDuration)))])]),t._v(" "),i("td",{staticClass:"total text-right"},[i("em",{staticClass:"text-danger"},[t._v(t._s(e.error))]),t._v(" "),"conflict"==e.validation_state?i("a",{staticClass:"xs btn btn-primary btn-xs",attrs:{href:"/feuille-de-temps/declarant?month="+e.month+"&year="+e.year}},[i("i",{staticClass:"icon-edit"}),t._v("\n                        Corriger\n                    ")]):e.validations_id.length>0?i("a",{staticClass:"xs btn btn-default btn-xs",attrs:{href:"/feuille-de-temps/declarant?month="+e.month+"&year="+e.year}},[i("i",{staticClass:"icon-zoom-in-outline"}),t._v("\n                        Visualiser\n                    ")]):i("a",{staticClass:"xs btn btn-primary btn-xs",attrs:{href:"/feuille-de-temps/declarant?month="+e.month+"&year="+e.year}},[i("i",{staticClass:"icon-calendar"}),t._v("\n                        Déclarer\n                    ")]),t._v(" "),i("a",{attrs:{href:"/feuille-de-temps/excel?action=export&period="+e.period+"&personid="+e.person_id}},[i("i",{staticClass:"icon-download-outline"}),t._v("\n                        Prévisualiser (Excel)\n                    ")])])])}),t._v(" "),i("tr",[i("th",[t._v("Total "+t._s(a))]),t._v(" "),i("th",[t._v(" ")]),t._v(" "),i("th",[t._v(" ")]),t._v(" "),i("th",{staticClass:"text-right"},[t._v(t._s(t._f("heures")(e.total_activities)))]),t._v(" "),i("th",{staticClass:"text-right"},[t._v(t._s(t._f("heures")(e.total_horslots)))]),t._v(" "),i("th",{staticClass:"text-right"},[i("strong",[t._v(t._s(t._f("heures")(e.total)))]),i("small",[t._v("/ "+t._s(t._f("heures")(e.periodDuration)))])]),t._v(" "),i("th",[t._v(" ")])])],2)]})],2)])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",[t._v("Période")]),t._v(" "),i("th",[t._v("Déclarations")]),t._v(" "),i("th",[t._v("Activité")]),t._v(" "),i("th",[t._v("Total activité")]),t._v(" "),i("th",[t._v("Total hors-activité")]),t._v(" "),i("th",[t._v("Total")]),t._v(" "),i("th",[t._v("Actions")])])])}],r={render:a,staticRenderFns:s};e.a=r}])});
//# sourceMappingURL=TimesheetPersonResume.js.map