(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.APIAccess=e():t.APIAccess=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,n){"use strict";function a(t){for(var e="",n="ÉÈÀÊËÇĈ©ÙÛÜÂÄÀéèàêëçĉ©ùûüâäàµ§ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,s=0;s<t;s++)e+=n.charAt(Math.floor(Math.random()*a));return e}e.a={props:{apis:{required:!0}},data:function(){return{formData:null,loading:"",datas:null,error:null,deleteData:null}},methods:{newPassword:function(){this.formData.pass=a(32)},handleToogleApi:function(t){var e=this.formData.apis.indexOf(t);e>=0?this.formData.apis.splice(e,1):this.formData.apis.push(t)},fetch:function(){var t=this;this.loading="Chargement des accès API",this.$http.get("?").then(function(e){t.datas=e.body.datas},function(e){t.error=e.body}).then(function(e){t.loading=null})},handlerSubmit:function(){var t=this,e=new FormData;this.formData.id&&e.append("id",this.formData.id),e.append("login",this.formData.login),e.append("pass",this.formData.pass),e.append("apis",this.formData.apis.join(",")),this.$http.post("?",e).then(function(e){t.fetch()},function(e){t.error=e.body}).finally(function(e){t.formData=null})},handlerNew:function(){this.formData={login:"",exist:"",pass:a(32),apis:[],active:!1}},handlerEdit:function(t,e){this.formData=t,this.formData.exist=e,this.formData.login=e},handlerCancelForm:function(){this.formData=null},handlerDelete:function(t){this.deleteData=t},performDelete:function(){var t=this;this.$http.delete("?id="+this.deleteData).then(function(e){t.fetch()},function(e){t.error=e.body}).then(function(e){return t.deleteData=null})}},mounted:function(){this.fetch()}}},function(t,e,n){t.exports=n(2)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(4),r=n(3),i=r(a.a,s.a,!1,null,null,null);e.default=i.exports},function(t,e){t.exports=function(t,e,n,a,s,r){var i,o=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(i=t,o=t.default);var c="function"==typeof o?o.options:o;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId=s);var u;if(r?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=u):a&&(u=a),u){var f=c.functional,d=f?c.render:c.beforeCreate;f?(c._injectStyles=u,c.render=function(t,e){return u.call(e),d(t,e)}):c.beforeCreate=d?[].concat(d,u):[u]}return{esModule:i,exports:o,options:c}}},function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"alert alert-info"},[t._v(t._s(t.loading))]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.formData?n("div",{staticClass:"overlay"},[n("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.handlerSubmit(e)}}},[""==t.formData.exist?n("h1",[t._v("Nouvel accès")]):n("h1",[t._v("Modification de "),n("strong",[t._v(t._s(t.formData.exist))])]),t._v(" "),n("input",{attrs:{type:"hidden",name:"id"},domProps:{value:t.formData.id}}),t._v(" "),n("div",[n("label",{attrs:{for:"form_label"}},[t._v("Intitulé")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.login,expression:"formData.login"}],staticClass:"form-control lg",attrs:{type:"text",name:"login",id:"form_label"},domProps:{value:t.formData.login},on:{input:function(e){e.target.composing||t.$set(t.formData,"login",e.target.value)}}})]),t._v(" "),n("hr"),t._v(" "),n("div",[n("label",{attrs:{for:"form_label"}},[n("i",{staticClass:"icon-lock-1"}),t._v("  Mot de passe")]),t._v(" "),n("input",{attrs:{type:"hidden",name:"pass"},domProps:{value:t.formData.pass}}),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-9"},[n("pre",{staticClass:"alert alert-info"},[t._v("                                "+t._s(t.formData.pass)+"\n                            ")])]),t._v(" "),n("div",{staticClass:"col-md-3"},[n("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.newPassword}},[n("i",{staticClass:"icon-cw-outline"}),t._v(" Générer une nouvelle clef\n                            ")])])])]),t._v(" "),n("ul",t._l(t.apis,function(e,a){return n("li",[n("label",[n("input",{attrs:{type:"checkbox",name:"apis[]"},domProps:{checked:t.formData.apis.indexOf(a)>=0},on:{change:function(e){return t.handleToogleApi(a)}}}),t._v("\n                            "+t._s(e)+" "),n("small",[t._v("("+t._s(a)+")")])])])}),0),t._v(" "),n("nav",[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[n("i",{staticClass:"icon-floppy"}),t._v("\n                        Enregistrer\n                    ")]),t._v(" "),n("button",{staticClass:"btn btn-default",attrs:{type:"reset"},on:{click:function(e){return e.preventDefault(),t.handlerCancelForm(e)}}},[n("i",{staticClass:"icon-cancel-outline"}),t._v("\n                        Annuler\n                    ")])])])]):t._e()]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.error?n("div",{staticClass:"overlay"},[n("div",{staticClass:"alert alert-danger"},[n("h3",[t._v("Erreur\n                    "),n("a",{staticClass:"float-right",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.error=null}}},[n("i",{staticClass:"icon-cancel-outline"})])]),t._v(" "),n("p",[t._v(t._s(t.error))])])]):t._e()]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.deleteData?n("div",{staticClass:"overlay"},[n("div",{staticClass:"alert alert-danger"},[n("h3",[t._v("Supprimer l'accès API "),n("strong",[t._v(t._s(t.deleteData))]),t._v(" ?")]),t._v(" "),n("nav",[n("button",{staticClass:"btn btn-danger",attrs:{type:"reset"},on:{click:function(e){e.preventDefault(),t.deleteData=null}}},[n("i",{staticClass:"icon-cancel-outline"}),t._v("\n                        Annuler\n                    ")]),t._v(" "),n("button",{staticClass:"btn btn-success",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.performDelete(e)}}},[n("i",{staticClass:"icon-ok-circled"}),t._v("\n                        Confirmer\n                    ")])])])]):t._e()]),t._v(" "),t._l(t.datas,function(e,a){return n("article",{staticClass:"card",class:e.active?"active":"disabled"},[n("h3",{staticClass:"card-title"},[n("strong",[t._v(t._s(a))]),t._v(" "),n("span",t._l(e.apis,function(e){return n("span",{staticClass:"label label-primary"},[t._v(t._s(e))])}),0),t._v(" "),n("small",{staticClass:"right"},[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.handlerDelete(a)}}},[n("i",{staticClass:"icon-trash"}),t._v("\n                    Supprimer")]),t._v(" "),n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.handlerEdit(e,a)}}},[n("i",{staticClass:"icon-pencil-1"}),t._v("\n                    Modifier")])])]),t._v(" "),n("pre",{staticClass:"card-content"},[t._v("Code : "),n("strong",[t._v(t._s(e.pass))])])])}),t._v(" "),n("hr"),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.handlerNew(e)}}},[n("i",{staticClass:"icon-plus-circled"}),t._v("\n        Nouvel accès\n    ")])],2)},s=[],r={render:a,staticRenderFns:s};e.a=r}])});
//# sourceMappingURL=APIAccess.js.map