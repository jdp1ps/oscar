(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.APIAccess=e():t.APIAccess=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(a[n])return a[n].exports;var s=a[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,a){"use strict";function n(t){for(var e="",a="ÉÈÀÊËÇĈ©ÙÛÜÂÄÀéèàêëçĉ©ùûüâäàµ§ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,s=0;s<t;s++)e+=a.charAt(Math.floor(Math.random()*n));return e}e.a={props:{apis:{required:!0},formats:{required:!0},baseUrlAPIPersons:{required:!0},baseUrlAPIOrganizations:{required:!0}},data:function(){return{formData:null,loading:"",datas:null,error:null,deleteData:null}},methods:{newPassword:function(){this.formData.pass=n(32)},handleToogleApi:function(t){var e=this.formData.apis.indexOf(t);e>=0?this.formData.apis.splice(e,1):this.formData.apis.push(t)},fetch:function(){var t=this;this.loading="Chargement des accès API",this.$http.get("?").then(function(e){t.datas=e.body.datas},function(e){t.error=e.body}).then(function(e){t.loading=null})},handlerSubmit:function(){var t=this,e=new FormData;this.formData.id&&e.append("id",this.formData.id),e.append("login",this.formData.login),e.append("pass",this.formData.pass),e.append("apis",this.formData.apis.join(",")),e.append("strategies",JSON.stringify(this.formData.strategies)),this.$http.post("?",e).then(function(e){t.fetch()},function(e){t.error=e.body}).finally(function(e){t.formData=null})},handlerNew:function(){this.formData={login:"",exist:"",pass:n(32),strategies:{persons:"",organizations:"",activities:"",roles:""},apis:[],active:!1}},handlerEdit:function(t,e){this.formData=t,this.formData.exist=e,this.formData.login=e},handlerCancelForm:function(){this.formData=null},handlerDelete:function(t){this.deleteData=t},performDelete:function(){var t=this;this.$http.delete("?id="+this.deleteData).then(function(e){t.fetch()},function(e){t.error=e.body}).then(function(e){return t.deleteData=null})}},mounted:function(){this.fetch()}}},function(t,e,a){t.exports=a(2)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(0),s=a(4),r=a(3),i=r(n.a,s.a,!1,null,null,null);e.default=i.exports},function(t,e){t.exports=function(t,e,a,n,s,r){var i,o=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(i=t,o=t.default);var c="function"==typeof o?o.options:o;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),a&&(c.functional=!0),s&&(c._scopeId=s);var u;if(r?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=u):n&&(u=n),u){var f=c.functional,d=f?c.render:c.beforeCreate;f?(c._injectStyles=u,c.render=function(t,e){return u.call(e),d(t,e)}):c.beforeCreate=d?[].concat(d,u):[u]}return{esModule:i,exports:o,options:c}}},function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"alert alert-info"},[t._v(t._s(t.loading))]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.formData?a("div",{staticClass:"overlay"},[a("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.handlerSubmit(e)}}},[""==t.formData.exist?a("h1",[t._v("Nouvel accès")]):a("h1",[t._v("Modification de "),a("strong",[t._v(t._s(t.formData.exist))])]),t._v(" "),a("input",{attrs:{type:"hidden",name:"id"},domProps:{value:t.formData.id}}),t._v(" "),a("div",[a("label",{attrs:{for:"form_label"}},[t._v("Intitulé")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.login,expression:"formData.login"}],staticClass:"form-control lg",attrs:{type:"text",name:"login",id:"form_label"},domProps:{value:t.formData.login},on:{input:function(e){e.target.composing||t.$set(t.formData,"login",e.target.value)}}})]),t._v(" "),a("hr"),t._v(" "),a("div",[a("label",{attrs:{for:"form_label"}},[a("i",{staticClass:"icon-lock-1"}),t._v("  Mot de passe")]),t._v(" "),a("input",{attrs:{type:"hidden",name:"pass"},domProps:{value:t.formData.pass}}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-9"},[a("pre",{staticClass:"alert alert-info"},[t._v("                                "+t._s(t.formData.pass)+"\n                            ")])]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.newPassword}},[a("i",{staticClass:"icon-cw-outline"}),t._v(" Générer un nouveau mot de passe\n                            ")])])])]),t._v(" "),a("ul",t._l(t.apis,function(e,n){return a("li",[a("label",[a("input",{attrs:{type:"checkbox",name:"apis[]"},domProps:{checked:t.formData.apis.indexOf(n)>=0},on:{change:function(e){return t.handleToogleApi(n)}}}),t._v("\n                            "+t._s(e)+" "),a("small",[t._v("("+t._s(n)+")")]),t._v(" "),t.formats[n]?a("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.strategies[n],expression:"formData.strategies[k]"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData.strategies,n,e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Normal")]),t._v(" "),t._l(t.formats[n],function(e,n){return a("option",{domProps:{value:n}},[t._v(t._s(n)+" ("+t._s(e)+")")])})],2):t._e()])])}),0),t._v(" "),a("nav",[a("button",{staticClass:"btn btn-primary",class:{disabled:""==t.formData.label},attrs:{type:"submit"}},[a("i",{staticClass:"icon-floppy"}),t._v("\n                        Enregistrer\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{type:"reset"},on:{click:function(e){return e.preventDefault(),t.handlerCancelForm(e)}}},[a("i",{staticClass:"icon-cancel-outline"}),t._v("\n                        Annuler\n                    ")])])])]):t._e()]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.error?a("div",{staticClass:"overlay"},[a("div",{staticClass:"alert alert-danger"},[a("h3",[t._v("Erreur\n                    "),a("a",{staticClass:"float-right",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.error=null}}},[a("i",{staticClass:"icon-cancel-outline"})])]),t._v(" "),a("p",[t._v(t._s(t.error))])])]):t._e()]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.deleteData?a("div",{staticClass:"overlay"},[a("div",{staticClass:"alert alert-danger"},[a("h3",[t._v("Supprimer l'accès API "),a("strong",[t._v(t._s(t.deleteData))]),t._v(" ?")]),t._v(" "),a("nav",[a("button",{staticClass:"btn btn-danger",attrs:{type:"reset"},on:{click:function(e){e.preventDefault(),t.deleteData=null}}},[a("i",{staticClass:"icon-cancel-outline"}),t._v("\n                        Annuler\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.performDelete(e)}}},[a("i",{staticClass:"icon-ok-circled"}),t._v("\n                        Confirmer\n                    ")])])])]):t._e()]),t._v(" "),t._l(t.datas,function(e,n){return a("article",{staticClass:"card",class:e.active?"active":"disabled"},[a("h2",{staticClass:"card-title"},[a("strong",[t._v(t._s(n))]),t._v(" "),a("span",t._l(e.apis,function(e){return a("span",{staticClass:"label label-primary"},[t._v(t._s(e))])}),0),t._v(" "),a("small",{staticClass:"right"},[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.handlerDelete(n)}}},[a("i",{staticClass:"icon-trash"}),t._v("\n                    Supprimer")]),t._v(" "),a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.handlerEdit(e,n)}}},[a("i",{staticClass:"icon-pencil-1"}),t._v("\n                    Modifier")])])]),t._v(" "),a("hr"),t._v(" "),a("h3",[t._v("Authentifications : ")]),t._v(" "),a("span",{staticClass:"text-light"},[t._v("Identifiant : ")]),t._v(" "),a("strong",[t._v(t._s(n))]),a("br"),t._v(" "),a("span",{staticClass:"text-light"},[t._v("Mot de passe : ")]),t._v(" "),a("strong",[t._v(t._s(e.pass))]),a("br"),t._v(" "),a("hr"),t._v(" "),a("h3",[t._v("URLs")]),t._v(" "),e.apis.indexOf("persons")>-1?a("span",[a("span",{staticClass:"text-light"},[t._v("Liste des personnes : ")]),a("code",[t._v(t._s(t.baseUrlAPIPersons))])]):t._e(),a("br"),t._v(" "),e.apis.indexOf("persons")>-1?a("span",[a("span",{staticClass:"text-light"},[t._v("Personne seule :")]),t._v(" "),a("code",[t._v(t._s(t.baseUrlAPIPersons)+"/"),a("em",[t._v("IDPERSON")])])]):t._e(),a("br"),t._v(" "),e.apis.indexOf("organizations")>-1?a("span",[a("span",{staticClass:"text-light"},[t._v("Liste des organisations : ")]),a("code",[t._v(t._s(t.baseUrlAPIOrganizations))])]):t._e(),a("br"),t._v(" "),e.apis.indexOf("organizations")>-1?a("span",[a("span",{staticClass:"text-light"},[t._v("Orgnisation seule :")]),t._v(" "),a("code",[t._v(t._s(t.baseUrlAPIOrganizations)+"/"),a("em",[t._v("IDORGANIZATION")])])]):t._e(),a("br"),t._v(" "),e.apis.indexOf("roles")>-1?a("span",[a("span",{staticClass:"text-light"},[t._v("Rôles (affectations) :")]),t._v(" "),a("code",[t._v("A venir")])]):t._e(),a("br"),t._v(" "),e.apis.indexOf("activities")>-1?a("span",[a("span",{staticClass:"text-light"},[t._v("Activités de recherche :")]),t._v(" "),a("code",[t._v("A venir")])]):t._e(),a("br")])}),t._v(" "),a("hr"),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.handlerNew(e)}}},[a("i",{staticClass:"icon-plus-circled"}),t._v("\n        Nouvel accès\n    ")])],2)},s=[],r={render:n,staticRenderFns:s};e.a=r}])});
//# sourceMappingURL=APIAccess.js.map