(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Workpackage=t():e.Workpackage=t()})("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=3)}([function(e,t){e.exports=function(e,t,a,n,r,o){var s,i=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(s=e,i=e.default);var c="function"==typeof i?i.options:i;t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),a&&(c.functional=!0),r&&(c._scopeId=r);var d;if(o?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=d):n&&(d=n),d){var u=c.functional,p=u?c.render:c.beforeCreate;u?(c._injectStyles=d,c.render=function(e,t){return d.call(t),p(e,t)}):c.beforeCreate=p?[].concat(p,d):[d]}return{esModule:s,exports:i,options:c}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={components:{workpackageperson:a(5).default},data:function(){return{mode:"read",canSave:!1,formData:{id:-1,code:"",label:"",description:""}}},created:function(){console.log("created",this.workpackage.id),this.workpackage.id<0&&(this.mode="edit")},props:{workpackage:null,persons:{default:function(){return[]}},editable:!1,isValidateur:!1},watch:{"person.duration":function(){console.log("Modification de la durée")}},methods:{handlerEditWorkPackage:function(){this.formData=JSON.parse(JSON.stringify(this.workpackage)),this.mode="edit"},handlerCancelEdit:function(){this.workpackage.id<0?this.$emit("workpackagecancelnew",this.workpackage):this.mode="read"},handlerDeleteWorkPackage:function(){this.$emit("workpackagedelete",this.workpackage)},handlerUpdateWorkPackage:function(){this.$emit("workpackageupdate",this.formData),this.mode="read"},handlerUpdate:function(e,t){this.$emit("workpackagepersonupdate",e,t)},handlerDelete:function(e){this.$emit("workpackagepersondelete",e)},roles:function(e){return e.roles.join(",")},tempsPrevu:function(e){return 0},tempsDeclare:function(e){return 0}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{person:{default:function(){return{}}},editable:!1},computed:{duration:function(){return this.person.duration}},data:function(){return{canSave:!1,mode:"read",durationForm:666}},methods:{handlerKeyUp:function(){console.log(arguments)},handlerUpdate:function(){this.$emit("workpackagepersonupdate",this.person,this.durationForm),this.mode="read"},handlerEdit:function(){this.mode="edit",this.durationForm=this.person.duration},handlerCancel:function(){this.mode="read",this.durationForm=this.person.duration},handlerRemove:function(){this.$emit("workpackagepersondelete",this.person)}}}},function(e,t,a){e.exports=a(4)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);var s=a(7),i=a(0),l=i(r.a,s.a,!1,null,null,null);t.default=l.exports},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),r=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);var s=a(6),i=a(0),l=i(r.a,s.a,!1,null,null,null);t.default=l.exports},function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"workpackage-person"},[a("div",{staticClass:"displayname"},[a("strong",[e._v(e._s(e.person.person.displayname))]),e._v(" "),e.editable&&"read"==e.mode?a("a",{staticClass:"link",attrs:{href:"#",title:"Supprimer ce déclarant"},on:{click:function(t){t.preventDefault(),e.handlerRemove(e.person)}}},[a("i",{staticClass:"icon-trash"})]):e._e()]),e._v(" "),a("div",{staticClass:"tempsdeclare temps"},[e.editable&&"edit"==e.mode?a("div",[e._v("\n            Heures prévues :\n            "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.durationForm,expression:"durationForm"}],staticStyle:{width:"5em"},attrs:{type:"integer"},domProps:{value:e.durationForm},on:{keyup:function(t){return"button"in t||13===t.keyCode?e.handlerUpdate(t):null},input:function(t){t.target.composing||(e.durationForm=t.target.value)}}}),e._v(" "),a("a",{attrs:{href:"#",title:"Appliquer la modification des heures prévues"},on:{click:function(t){return t.preventDefault(),e.handlerUpdate(t)}}},[a("i",{staticClass:"icon-floppy"})]),e._v(" "),a("a",{attrs:{href:"#",title:"Annuler la modification des heures prévues"},on:{click:function(t){return t.preventDefault(),e.handlerCancel(t)}}},[a("i",{staticClass:"icon-cancel-outline"})])]):a("span",[a("strong",{staticClass:"wp-hours"},[a("span",{staticClass:"wp-hour unsend",attrs:{title:"Heure(s) saisie(s)"}},[e._v(e._s(e._f("heures")(e.person.unsend)))]),e._v(" "),a("span",{staticClass:"wp-hour validate",attrs:{title:"Heure(s) validée(s)"}},[e._v(e._s(e._f("heures")(e.person.validate)))]),e._v(" "),e.person.validating>0?a("span",{staticClass:"wp-hour validating",attrs:{title:"Heure(s) en cours de validation"}},[e._v(e._s(e._f("heures")(e.person.validating)))]):e._e(),e._v(" "),e.person.conflicts>0?a("span",{staticClass:"wp-hour conflicts",attrs:{title:"Heure(s) en conflit"}},[e._v(e._s(e._f("heures")(e.person.conflicts)))]):e._e(),e._v(" "),a("span",{staticClass:"wp-hour duration",attrs:{title:"Heure(s) à valider"}},[e._v("\n                            / "+e._s(e._f("heures")(e.person.duration))+"\n                            "),e.editable&&"read"==e.mode?a("a",{attrs:{href:"#",title:"Modifier les heures prévues"},on:{click:function(t){return t.preventDefault(),e.handlerEdit(t)}}},[a("i",{staticClass:"icon-pencil"})]):e._e()])])])])])},r=[],o={render:n,staticRenderFns:r};t.a=o},function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"workpackage"},["edit"==e.mode?a("form",{attrs:{action:""},on:{submit:function(t){return t.preventDefault(),e.handlerUpdateWorkPackage(t)}}},[a("h4",[e.workpackage.id>0?a("span",[e._v("Modification du lot")]):a("span",[e._v("Nouveau lot")]),e._v(" "+e._s(e.formData.label))]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Code")]),e._v(" "),e._m(0),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.code,expression:"formData.code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"CODE"},domProps:{value:e.formData.code},on:{input:function(t){t.target.composing||e.$set(e.formData,"code",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Intitulé")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.label,expression:"formData.label"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Intitulé"},domProps:{value:e.formData.label},on:{input:function(t){t.target.composing||e.$set(e.formData,"label",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Description")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.description,expression:"formData.description"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.formData.description},on:{input:function(t){t.target.composing||e.$set(e.formData,"description",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"buttons"},[a("button",{staticClass:"btn btn-default",class:{disabled:!e.formData.code},attrs:{type:"submit"}},[e._v("Enregistrer")]),e._v(" "),a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.handlerCancelEdit}},[e._v("Annuler")])])]):e._e(),e._v(" "),"read"==e.mode?a("div",[a("h3",[e._v("["+e._s(e.workpackage.code)+"] "+e._s(e.workpackage.label))]),e._v(" "),a("p",[e._v(e._s(e.workpackage.description))]),e._v(" "),a("section",{staticClass:"workpackage-persons"},[e._m(1),e._v(" "),e._l(e.workpackage.persons,function(t){return a("workpackageperson",{key:t.id,attrs:{person:t,editable:e.editable},on:{workpackagepersondelete:e.handlerDelete,workpackagepersonupdate:e.handlerUpdate}})})],2),e._v(" "),e.editable&&e.persons.length?a("div",{staticClass:"buttons"},[a("div",{staticClass:"btn-group"},[e._m(2),e._v(" "),a("ul",{staticClass:"dropdown-menu"},e._l(e.persons,function(t){return a("li",[a("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),e.$emit("addperson",t.id,e.workpackage.id)}}},[e._v(e._s(t.displayname))])])}))]),e._v(" "),a("a",{staticClass:"btn btn-default btn-xs",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.handlerEditWorkPackage(t)}}},[a("i",{staticClass:"icon-pencil"}),e._v("Modifier")]),e._v(" "),a("a",{staticClass:"btn btn-default btn-xs",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.handlerDeleteWorkPackage(t)}}},[a("i",{staticClass:"icon-trash"}),e._v("Supprimer")])]):e._e(),e._v(" "),e.persons.length<=0?a("div",{staticClass:"text-danger"},[e._v("\n            Vous n'avez pas encore ajouté de membre à cette activité. "),a("strong",[e._v("Seul les membres d'une activité peuvent être identifiés comme déclarant")]),e._v(".\n        ")]):e._e()]):e._e()])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"text-danger"},[e._v("Le code est "),a("strong",[e._v("utilisé pour l'affichage des créneaux")]),e._v(" simplifiés, utilisez un code de préférence entre 3 et 5 caractères.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h4",[a("i",{staticClass:"icon-calendar"}),e._v("Déclarants ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"btn btn-default  btn-xs dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v("\n                    Ajouter un déclarant "),a("span",{staticClass:"caret"})])}],o={render:n,staticRenderFns:r};t.a=o}])});
//# sourceMappingURL=Workpackage.js.map