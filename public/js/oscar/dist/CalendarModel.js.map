{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///CalendarModel.js","webpack:///webpack/bootstrap 2a4e6223db9ae6351c9f","webpack:///./public/js/oscar/src/CalendarModel.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","value","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","CalendarModel","events","console","log","ValidationEvent","_class","eventDT","instanceOf","EventDT","label","validateState","validatedBy","validateDate","validatedMessage","ValidationEventChain","_class2","validations","validation","push","isValid","isReject","_class3","data","sync","year","week","mmStart","unix","mmEnd","weekStart","moment","startOf","plageStart","plageFin","endOf","otherEvent","startU1","endU1","startU2","id","description","start","end","icsfileuid","icsfilename","icsfiledateadded","icsuid","status","uid","UID","workpackageId","workpackage_id","workpackageCode","workpackage_code","workpackageLabel","workpackage_label","activityId","activity_id","activityLabel","activity_label","owner","owner_id","decaleY","rejectedComment","rejectedCommentAt","rejectedAdminComment","rejectedAdminCommentAt","rejectedSciComment","rejectedSciAt","rejectedSciBy","rejectedAdminAt","rejectedAdminBy","validatedSciAt","validatedSciBy","validatedAdminAt","validatedAdminBy","editable","deletable","validable","validableAdm","validableSci","sendable","credentials","isValidAdmin","isValidSci","isRejecteAdmin","isRejecteSci","durationMinutes","format","first","forEach","e1","isBefore","sort","e2","default"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,gBAAAC,IACAD,UAAAH,GACA,gBAAAC,SACAA,QAAA,cAAAD,IAEAD,EAAA,cAAAC,MACC,mBAAAK,WAAAC,KAAA,WACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAR,OAGA,IAAAC,GAAAQ,EAAAD,IACAE,EAAAF,EACAG,GAAA,EACAX,WAUA,OANAM,GAAAE,GAAAI,KAAAX,EAAAD,QAAAC,IAAAD,QAAAO,GAGAN,EAAAU,GAAA,EAGAV,EAAAD,QAvBA,GAAAS,KA4DA,OAhCAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,SAAAf,EAAAgB,EAAAC,GACAV,EAAAW,EAAAlB,EAAAgB,IACAG,OAAAC,eAAApB,EAAAgB,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAV,EAAAiB,EAAA,SAAAvB,GACA,GAAAgB,GAAAhB,KAAAwB,WACA,WAA2B,MAAAxB,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAM,GAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAjB,KAAAc,EAAAC,IAGtDpB,EAAAuB,EAAA,IAGAvB,IAAAwB,EAAA,KDqBM,SAAU9B,EAAQD,EAASO,GAEjCN,EAAOD,QAAUO,EAAmG,IAU9G,SAAUN,EAAQD,EAASO,GAEjC,YASA,SAASyB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHhB,OAAOC,eAAepB,EAAS,cAC3BoC,OAAO,GAGX,IEvGIH,GFuGAI,EAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI9B,GAAI,EAAGA,EAAI8B,EAAMC,OAAQ/B,IAAK,CAAE,GAAIgC,GAAaF,EAAM9B,EAAIgC,GAAWpB,WAAaoB,EAAWpB,aAAc,EAAOoB,EAAWrB,cAAe,EAAU,SAAWqB,KAAYA,EAAWC,UAAW,GAAMxB,OAAOC,eAAemB,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUR,EAAaW,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBJ,EAAYN,UAAWiB,GAAiBC,GAAaR,EAAiBJ,EAAaY,GAAqBZ,MEtF5hBa,aAEA,QAAAA,KAAaf,EAAA3B,KAAA0C,GACT1C,KAAK2C,UAHT,MAAAX,GAAAU,EAAA,OAAAH,IAAA,cAAAR,MAAA,WAWI,MAJKH,KACDgB,QAAQC,IAAI,0BACZjB,EAAW,GAAIc,IAEZd,MAXXc,IAgBJA,GAAcI,gBAAd,WACI,QAAAC,GAAaC,GAASrB,EAAA3B,KAAA+C,GAClBH,QAAQC,IAAIG,GAAWA,EAAQC,WAAWP,EAAcQ,UACxDlD,KAAKmD,MAAQ,kBACbnD,KAAKoD,cAAgB,EACrBpD,KAAKqD,YAAc,KACnBrD,KAAKsD,aAAe,KACpBtD,KAAKuD,iBAAmB,GAPhC,MAAAvB,GAAAe,IAAAR,IAAA,UAAAR,MAAA,WAUQ,MAA6B,IAAtB/B,KAAKoD,iBAVpBb,IAAA,WAAAR,MAAA,WAaQ,MAA6B,IAAtB/B,KAAKoD,iBAbpBb,IAAA,cAAAR,MAAA,WAgBQ,MAAO/B,MAAKoD,eAAiB,MAhBrCL,KAoBAL,EAAcc,qBAAd,WACI,QAAAC,KAAa9B,EAAA3B,KAAAyD,GACTzD,KAAK0D,eAFb,MAAA1B,GAAAyB,IAAAlB,IAAA,gBAAAR,MAAA,SAKkB4B,GACV3D,KAAK0D,YAAYE,KAAKD,MAN9BpB,IAAA,UAAAR,MAAA,WAUQ,IAAK,GAAI1B,GAAE,EAAGA,EAAEL,KAAK0D,YAAYtB,OAAQ/B,IACrC,IAAKL,KAAK0D,YAAYrD,GAAGwD,UACrB,OAAO,CAGf,QAAO,KAfftB,IAAA,WAAAR,MAAA,WAmBQ,IAAK,GAAI1B,GAAE,EAAGA,EAAEL,KAAK0D,YAAYtB,OAAQ/B,IACrC,GAAIL,KAAK0D,YAAYrD,GAAGyD,WACpB,OAAO,CAGf,QAAO,MAxBfL,KA4BAf,EAAcQ,QAAd,WACI,QAAAa,GAAYC,GAAMrC,EAAA3B,KAAA+D,GACd/D,KAAKiE,KAAKD,GAFlB,MAAAhC,GAAA+B,IAAAxB,IAAA,SAAAR,MAAA,SAiFWmC,EAAMC,GACT,GAAIC,GAAUpE,KAAKoE,QAAQC,OACvBC,EAAQtE,KAAKsE,MAAMD,OAGnBE,EAAYC,SAASN,KAAKA,GAAMC,KAAKA,GAAMM,QAAQ,QACnDC,EAAaH,EAAUF,OACvBM,EAAWJ,EAAUK,MAAM,QAAQP,MAEvC,SAAID,EAAUO,GAAYL,EAAQI,KAG3BN,EAAUO,GAAYL,EAAQI,MA7F7CnC,IAAA,UAAAR,MAAA,SAgGY8C,GACJ,GAAIC,GAAU9E,KAAKoE,QAAQC,OACrBU,EAAQ/E,KAAKsE,MAAMD,OACnBW,EAAUH,EAAWT,QAAQC,MAGnC,OAAOS,GAFOD,EAAWP,MAAMD,QAELW,EAAUD,KAtG5CxC,IAAA,WAAAR,MAAA,SAyGaiB,GACL,MAAIhD,MAAKoE,QAAUpB,EAAQoB,WA1GnC7B,IAAA,OAAAR,MAAA,SAgHSiC,GACDhE,KAAKiF,GAAKjB,EAAKiB,GACfjF,KAAKmD,MAAQa,EAAKb,MAClBnD,KAAKkF,YAAkC,aAApBlB,EAAKkB,YAA6B,GAAKlB,EAAKkB,YAC/DlF,KAAKmF,MAAQnB,EAAKmB,MAClBnF,KAAKoF,IAAMpB,EAAKoB,IAChBpF,KAAKqF,WAAarB,EAAKqB,WACvBrF,KAAKsF,YAActB,EAAKsB,YACxBtF,KAAKuF,iBAAmBvB,EAAKuB,iBAC7BvF,KAAKwF,OAASxB,EAAKwB,OACnBxF,KAAKyF,OAASzB,EAAKyB,OAEdzF,KAAK0F,MACN1F,KAAK0F,IAAMxC,QAAQyC,OAGvB3F,KAAK4F,cAAgB5B,EAAK6B,gBAAkB,KAC5C7F,KAAK8F,gBAAkB9B,EAAK+B,kBAAoB,KAChD/F,KAAKgG,iBAAmBhC,EAAKiC,mBAAqB,KAElDjG,KAAKkG,WAAalC,EAAKmC,aAAe,KACtCnG,KAAKoG,cAAgBpC,EAAKqC,gBAAkB,KAE5CrG,KAAKsG,MAAQtC,EAAKsC,MAClBtG,KAAKuG,SAAWvC,EAAKuC,SACrBvG,KAAKwG,QAAU,EAEfxG,KAAKyG,gBAAkBzC,EAAKyC,gBAC5BzG,KAAK0G,kBAAoB1C,EAAK0C,kBAC9B1G,KAAK2G,qBAAuB3C,EAAK2C,qBACjC3G,KAAK4G,uBAAyB5C,EAAK4C,uBAEnC5G,KAAK6G,mBAAqB7C,EAAK6C,mBAC/B7G,KAAK8G,cAAgB9C,EAAK8C,cAC1B9G,KAAK+G,cAAgB/C,EAAK+C,cAC1B/G,KAAK2G,qBAAuB3C,EAAK2C,qBACjC3G,KAAKgH,gBAAkBhD,EAAKgD,gBAC5BhH,KAAKiH,gBAAkBjD,EAAKiD,gBAE5BjH,KAAKkH,eAAiBlD,EAAKkD,eAC3BlH,KAAKmH,eAAiBnD,EAAKmD,eAC3BnH,KAAKoH,iBAAmBpD,EAAKoD,iBAC7BpH,KAAKqH,iBAAmBrD,EAAKqD,iBAE7BrH,KAAKsH,UAAW,EAChBtH,KAAKuH,WAAY,EACjBvH,KAAKwH,WAAY,EACjBxH,KAAKyH,cAAe,EACpBzH,KAAK0H,cAAe,EACpB1H,KAAK2H,UAAW,EAEZ3D,EAAK4D,cACL5H,KAAKsH,SAAWtD,EAAK4D,YAAYN,SACjCtH,KAAKuH,UAAYvD,EAAK4D,YAAYL,UAClCvH,KAAKwH,WAAY,EACjBxH,KAAKyH,aAAezD,EAAK4D,YAAYH,aACrCzH,KAAK0H,aAAe1D,EAAK4D,YAAYF,aACrC1H,KAAK2H,SAAW3D,EAAK4D,YAAYD,aAzK7CpF,IAAA,WAAArB,IAAA,WAMQ,QAASlB,KAAK2H,UAAY3H,KAAKyH,cAAgBzH,KAAK0H,cAAgB1H,KAAKsH,UAAYtH,KAAKuH,cANlGhF,IAAA,SAAArB,IAAA,WAUQ,MAAsB,QAAflB,KAAKyF,UAVpBlD,IAAA,SAAArB,IAAA,WAcQ,MAAsB,QAAflB,KAAKyF,UAdpBlD,IAAA,aAAArB,IAAA,WAkBQ,MAA8B,OAAvBlB,KAAKkH,kBAlBpB3E,IAAA,eAAArB,IAAA,WAsBQ,MAAgC,OAAzBlB,KAAKoH,oBAtBpB7E,IAAA,eAAArB,IAAA,WA0BQ,MAA6B,OAAtBlB,KAAK8G,iBA1BpBvE,IAAA,iBAAArB,IAAA,WA8BQ,MAA+B,OAAxBlB,KAAKgH,mBA9BpBzE,IAAA,UAAArB,IAAA,WAkCQ,MAAOlB,MAAK6H,cAAgB7H,KAAK8H,cAlCzCvF,IAAA,WAAArB,IAAA,WAsCQ,MAAOlB,MAAK+H,gBAAkB/H,KAAKgI,gBAtC3CzF,IAAA,UAAArB,IAAA,WA6CQ,MAAOsD,QAAOxE,KAAKmF,UA7C3B5C,IAAA,QAAArB,IAAA,WAoDQ,MAAOsD,QAAOxE,KAAKoF,QApD3B7C,IAAA,kBAAArB,IAAA,WA4DQ,OAAQlB,KAAKsE,MAAMD,OAASrE,KAAKoE,QAAQC,QAAU,MA5D3D9B,IAAA,WAAArB,IAAA,WAoEQ,MAAOlB,MAAKiI,gBAAkB,MApEtC1F,IAAA,UAAArB,IAAA,WAwEQ,MAAO,MAAQlB,KAAKoE,QAAQ8D,OAAO,SAC7B,MAAQlI,KAAKsE,MAAM4D,OAAO,SAC1B,QAAUlI,KAAKoE,QAAQ8D,OAAO,yBA1E5C3F,IAAA,QAAAR,MAAA,SA6KiBY,GACT,GAAIwF,GAAQ,IAUZ,OATAxF,GAAOyF,QAAQ,SAACC,GACC,MAATF,EACAA,EAAQE,EAEJA,EAAGC,SAASH,KACZA,EAAQE,KAIbF,KAxLf5F,IAAA,cAAAR,MAAA,SA4LuBY,GAUf,MATaA,GAAO4F,KAAK,SAACF,EAAIG,GAC1B,MAAIH,GAAGjE,QAAUoE,EAAGpE,SACR,EAEHiE,EAAGjE,QAAUoE,EAAGpE,QACd,EAEJ,QApMnBL,KA0MArB,EAAcQ,QAAQyC,IAAM,EF6J5BhG,EAAQ8I,QE3JO/F","file":"CalendarModel.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"calendarmodel\"] = factory();\n\telse\n\t\troot[\"calendarmodel\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"calendarmodel\"] = factory();\n\telse\n\t\troot[\"calendarmodel\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!****************************************************!*\\\n  !*** multi ./public/js/oscar/src/CalendarModel.js ***!\n  \\****************************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! /home/bouvry/Projects/Unicaen/oscar/public/js/oscar/src/CalendarModel.js */1);\n\n\n/***/ }),\n/* 1 */\n/*!**********************************************!*\\\n  !*** ./public/js/oscar/src/CalendarModel.js ***!\n  \\**********************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar instance;\n\nvar EventValidationChain = function EventValidationChain(state) {\n    _classCallCheck(this, EventValidationChain);\n};\n\n/**\n *\n * @type {CalendarModel}\n */\n\n\nvar CalendarModel = function () {\n    function CalendarModel() {\n        _classCallCheck(this, CalendarModel);\n\n        this.events = [];\n    }\n\n    _createClass(CalendarModel, null, [{\n        key: \"getInstance\",\n        value: function getInstance() {\n            if (!instance) {\n                console.log(\"Create single instance\");\n                instance = new CalendarModel();\n            }\n            return instance;\n        }\n    }]);\n\n    return CalendarModel;\n}();\n\nCalendarModel.ValidationEvent = function () {\n    function _class(eventDT) {\n        _classCallCheck(this, _class);\n\n        console.log(eventDT && eventDT.instanceOf(CalendarModel.EventDT));\n        this.label = \"Validation test\";\n        this.validateState = 0;\n        this.validatedBy = null;\n        this.validateDate = null;\n        this.validatedMessage = \"\";\n    }\n\n    _createClass(_class, [{\n        key: \"isValid\",\n        value: function isValid() {\n            return this.validateState == 1;\n        }\n    }, {\n        key: \"isReject\",\n        value: function isReject() {\n            return this.validateState == 0;\n        }\n    }, {\n        key: \"isValidable\",\n        value: function isValidable() {\n            return this.validateState > -1;\n        }\n    }]);\n\n    return _class;\n}();\n\nCalendarModel.ValidationEventChain = function () {\n    function _class2() {\n        _classCallCheck(this, _class2);\n\n        this.validations = [];\n    }\n\n    _createClass(_class2, [{\n        key: \"addValidation\",\n        value: function addValidation(validation) {\n            this.validations.push(validation);\n        }\n    }, {\n        key: \"isValid\",\n        value: function isValid() {\n            for (var i = 0; i < this.validations.length; i++) {\n                if (!this.validations[i].isValid()) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }, {\n        key: \"isReject\",\n        value: function isReject() {\n            for (var i = 0; i < this.validations.length; i++) {\n                if (this.validations[i].isReject()) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    }]);\n\n    return _class2;\n}();\n\nCalendarModel.EventDT = function () {\n    function _class3(data) {\n        _classCallCheck(this, _class3);\n\n        this.sync(data);\n    }\n\n    _createClass(_class3, [{\n        key: \"inWeek\",\n\n\n        /**\n         * Test si l'événement est présent dans la semaine.\n         * @return boolean\n         */\n        value: function inWeek(year, week) {\n            var mmStart = this.mmStart.unix(),\n                mmEnd = this.mmEnd.unix();\n\n            // Récupération de la plage de la semaine\n            var weekStart = moment().year(year).week(week).startOf('week'),\n                plageStart = weekStart.unix(),\n                plageFin = weekStart.endOf('week').unix();\n\n            if (mmStart > plageFin || mmEnd < plageStart) return false;\n\n            return mmStart < plageFin || mmEnd > plageStart;\n        }\n    }, {\n        key: \"overlap\",\n        value: function overlap(otherEvent) {\n            var startU1 = this.mmStart.unix(),\n                endU1 = this.mmEnd.unix(),\n                startU2 = otherEvent.mmStart.unix(),\n                endU2 = otherEvent.mmEnd.unix();\n            return startU1 < endU2 && startU2 < endU1;\n        }\n    }, {\n        key: \"isBefore\",\n        value: function isBefore(eventDT) {\n            if (this.mmStart < eventDT.mmStart) {\n                return true;\n            }\n            return false;\n        }\n    }, {\n        key: \"sync\",\n        value: function sync(data) {\n            this.id = data.id;\n            this.label = data.label;\n            this.description = data.description == 'undefined' ? '' : data.description;\n            this.start = data.start;\n            this.end = data.end;\n            this.icsfileuid = data.icsfileuid;\n            this.icsfilename = data.icsfilename;\n            this.icsfiledateadded = data.icsfiledateadded;\n            this.icsuid = data.icsuid;\n            this.status = data.status;\n\n            if (!this.uid) {\n                this.uid = EventDT.UID++;\n            }\n\n            this.workpackageId = data.workpackage_id || null;\n            this.workpackageCode = data.workpackage_code || null;\n            this.workpackageLabel = data.workpackage_label || null;\n\n            this.activityId = data.activity_id || null;\n            this.activityLabel = data.activity_label || null;\n\n            this.owner = data.owner;\n            this.owner_id = data.owner_id;\n            this.decaleY = 0;\n\n            this.rejectedComment = data.rejectedComment;\n            this.rejectedCommentAt = data.rejectedCommentAt;\n            this.rejectedAdminComment = data.rejectedAdminComment;\n            this.rejectedAdminCommentAt = data.rejectedAdminCommentAt;\n\n            this.rejectedSciComment = data.rejectedSciComment;\n            this.rejectedSciAt = data.rejectedSciAt;\n            this.rejectedSciBy = data.rejectedSciBy;\n            this.rejectedAdminComment = data.rejectedAdminComment;\n            this.rejectedAdminAt = data.rejectedAdminAt;\n            this.rejectedAdminBy = data.rejectedAdminBy;\n\n            this.validatedSciAt = data.validatedSciAt;\n            this.validatedSciBy = data.validatedSciBy;\n            this.validatedAdminAt = data.validatedAdminAt;\n            this.validatedAdminBy = data.validatedAdminBy;\n\n            this.editable = false;\n            this.deletable = false;\n            this.validable = false;\n            this.validableAdm = false;\n            this.validableSci = false;\n            this.sendable = false;\n\n            if (data.credentials) {\n                this.editable = data.credentials.editable;\n                this.deletable = data.credentials.deletable;\n                this.validable = false;\n                this.validableAdm = data.credentials.validableAdm;\n                this.validableSci = data.credentials.validableSci;\n                this.sendable = data.credentials.sendable;\n            }\n        }\n    }, {\n        key: \"isLocked\",\n        get: function get() {\n            return !(this.sendable || this.validableAdm || this.validableSci || this.editable || this.deletable);\n        }\n    }, {\n        key: \"isSend\",\n        get: function get() {\n            return this.status == 'send';\n        }\n    }, {\n        key: \"isInfo\",\n        get: function get() {\n            return this.status == 'info';\n        }\n    }, {\n        key: \"isValidSci\",\n        get: function get() {\n            return this.validatedSciAt != null;\n        }\n    }, {\n        key: \"isValidAdmin\",\n        get: function get() {\n            return this.validatedAdminAt != null;\n        }\n    }, {\n        key: \"isRejecteSci\",\n        get: function get() {\n            return this.rejectedSciAt != null;\n        }\n    }, {\n        key: \"isRejecteAdmin\",\n        get: function get() {\n            return this.rejectedAdminAt != null;\n        }\n    }, {\n        key: \"isValid\",\n        get: function get() {\n            return this.isValidAdmin && this.isValidSci;\n        }\n    }, {\n        key: \"isReject\",\n        get: function get() {\n            return this.isRejecteAdmin || this.isRejecteSci;\n        }\n\n        /**\n         * Retourne un objet moment pour la date de début.\n         */\n\n    }, {\n        key: \"mmStart\",\n        get: function get() {\n            return moment(this.start);\n        }\n\n        /**\n         * Retourne un objet moment pour la date de fin.\n         */\n\n    }, {\n        key: \"mmEnd\",\n        get: function get() {\n            return moment(this.end);\n        }\n\n        /**\n         * Retourne la durée de l'événement en minutes.\n         * @returns {number}\n         */\n\n    }, {\n        key: \"durationMinutes\",\n        get: function get() {\n            return (this.mmEnd.unix() - this.mmStart.unix()) / 60;\n        }\n\n        /**\n         * Retourne la durée de l'événement en heure.\n         * @returns {number}\n         */\n\n    }, {\n        key: \"duration\",\n        get: function get() {\n            return this.durationMinutes / 60;\n        }\n    }, {\n        key: \"dayTime\",\n        get: function get() {\n            return \"de \" + this.mmStart.format('hh:mm') + \" à \" + this.mmEnd.format('hh:mm') + \", le \" + this.mmStart.format('dddd D MMMM YYYY');\n        }\n    }], [{\n        key: \"first\",\n        value: function first(events) {\n            var first = null;\n            events.forEach(function (e1) {\n                if (first == null) {\n                    first = e1;\n                } else {\n                    if (e1.isBefore(first)) {\n                        first = e1;\n                    }\n                }\n            });\n            return first;\n        }\n    }, {\n        key: \"sortByStart\",\n        value: function sortByStart(events) {\n            var sorted = events.sort(function (e1, e2) {\n                if (e1.mmStart < e2.mmStart) return -1;else if (e1.mmStart > e2.mmStart) return 1;\n\n                return 0;\n            });\n            return sorted;\n        }\n    }]);\n\n    return _class3;\n}();\n\nCalendarModel.EventDT.UID = 1;\n\nexports.default = CalendarModel;\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// CalendarModel.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2a4e6223db9ae6351c9f","var instance;\n\n\nclass EventValidationChain {\n    constructor(state){\n\n    }\n}\n\n\n\n\n\n/**\n *\n * @type {CalendarModel}\n */\nlet CalendarModel = class {\n\n    constructor(){\n        this.events = [];\n    }\n\n    static getInstance (){\n        if( !instance ){\n            console.log(\"Create single instance\");\n            instance = new CalendarModel();\n        }\n        return instance;\n    }\n};\n\n\nCalendarModel.ValidationEvent = class {\n    constructor( eventDT ){\n        console.log(eventDT && eventDT.instanceOf(CalendarModel.EventDT));\n        this.label = \"Validation test\";\n        this.validateState = 0;\n        this.validatedBy = null;\n        this.validateDate = null;\n        this.validatedMessage = \"\";\n    }\n    isValid(){\n        return this.validateState == 1;\n    }\n    isReject(){\n        return this.validateState == 0;\n    }\n    isValidable(){\n        return this.validateState > -1;\n    }\n};\n\nCalendarModel.ValidationEventChain = class {\n    constructor(){\n        this.validations = [];\n    }\n\n    addValidation(validation){\n        this.validations.push(validation);\n    }\n\n    isValid(){\n        for( let i=0; i<this.validations.length; i++ ){\n            if( !this.validations[i].isValid() ){\n                return false;\n            }\n        }\n        return true;\n    }\n\n    isReject(){\n        for( let i=0; i<this.validations.length; i++ ){\n            if( this.validations[i].isReject() ){\n                return true;\n            }\n        }\n        return false;\n    }\n}\n\nCalendarModel.EventDT = class {\n    constructor(data) {\n        this.sync(data);\n    }\n\n    get isLocked(){\n        return !(this.sendable || this.validableAdm || this.validableSci || this.editable || this.deletable);\n    }\n\n    get isSend(){\n        return this.status == 'send';\n    }\n\n    get isInfo(){\n        return this.status == 'info';\n    }\n\n    get isValidSci(){\n        return this.validatedSciAt != null;\n    }\n\n    get isValidAdmin(){\n        return this.validatedAdminAt != null;\n    }\n\n    get isRejecteSci(){\n        return this.rejectedSciAt != null;\n    }\n\n    get isRejecteAdmin(){\n        return this.rejectedAdminAt != null;\n    }\n\n    get isValid(){\n        return this.isValidAdmin && this.isValidSci;\n    }\n\n    get isReject(){\n        return this.isRejecteAdmin || this.isRejecteSci;\n    }\n\n    /**\n     * Retourne un objet moment pour la date de début.\n     */\n    get mmStart() {\n        return moment(this.start)\n    }\n\n    /**\n     * Retourne un objet moment pour la date de fin.\n     */\n    get mmEnd() {\n        return moment(this.end)\n    }\n\n    /**\n     * Retourne la durée de l'événement en minutes.\n     * @returns {number}\n     */\n    get durationMinutes() {\n        return (this.mmEnd.unix() - this.mmStart.unix()) / 60;\n    }\n\n    /**\n     * Retourne la durée de l'événement en heure.\n     * @returns {number}\n     */\n    get duration() {\n        return this.durationMinutes / 60;\n    }\n\n    get dayTime() {\n        return \"de \" + this.mmStart.format('hh:mm')\n            + \" à \" + this.mmEnd.format('hh:mm')\n            + \", le \" + this.mmStart.format('dddd D MMMM YYYY');\n    }\n\n    /**\n     * Test si l'événement est présent dans la semaine.\n     * @return boolean\n     */\n    inWeek(year, week) {\n        let mmStart = this.mmStart.unix(),\n            mmEnd = this.mmEnd.unix();\n\n        // Récupération de la plage de la semaine\n        let weekStart = moment().year(year).week(week).startOf('week'),\n            plageStart = weekStart.unix(),\n            plageFin = weekStart.endOf('week').unix();\n\n        if (mmStart > plageFin || mmEnd < plageStart)\n            return false\n\n        return mmStart < plageFin || mmEnd > plageStart;\n    }\n\n    overlap(otherEvent) {\n        let startU1 = this.mmStart.unix()\n            , endU1 = this.mmEnd.unix()\n            , startU2 = otherEvent.mmStart.unix()\n            , endU2 = otherEvent.mmEnd.unix()\n        ;\n        return startU1 < endU2 && startU2 < endU1;\n    }\n\n    isBefore(eventDT) {\n        if (this.mmStart < eventDT.mmStart) {\n            return true;\n        }\n        return false;\n    }\n\n    sync(data) {\n        this.id = data.id;\n        this.label = data.label;\n        this.description = data.description == 'undefined' ? '' : data.description;\n        this.start = data.start;\n        this.end = data.end;\n        this.icsfileuid = data.icsfileuid;\n        this.icsfilename = data.icsfilename;\n        this.icsfiledateadded = data.icsfiledateadded;\n        this.icsuid = data.icsuid;\n        this.status = data.status;\n\n        if( !this.uid ){\n            this.uid = EventDT.UID++;\n        }\n\n        this.workpackageId = data.workpackage_id || null;\n        this.workpackageCode = data.workpackage_code || null;\n        this.workpackageLabel = data.workpackage_label || null;\n\n        this.activityId = data.activity_id || null;\n        this.activityLabel = data.activity_label || null;\n\n        this.owner = data.owner;\n        this.owner_id = data.owner_id;\n        this.decaleY = 0;\n\n        this.rejectedComment = data.rejectedComment;\n        this.rejectedCommentAt = data.rejectedCommentAt;\n        this.rejectedAdminComment = data.rejectedAdminComment;\n        this.rejectedAdminCommentAt = data.rejectedAdminCommentAt;\n\n        this.rejectedSciComment = data.rejectedSciComment;\n        this.rejectedSciAt = data.rejectedSciAt;\n        this.rejectedSciBy = data.rejectedSciBy;\n        this.rejectedAdminComment = data.rejectedAdminComment;\n        this.rejectedAdminAt = data.rejectedAdminAt;\n        this.rejectedAdminBy = data.rejectedAdminBy;\n\n        this.validatedSciAt = data.validatedSciAt;\n        this.validatedSciBy = data.validatedSciBy;\n        this.validatedAdminAt = data.validatedAdminAt;\n        this.validatedAdminBy = data.validatedAdminBy;\n\n        this.editable = false;\n        this.deletable = false;\n        this.validable = false;\n        this.validableAdm = false;\n        this.validableSci = false;\n        this.sendable = false;\n\n        if (data.credentials) {\n            this.editable = data.credentials.editable;\n            this.deletable = data.credentials.deletable;\n            this.validable = false;\n            this.validableAdm = data.credentials.validableAdm;\n            this.validableSci = data.credentials.validableSci;\n            this.sendable = data.credentials.sendable;\n        }\n    }\n\n    static first(events) {\n        var first = null;\n        events.forEach((e1) => {\n            if (first == null) {\n                first = e1;\n            } else {\n                if (e1.isBefore(first)) {\n                    first = e1;\n                }\n            }\n        });\n        return first;\n    }\n\n\n    static sortByStart(events) {\n        var sorted = events.sort((e1, e2) => {\n            if (e1.mmStart < e2.mmStart)\n                return -1\n\n            else if (e1.mmStart > e2.mmStart)\n                return 1\n\n            return 0;\n        });\n        return sorted;\n    }\n}\n\nCalendarModel.EventDT.UID = 1;\n\nexport default CalendarModel;\n\n\n// WEBPACK FOOTER //\n// ./public/js/oscar/src/CalendarModel.js"],"sourceRoot":""}