(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PeriodFieldSimple=t():e.PeriodFieldSimple=t()})("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=3)}([function(e,t){e.exports=function(e,t,n,r,i,o){var s,a=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(s=e,a=e.default);var c="function"==typeof a?a.options:a;t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId=i);var d;if(o?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=d):r&&(d=r),d){var u=c.functional,h=u?c.render:c.beforeCreate;u?(c._injectStyles=d,c.render=function(e,t){return d.call(t),h(e,t)}):c.beforeCreate=h?[].concat(h,d):[d]}return{esModule:s,exports:a,options:c}}},function(e,t,n){"use strict";var r=n(5);t.a={props:{queryPeriodStart:{require:!0},queryPeriodEnd:{require:!0}},components:{periodselector:r.a},data:function(){return{search:null,periodStart:"",periodEnd:"",modes:{none:"Aucun filtre...",fix:"Période donnée",interval:"D'une période à l'autre"},activeMode:"none",tmpvalues:{periodStart:null,periodEnd:null}}},methods:{handlerPeriodSelected:function(e){this.periodStart=e},handlerFilterPeriod:function(e){switch(this.periodStart&&(this.tmpvalues.periodStart=this.periodStart),this.periodEnd&&(this.tmpvalues.periodEnd=this.periodEnd),this.activeMode){case"none":this.periodStart="",this.periodEnd="";break;case"fix":this.periodStart=this.tmpvalues.periodStart,this.periodEnd="";break;case"interval":this.periodStart=this.tmpvalues.periodStart,this.periodEnd=this.tmpvalues.periodEnd}}},mounted:function(){this.queryPeriodStart&&(this.periodStart=this.queryPeriodStart,this.activeMode="fix"),this.queryPeriodEnd&&(this.periodEnd=this.queryPeriodEnd,this.activeMode="interval")}}},function(e,t,n){"use strict";var r=new RegExp(/([0-9]*)-([0-9]*)/);t.a={model:{prop:"period",event:"change"},data:function(){return{selectedYear:null,selectedMonth:null,middleYearSelector:null,showYearSelector:!1,showMonthSelector:!1,showMonth:!1,showYear:!1,defileYear:null}},props:{value:{default:""},months:{default:function(){return["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"]}},period:{default:null,required:!0},max:{default:null},min:{default:null}},computed:{displayedMonth:function(){if(this.period){var e=this.period.match(r);3==e.length&&parseInt(e[2]);return 3==e.length?this.months[parseInt(e[2])-1]:"INVALID"}return"MOIS"},displayedYear:function(){if(this.period){var e=this.period.match(r);return 3==e.length?e[1]:"INVALID"}return"ANNÉE"},displayedValue:function(){if(this.period){var e=this.period.match(r);return 3==e.length?this.months[parseInt(e[2])-1]+" "+e[1]:"INVALID!"}return"Indéfini"},selectableYear:function(){var e=(new Date).getFullYear();return this.defileYear?e=this.defileYear:this.selectedYear&&(e=this.selectedYear),this.yearAround(e)},maxYear:function(){if(this.max){var e=this.max.match(r);if(3!=e.length)return Number.MAX_SAFE_INTEGER;var t=parseInt(e[1]);return 1==parseInt(e[2])&&(t-=1),t}return Number.MAX_SAFE_INTEGER},maxMonth:function(){if(this.max&&this.selectedYear==this.maxYear){var e=this.max.match(r),t=e[1];e[2];return this.maxYear+1==t?13:3==e.length?e[2]-2:13}return 13},minYear:function(){if(this.min){var e=this.min.match(r),t=parseInt(e[1]);return 12==parseInt(e[2])&&(t+=1),t}return Number.MIN_SAFE_INTEGER},minMonth:function(){if(this.min){var e=this.min.match(r),t=parseInt(e[1]),n=parseInt(e[2]);return this.selectedYear>t?-1:n}return-1},selectableMonths:function(){return this.months}},methods:{handlerMouseLeave:function(){this.hideSelector()},handlerToggleSelector:function(){this.showYear=!this.showYear,this.showMonth=!1},handlerSelectYear:function(e){this.selectedYear=e,this.showMonth=!0,this.showYear=!1},handlerSelectMonth:function(e){this.selectedMonth=e+1;var t=null;if(this.selectedMonth&&this.selectedYear){t=this.selectedYear+"-"+(this.selectedMonth<10?"0"+this.selectedMonth:this.selectedMonth)}this.hideSelector(),this.$emit("change",t)},hideSelector:function(){this.showYear=!1,this.showMonth=!1},cleanUp:function(){this.$emit("change","")},today:function(){var e=new Date;this.$emit("change",e.getFullYear()+"-"+e.getMonth())},setDefileYear:function(e){var t;1==e?(t=this.selectableYear[this.selectableYear.length-1],t+=this.selectableYear.length/2):(t=this.selectableYear[0],t-=this.selectableYear.length/2),this.defileYear=t},yearAround:function(e){for(var t=[],n=e-6;n<e+6;n++)t.push(n);return t}},mounted:function(){var e=this;window&&window.addEventListener("click",function(t){e.hideSelector()})}}},function(e,t,n){e.exports=n(4)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(7),o=n(0),s=o(r.a,i.a,!1,null,null,null);t.default=s.exports},function(e,t,n){"use strict";var r=n(2),i=n(6),o=n(0),s=o(r.a,i.a,!1,null,null,null);t.a=s.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"period-selector",class:{open:e.showYear||e.showMonth},on:{mouseleave:e.handlerMouseLeave}},[n("span",{staticClass:"visualizer",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.handlerToggleSelector(t)}}},[n("i",{staticClass:"icon-calendar"}),e._v(" "),n("span",[e._v("\n            "+e._s(e.displayedValue)+"\n        ")]),e._v(" "),n("i",{staticClass:"icon-angle-down"})]),e._v(" "),e.showYear?n("span",{staticClass:"selector selector-year"},[n("span",{staticClass:"scroll-left scroll",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.setDefileYear(-1)}}},[n("i",{staticClass:"icon-angle-left"})]),e._v(" "),n("span",{staticClass:"selector-content"},[e._l(e.selectableYear,function(t){return n("span",{class:{selected:t==e.selectedYear,disabled:t>e.maxYear||t<e.minYear},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),e.handlerSelectYear(t)}}},[e._v("\n                "+e._s(t)+"\n            ")])}),e._v(" "),n("nav",{staticClass:"selector-options"},[n("a",{staticClass:"selector-option",on:{click:e.cleanUp}},[e._v("Vider")]),e._v(" "),n("a",{staticClass:"selector-option",on:{click:e.today}},[e._v("Période en cours")])])],2),e._v(" "),n("span",{staticClass:"scroll-right scroll",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.setDefileYear(1)}}},[n("i",{staticClass:"icon-angle-right"})])]):e._e(),e._v(" "),e.showMonth?n("span",{staticClass:"selector selector-month"},[n("span",{staticClass:"selector-content"},[e._l(e.selectableMonths,function(t,r){return n("span",{class:{selected:r==e.selectedMonth-1,disabled:r>e.maxMonth||r<e.minMonth},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.handlerSelectMonth(r)}}},[e._v("\n                "+e._s(t)+"\n            ")])}),e._v(" "),n("nav",{staticClass:"selector-options"},[n("a",{staticClass:"selector-option",on:{click:e.cleanUp}},[e._v("Vider")]),e._v(" "),n("a",{staticClass:"selector-option",on:{click:e.today}},[e._v("Période en cours")])])],2)]):e._e()])},i=[],o={render:r,staticRenderFns:i};t.a=o},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-4"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.activeMode,expression:"activeMode"}],staticClass:"form-control",on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.activeMode=t.target.multiple?n:n[0]},e.handlerFilterPeriod]}},e._l(e.modes,function(t,r){return n("option",{domProps:{value:r}},[e._v(e._s(t))])}),0)]),e._v(" "),n("div",{staticClass:"col-md-8"},[n("span",{directives:[{name:"show",rawName:"v-show",value:"none"!=e.activeMode,expression:"activeMode != 'none'"}]},["interval"==e.activeMode?n("span",[e._v("Du")]):n("span",[e._v("Période : ")]),e._v(" "),n("input",{attrs:{type:"hidden",name:"periodStart"},domProps:{value:e.periodStart}}),e._v(" "),n("periodselector",{directives:[{name:"show",rawName:"v-show",value:"none"!=e.activeMode,expression:"activeMode != 'none'"}],attrs:{period:e.periodStart},on:{change:function(t){e.periodStart=t}}})],1),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:"interval"==e.activeMode,expression:"activeMode == 'interval'"}]},[e._v("\n            au\n            "),n("input",{attrs:{type:"hidden",name:"periodEnd"},domProps:{value:e.periodEnd}}),e._v(" "),n("periodselector",{directives:[{name:"show",rawName:"v-show",value:"interval"==e.activeMode,expression:"activeMode == 'interval'"}],attrs:{period:e.periodEnd},on:{change:function(t){e.periodEnd=t}}})],1)])])},i=[],o={render:r,staticRenderFns:i};t.a=o}])});
//# sourceMappingURL=PeriodFieldSimple.js.map