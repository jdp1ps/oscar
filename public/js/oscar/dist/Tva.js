(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Tva=e():t.Tva=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{formData:null,loading:"",tvas:null,error:null,deleteData:null}},computed:{disciplines:function(){return this.disc}},methods:{fetch:function(){var t=this;this.loading="Chargement des TVAS",this.$http.get("?").then(function(e){t.tvas=e.body.tvas},function(e){t.error=e.body}).then(function(e){t.loading=null})},handlerSubmit:function(){var t=this,e=new FormData;e.append("label",this.formData.label),e.append("rate",this.formData.rate.toString().replace(/,/g,".")),e.append("active",this.formData.active),e.append("id",this.formData.id),this.$http.post("?",e).then(function(e){t.fetch()},function(e){t.error=e.body}).finally(function(e){t.formData=null})},handlerNew:function(){this.formData={id:null,label:"Intitulé",rate:0,active:!1,original:null}},handlerEdit:function(t){this.formData={id:t.id,label:t.label,active:t.active,rate:t.rate,original:t.label}},handlerCancelForm:function(){this.formData=null},handlerDelete:function(t){this.deleteData=t},performDelete:function(){var t=this,e=this.deleteData;this.$http.delete("?id="+e.id).then(function(t){},function(e){t.error=e.body}).then(function(e){return t.deleteData=null})}},mounted:function(){this.fetch()}}},function(t,e,a){t.exports=a(2)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(0),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);var s=a(4),l=a(3),o=l(r.a,s.a,!1,null,null,null);e.default=o.exports},function(t,e){t.exports=function(t,e,a,n,r,i){var s,l=t=t||{},o=typeof t.default;"object"!==o&&"function"!==o||(s=t,l=t.default);var c="function"==typeof l?l.options:l;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),a&&(c.functional=!0),r&&(c._scopeId=r);var u;if(i?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=u):n&&(u=n),u){var f=c.functional,d=f?c.render:c.beforeCreate;f?(c._injectStyles=u,c.render=function(t,e){return u.call(e),d(t,e)}):c.beforeCreate=d?[].concat(d,u):[u]}return{esModule:s,exports:l,options:c}}},function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("h1",[t._v("TVA")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"alert alert-info"},[t._v(t._s(t.loading))]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.formData?a("div",{staticClass:"overlay"},[a("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.handlerSubmit(e)}}},[t.formData.original?a("h1",[t._v("Modifier "+t._s(t.formData.original))]):a("h1",[t._v("Nouvelle discipline")]),t._v(" "),a("div",[a("label",{attrs:{for:"form_label"}},[t._v("Intitulé")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.label,expression:"formData.label"}],staticClass:"form-control lg",attrs:{type:"text",id:"form_label"},domProps:{value:t.formData.label},on:{input:function(e){e.target.composing||t.$set(t.formData,"label",e.target.value)}}})]),t._v(" "),a("div",[a("label",{attrs:{for:"form_rate"}},[t._v("Intitulé")]),t._v(" "),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.rate,expression:"formData.rate"}],staticClass:"form-control",attrs:{type:"text",id:"form_rate"},domProps:{value:t.formData.rate},on:{input:function(e){e.target.composing||t.$set(t.formData,"rate",e.target.value)}}}),t._v(" "),a("span",{staticClass:"input-group-addon"},[t._v("%")])])]),t._v(" "),a("div",{staticClass:"checkbox"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.active,expression:"formData.active"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.formData.active)?t._i(t.formData.active,null)>-1:t.formData.active},on:{change:function(e){var a=t.formData.active,n=e.target,r=!!n.checked;if(Array.isArray(a)){var i=t._i(a,null);n.checked?i<0&&t.$set(t.formData,"active",a.concat([null])):i>-1&&t.$set(t.formData,"active",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.formData,"active",r)}}}),t._v(" Active\n                    ")])]),t._v(" "),a("hr"),t._v(" "),a("nav",[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[a("i",{staticClass:"icon-floppy"}),t._v("\n                        Enregistrer\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{type:"reset"},on:{click:function(e){return e.preventDefault(),t.handlerCancelForm(e)}}},[a("i",{staticClass:"icon-cancel-outline"}),t._v("\n                        Annuler\n                    ")])])])]):t._e()]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.error?a("div",{staticClass:"overlay"},[a("div",{staticClass:"alert alert-danger"},[a("h3",[t._v("Erreur\n                    "),a("a",{staticClass:"float-right",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.error=null}}},[a("i",{staticClass:"icon-cancel-outline"})])]),t._v(" "),a("p",[t._v(t._s(t.error))])])]):t._e()]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.deleteData?a("div",{staticClass:"overlay"},[a("div",{staticClass:"alert alert-danger"},[a("h3",[t._v("Supprimer la TVA "),a("strong",[t._v(t._s(t.deleteData.label))]),t._v(" ?")]),t._v(" "),a("nav",[a("button",{staticClass:"btn btn-danger",attrs:{type:"reset"},on:{click:function(e){e.preventDefault(),t.deleteData=null}}},[a("i",{staticClass:"icon-cancel-outline"}),t._v("\n                        Annuler\n                    ")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.performDelete(e)}}},[a("i",{staticClass:"icon-ok-circled"}),t._v("\n                        Confirmer\n                    ")])])])]):t._e()]),t._v(" "),t._l(t.tvas,function(e){return a("article",{staticClass:"card",class:e.active?"active":"disabled"},[a("h3",{staticClass:"card-title"},[a("span",[a("span",{staticClass:"label",class:e.active?"label-info":"label-default"},[e.active?a("i",{staticClass:"icon-ok-circled"}):a("i",{staticClass:"icon-minus-circled"}),t._v("\n                    "+t._s(e.rate)+" %\n                ")]),t._v(" "),a("span",{staticClass:"intitule"},[t._v("\n                    "+t._s(e.label)+"\n                ")]),t._v(" "),a("span",{staticClass:"label xs",class:e.used>0?"label-primary":"label-default",attrs:{title:"Nombre d'utilisation dans les activités"}},[a("i",{staticClass:"icon-cube"}),t._v("\n                    "+t._s(e.used)+"\n                ")])]),t._v(" "),a("small",{staticClass:"right"},[a("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.handlerEdit(e)}}},[a("i",{staticClass:"icon-pencil"}),t._v("\n                    Éditer")]),t._v(" "),a("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.handlerDelete(e)}}},[a("i",{staticClass:"icon-trash"}),t._v("\n                    Supprimer")])])])])}),t._v(" "),a("hr"),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.handlerNew(e)}}},[a("i",{staticClass:"icon-plus-circled"}),t._v("\n        Nouvelle TVA\n    ")])],2)},r=[],i={render:n,staticRenderFns:r};e.a=i}])});
//# sourceMappingURL=Tva.js.map