(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["AdministrationPcru"]=e():t["AdministrationPcru"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="fb15")}({8875:function(t,e,r){var n,i,s;(function(r,o){i=[],n=o,s="function"===typeof n?n.apply(e,i):n,void 0===s||(t.exports=s)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(f){var r,n,i,s=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,o=/@([^@]*):(\d+):(\d+)\s*$/gi,a=s.exec(f.stack)||o.exec(f.stack),c=a&&a[1]||!1,l=a&&a[2]||!1,u=document.location.href.replace(document.location.hash,""),p=document.getElementsByTagName("script");c===u&&(r=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(l-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=r.replace(n,"$1").trim());for(var d=0;d<p.length;d++){if("interactive"===p[d].readyState)return p[d];if(p[d].src===c)return p[d];if(c===u&&p[d].innerHTML&&p[d].innerHTML.trim()===i)return p[d]}return null}}return t}))},fb15:function(t,e,r){"use strict";if(r.r(e),"undefined"!==typeof window){var n=window.document.currentScript,i=r("8875");n=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var s=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);s&&(r.p=s[1])}var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticStyle:{position:"relative","min-height":"100px"}},[t.configuration?r("div",{staticClass:"container"},[t.loading?r("div",{staticClass:"overlay"},[r("div",{staticClass:"overlay-content",class:{"text-success bold":t.success}},[r("i",{staticClass:"animate-spin icon-spinner"}),t._v(" "+t._s(t.loading)+" ")])]):t._e(),r("form",{attrs:{action:"",method:"post"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[t._v(" Module "),r("strong",[t._v(t._s(t.configuration.pcru_enabled?"Actif":"Inactif"))])]),r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"material-switch"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.configuration.pcru_enabled,expression:"configuration.pcru_enabled"}],attrs:{id:"pcru_enabled",name:"pcru_enabled",type:"checkbox"},domProps:{checked:Array.isArray(t.configuration.pcru_enabled)?t._i(t.configuration.pcru_enabled,null)>-1:t.configuration.pcru_enabled},on:{change:function(e){var r=t.configuration.pcru_enabled,n=e.target,i=!!n.checked;if(Array.isArray(r)){var s=null,o=t._i(r,s);n.checked?o<0&&t.$set(t.configuration,"pcru_enabled",r.concat([s])):o>-1&&t.$set(t.configuration,"pcru_enabled",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(t.configuration,"pcru_enabled",i)}}}),r("label",{staticClass:"label-primary",attrs:{for:"pcru_enabled"}})])])]),r("section",{class:t.configuration.pcru_enabled?"enabled":"disabled"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[t._m(0),t._m(1),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-8 col-md-push-1"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"sr-only",attrs:{for:"host"}}),r("div",{staticClass:"input-group input-lg"},[t._m(2),r("input",{directives:[{name:"model",rawName:"v-model",value:t.configuration.pcru_host,expression:"configuration.pcru_host"}],staticClass:"form-control",attrs:{type:"text",id:"host",name:"host"},domProps:{value:t.configuration.pcru_host},on:{input:function(e){e.target.composing||t.$set(t.configuration,"pcru_host",e.target.value)}}})])])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-8 col-md-push-1"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"sr-only",attrs:{for:"port"}}),r("div",{staticClass:"input-group input-lg"},[t._m(3),r("input",{directives:[{name:"model",rawName:"v-model",value:t.configuration.pcru_port,expression:"configuration.pcru_port"}],staticClass:"form-control",attrs:{type:"text",id:"port",name:"port"},domProps:{value:t.configuration.pcru_port},on:{input:function(e){e.target.composing||t.$set(t.configuration,"pcru_port",e.target.value)}}})])])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-8 col-md-push-1"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"sr-only",attrs:{for:"user"}}),r("div",{staticClass:"input-group input-lg"},[t._m(4),r("input",{directives:[{name:"model",rawName:"v-model",value:t.configuration.pcru_user,expression:"configuration.pcru_user"}],staticClass:"form-control",attrs:{type:"text",id:"user",name:"user"},domProps:{value:t.configuration.pcru_user},on:{input:function(e){e.target.composing||t.$set(t.configuration,"pcru_user",e.target.value)}}})])])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-8 col-md-push-1"},[r("password-field",{attrs:{value:t.configuration.pcru_pass,name:"pass",text:"Mot de passe"},on:{change:function(e){t.configuration.pcru_pass=e}}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-8 col-md-push-1"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"sr-only",attrs:{for:"ssh"}}),r("div",{staticClass:"input-group input-lg"},[t._m(5),r("input",{directives:[{name:"model",rawName:"v-model",value:t.configuration.pcru_ssh,expression:"configuration.pcru_ssh"}],staticClass:"form-control",attrs:{type:"text",id:"ssh",name:"ssh"},domProps:{value:t.configuration.pcru_ssh},on:{input:function(e){e.target.composing||t.$set(t.configuration,"pcru_ssh",e.target.value)}}})])])])])]),r("div",{staticClass:"col-md-6"},[t._m(6),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-10 col-md-push-1"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"sr-only",attrs:{for:"user"}}),r("div",{staticClass:"input-group input-lg"},[t._m(7),r("select",{directives:[{name:"model",rawName:"v-model",value:t.configuration.pcru_contract_type,expression:"configuration.pcru_contract_type"}],staticClass:"form-control",attrs:{name:"",id:""},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.configuration,"pcru_contract_type",e.target.multiple?r:r[0])}}},t._l(t.configuration.contract_types,(function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e)+" ")])})),0)]),r("p",{staticClass:"alert alert-info"},[r("i",{staticClass:"icon-info-circled"}),t._v(" Le type de contrat "),r("strong",[t._v(t._s(t.configuration.pcru_contract_type))]),t._v(" sera utilisé par oscar pour selectionner le document à utiliser pour les données PCRU")])]),r("hr"),r("div",{staticClass:"form-group"},[r("label",{staticClass:"sr-only",attrs:{for:"user"}}),r("div",{staticClass:"input-group input-lg"},[t._m(8),r("select",{directives:[{name:"model",rawName:"v-model",value:t.configuration.pcru_incharge_role,expression:"configuration.pcru_incharge_role"}],staticClass:"form-control",attrs:{name:"",id:""},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.configuration,"pcru_incharge_role",e.target.multiple?r:r[0])}}},t._l(t.configuration.incharge_roles,(function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e)+" ")])})),0)]),r("p",{staticClass:"alert alert-info"},[r("i",{staticClass:"icon-info-circled"}),t._v(" Oscar selectionnera les personnes avec le rôle "),r("strong",[t._v(t._s(t.configuration.pcru_incharge_role))]),t._v(" de la fiche activité pour extraire le "),r("em",[t._v("Responsable scientifique côté PCRU")]),t._v(".")])]),r("hr"),r("div",{staticClass:"form-group"},[r("label",{staticClass:"sr-only",attrs:{for:"user"}}),r("div",{staticClass:"input-group input-lg"},[t._m(9),t._l(t.configuration.partner_roles,(function(e,n){return r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.configuration.pcru_partner_roles,expression:"configuration.pcru_partner_roles"}],attrs:{type:"checkbox",id:"partner_role_option_"+n},domProps:{value:e,checked:Array.isArray(t.configuration.pcru_partner_roles)?t._i(t.configuration.pcru_partner_roles,e)>-1:t.configuration.pcru_partner_roles},on:{change:function(r){var n=t.configuration.pcru_partner_roles,i=r.target,s=!!i.checked;if(Array.isArray(n)){var o=e,a=t._i(n,o);i.checked?a<0&&t.$set(t.configuration,"pcru_partner_roles",n.concat([o])):a>-1&&t.$set(t.configuration,"pcru_partner_roles",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.configuration,"pcru_partner_roles",s)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"partner_role_option_"+n}},[t._v(t._s(e))])])}))],2),r("p",{staticClass:"alert alert-info"},[r("i",{staticClass:"icon-info-circled"}),t._v(" Oscar utilisera le(s) rôle(s) "),r("strong",[t._v(t._s(t.configuration.pcru_partner_roles.join(", ")))]),t._v(" des oragnisations de la fiche activité pour extraire le(s) partenaire(s) (les codes SIRET/EN doivent être renseignés).")])]),r("hr"),r("div",{staticClass:"form-group"},[r("label",{staticClass:"sr-only",attrs:{for:"user"}}),r("div",{staticClass:"input-group input-lg"},[t._m(10),t._l(t.configuration.unit_roles,(function(e,n){return r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.configuration.pcru_unit_roles,expression:"configuration.pcru_unit_roles"}],attrs:{type:"checkbox",id:"unit_role_option_"+n},domProps:{value:e,checked:Array.isArray(t.configuration.pcru_unit_roles)?t._i(t.configuration.pcru_unit_roles,e)>-1:t.configuration.pcru_unit_roles},on:{change:function(r){var n=t.configuration.pcru_unit_roles,i=r.target,s=!!i.checked;if(Array.isArray(n)){var o=e,a=t._i(n,o);i.checked?a<0&&t.$set(t.configuration,"pcru_unit_roles",n.concat([o])):a>-1&&t.$set(t.configuration,"pcru_unit_roles",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.configuration,"pcru_unit_roles",s)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"unit_role_option_"+n}},[t._v(t._s(e))])])}))],2)]),r("p",{staticClass:"alert alert-info"},[r("i",{staticClass:"icon-info-circled"}),t._v(" Oscar utilisera le(s) rôle(s) "),r("strong",[t._v(t._s(t.configuration.pcru_unit_roles.join(", ")))]),t._v(" des oragnisations de la fiche activité pour extraire le code URM.")])])])])])]),r("nav",{staticClass:"buttons text-center"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.performEdit}},[r("i",{staticClass:"icon-floppy"}),t._v(" Enregistrer ")])])])]):t._e()])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("h2",[r("i",{staticClass:"icon-upload"}),t._v(" Accès FTP")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"alert alert-info"},[r("i",{staticClass:"icon-info-circled"}),t._v(" Le transfert FTP n'est pas encore activé dans cette version ")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-group-addon"},[r("i",{staticClass:"glyphicon icon-building"}),t._v(" "),r("strong",[t._v("Hôte")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-group-addon"},[r("i",{staticClass:"glyphicon icon-logout"}),t._v(" "),r("strong",[t._v("Port")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-group-addon"},[r("i",{staticClass:"glyphicon icon-user"}),t._v(" "),r("strong",[t._v("Identifiant")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-group-addon"},[r("i",{staticClass:"glyphicon icon-plug"}),t._v(" "),r("strong",[t._v("Clef SSH")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("h2",[r("i",{staticClass:"icon-cog"}),t._v(" Options")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-group-addon"},[r("i",{staticClass:"glyphicon icon-user"}),r("strong",[t._v("Type pour le contrat signé")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-group-addon"},[r("i",{staticClass:"glyphicon icon-user"}),r("strong",[t._v("Responsable scientifique")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-group-addon"},[r("i",{staticClass:"glyphicon icon-user"}),r("strong",[t._v("Partenaire(s)")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-group-addon"},[r("i",{staticClass:"glyphicon icon-user"}),r("strong",[t._v("Unité(s)")])])}],c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group"},[r("label",{staticClass:"sr-only",attrs:{for:t.name}},[t._v("Mot de passe "+t._s(t.type)+" / "+t._s(t.value))]),r("div",{staticClass:"input-group input-lg password-field"},[r("div",{staticClass:"input-group-addon"},[r("i",{staticClass:"glyphicon icon-lock"}),t._v(" "),r("strong",[t._v(t._s(t.label))])]),"text"==t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",staticStyle:{"font-family":"monospace"},attrs:{name:t.name,type:"text",placeholder:"Mot de passe",id:t.name},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",staticStyle:{"font-family":"monospace"},attrs:{name:t.name,type:"password",placeholder:"Mot de passe",id:t.name},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}),r("div",{staticClass:"input-group-addon",class:{"password-displayed":"text"==t.type},staticStyle:{cursor:"pointer",background:"white"},attrs:{title:"Afficher le mot de passe pendant 5 secondes"},on:{click:t.handlerShowPassword}},["text"==t.type?r("i",{staticClass:"glyphicon icon-eye"}):r("i",{staticClass:"glyphicon icon-eye-off"})])])])},l=[];let u=null;const p="password",d="text";var f={props:{name:{required:!0},value:{default:""},label:{default:""}},data(){return{displayPassword:!1,type:p}},watch:{value(t){this.$emit("change",t),this.$emit("input",t)}},methods:{handlerShowPassword(){null===u?(this.type=d,u=new Promise(t=>{setTimeout(()=>{this.type=p,u=null},5e3)})):(u=null,this.type=p)}}},_=f;function v(t,e,r,n,i,s,o,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),o?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}var g=v(_,c,l,!1,null,null,null),m=g.exports;var h={components:{"password-field":m},props:{url:{required:!0}},data(){return{formData:null,configuration:null,loading:null,success:!1}},methods:{performEdit(){this.loading="Enregistrement de la configuration";let t=new FormData;t.append("pcru_enabled",this.configuration.pcru_enabled),t.append("host",this.configuration.pcru_host),t.append("port",this.configuration.pcru_port),t.append("user",this.configuration.pcru_user),t.append("pass",this.configuration.pcru_pass),t.append("ssh",this.configuration.pcru_ssh),t.append("pcru_partner_roles",this.configuration.pcru_partner_roles),t.append("pcru_unit_roles",this.configuration.pcru_unit_roles),t.append("pcru_incharge_role",this.configuration.pcru_incharge_role),t.append("pcru_contract_type",this.configuration.pcru_contract_type),this.$http.post(this.url,t).then(t=>{this.fetch()})},handlerSuccess(t){let e=t.data;this.configuration=e.configuration_pcru},fetch(){this.success="",this.loading="Chargement de la configuration",this.$http.get(this.url).then(t=>{this.handlerSuccess(t)}).then(t=>{this.success=!0,this.loading="Chargement terminé",setInterval(function(){this.loading=""}.bind(this),1e3)})}},mounted(){this.fetch()}},C=h,y=v(C,o,a,!1,null,null,null),b=y.exports;e["default"]=b}})["default"]}));
//# sourceMappingURL=AdministrationPcru.umd.min.js.map