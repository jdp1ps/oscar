(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SpentLinePFI=e():t.SpentLinePFI=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(s[n])return s[n].exports;var a=s[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var s={};return e.m=t,e.c=s,e.d=function(t,s,n){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,s){"use strict";e.a={props:["moment","url","masses"],data:function(){return{state:"masse",error:null,pendingMsg:"",spentlines:null,details:null}},computed:{byMasse:function(){var t={datas:{"N.B":[],recettes:[]},totaux:{"N.B":0,recettes:0}};for(var e in this.masses)t.datas[e]=[],t.totaux[e]=0;for(var s in this.spentlines){var n=this.spentlines[s];for(var a in n.masse){var i=n.masse[a];console.log(i),i||(i="N.B"),"1"==i?(t.datas.recettes.push(n),t.totaux.recettes+=n.montant):(t.datas[i].push(n),t.totaux[i]+=n.montant)}}return t}},methods:{fetch:function(){var t=this;this.pendingMsg="Chargement des dépense pour "+this.pfi,this.$http.get(this.url).then(function(e){t.spentlines=e.data.spents},function(e){403==e.status?t.error="Vous n'avez pas l'autorisation d'accès à ces informations.":t.error="Impossible de charger les dépenses pour ce PFI : "+e.data}).then(function(e){t.pendingMsg=""})}},mounted:function(){this.fetch()}}},function(t,e,s){t.exports=s(2)},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(0),a=s(4),i=s(3),_=i(n.a,a.a,!1,null,null,null);e.default=_.exports},function(t,e){t.exports=function(t,e,s,n,a,i){var _,o=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(_=t,o=t.default);var v="function"==typeof o?o.options:o;e&&(v.render=e.render,v.staticRenderFns=e.staticRenderFns,v._compiled=!0),s&&(v.functional=!0),a&&(v._scopeId=a);var l;if(i?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},v._ssrRegister=l):n&&(l=n),l){var d=v.functional,c=d?v.render:v.beforeCreate;d?(v._injectStyles=l,v.render=function(t,e){return l.call(e),c(t,e)}):v.beforeCreate=c?[].concat(c,l):[l]}return{esModule:_,exports:o,options:v}}},function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"spentlines"},[t._m(0),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.error?s("div",{staticClass:"error overlay"},[s("div",{staticClass:"overlay-content"},[s("i",{staticClass:"icon-warning-empty"}),t._v("\n                "+t._s(t.error)+"\n                "),s("br"),t._v(" "),s("a",{staticClass:"btn btn-sm btn-default btn-xs",attrs:{href:"#"},on:{click:function(e){t.error=null}}},[s("i",{staticClass:"icon-cancel-circled"}),t._v("\n                    Fermer")])])]):t._e()]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.pendingMsg?s("div",{staticClass:"pending overlay"},[s("div",{staticClass:"overlay-content"},[s("i",{staticClass:"icon-spinner animate-spin"}),t._v("\n                "+t._s(t.pendingMsg)+"\n            ")])]):t._e()]),t._v(" "),t.details?s("div",{staticClass:"overlay"},[s("div",{staticClass:"overlay-content"},[t._m(1),t._v(" "),s("button",{staticClass:"btn btn-default",on:{click:function(e){t.details=null}}},[t._v("Fermer")]),t._v(" "),s("table",{staticClass:"list table table-condensed table-bordered table-condensed card"},[t._m(2),t._v(" "),s("tbody",t._l(t.details.details,function(e){return s("tr",{staticClass:"text-small"},[s("td",[t._v(t._s(e.syncid))]),t._v(" "),s("td",[t._v(t._s(t._f("d.designation")(e.texteFacture)))]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.montant.toFixed(2)))]),t._v(" "),s("td",[t._v(t._s(e.compteBudgetaire))]),t._v(" "),s("td",[t._v(t._s(e.centreFinancier))]),t._v(" "),s("td",[s("strong",[t._v(t._s(e.compteGeneral))]),t._v(" : "+t._s(e.codeStr))]),t._v(" "),s("td",[t._v(t._s(e.dateComptable))]),t._v(" "),s("td",[t._v(t._s(e.datePaiement))]),t._v(" "),s("td",[t._v(t._s(e.dateAnneeExercice))])])}),0)])])]):t._e(),t._v(" "),s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-2"},[s("div",{staticClass:"table table-condensed card"},[s("tbody",[t._l(t.byMasse.datas,function(e,n){return"recettes"!=n&&"N.B"!=n?s("tr",[s("th",[t._v(t._s(t.masses[n]))]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.byMasse.totaux[n].toFixed(2)))])]):t._e()}),t._v(" "),s("tr",[s("th",[t._v("Hors-masse")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.byMasse.totaux["N.B"].toFixed(2)))])]),t._v(" "),s("tr",[s("th",[t._v("Recettes")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.byMasse.totaux.recettes.toFixed(2)))])])],2)])]),t._v(" "),s("div",{staticClass:"col-md-10"},[null!=t.spentlines&&"pack"==t.state?s("table",{staticClass:"list table table-condensed table-bordered table-condensed card"},[t._m(3),t._v(" "),t._l(t.spentlines,function(e){return s("tbody",[s("tr",[s("td",[t._v(t._s(e.refPiece))]),t._v(" "),s("td",[s("button",{staticClass:"btn btn-default",on:{click:function(s){t.details=e}}},[t._v(t._s(e.details.length))])]),t._v(" "),s("td",[t._v(t._s(e.types?e.types.join(","):""))]),t._v(" "),s("td",[t._v(t._s(e.text.join(", ")))]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.montant.toFixed(2)))]),t._v(" "),s("td",[t._v(t._s(e.compteBudgetaire.join(", ")))]),t._v(" "),s("td",[t._v(t._s(e.datecomptable))]),t._v(" "),s("td",[t._v(t._s(e.datepaiement))]),t._v(" "),s("td",[t._v(t._s(e.annee))])])])})],2):"masse"==t.state&&null!=t.spentlines?s("div",[t.byMasse.datas["N.B"].length?s("div",[s("h2",[t._v("Dépenses Hors-Masse")]),t._v(" "),s("table",{staticClass:"list table table-condensed table-bordered table-condensed card"},[t._m(4),t._v(" "),s("tbody",t._l(t.byMasse.datas["N.B"],function(e){return s("tr",[s("td",[t._v(t._s(e.refPiece))]),t._v(" "),s("td",[s("button",{staticClass:"btn btn-default",on:{click:function(s){t.details=e}}},[t._v(t._s(e.details.length))])]),t._v(" "),s("td",[t._v(t._s(e.types?e.types.join(","):""))]),t._v(" "),s("td",[t._v(t._s(e.text.join(", ")))]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.montant.toFixed(2)))]),t._v(" "),s("td",[t._v(t._s(e.compteBudgetaire.join(", ")))]),t._v(" "),s("td",[t._v(t._s(e.datecomptable))]),t._v(" "),s("td",[t._v(t._s(e.datepaiement))]),t._v(" "),s("td",[t._v(t._s(e.annee))])])}),0),t._v(" "),s("tfoot",[s("tr",{staticStyle:{"font-weight":"bold","font-size":"1.2em"}},[s("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("Total : ")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.byMasse.totaux["N.B"].toFixed(2)))]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(" ")])])])]),t._v(" "),s("div",{staticClass:"alert alert-info"},[t._v("\n                            Les comptes des dépenses ci-dessus ne sont pas qualifiés sur les masses attendues.\n                        ")])]):t._e(),t._v(" "),t._l(t.masses,function(e,n){return s("div",[s("h2",[t._v(t._s(e))]),t._v(" "),t.byMasse.datas[n].length>0?s("table",{staticClass:"list table table-condensed table-bordered table-condensed card"},[t._m(5,!0),t._v(" "),s("tbody",t._l(t.byMasse.datas[n],function(e){return s("tr",[s("td",[t._v(t._s(e.refPiece))]),t._v(" "),s("td",[s("button",{staticClass:"btn btn-default",on:{click:function(s){t.details=e}}},[t._v(t._s(e.details.length))])]),t._v(" "),s("td",[t._v(t._s(e.types?e.types.join(","):""))]),t._v(" "),s("td",[t._v(t._s(e.text.join(", ")))]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.montant.toFixed(2)))]),t._v(" "),s("td",[t._v(t._s(e.compteBudgetaire.join(", ")))]),t._v(" "),s("td",[t._v(t._s(e.datecomptable))]),t._v(" "),s("td",[t._v(t._s(e.datepaiement))]),t._v(" "),s("td",[t._v(t._s(e.annee))])])}),0),t._v(" "),s("tfoot",[s("tr",{staticStyle:{"font-weight":"bold","font-size":"1.2em"}},[s("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("Total : ")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.byMasse.totaux[n].toFixed(2)))]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(" ")])])])]):s("div",{staticClass:"alert alert-info"},[t._v("\n                            Aucune entrée.\n                        ")])])}),t._v(" "),t.byMasse.datas.recettes.length?s("div",[s("h2",[t._v("Recettes")]),t._v(" "),s("table",{staticClass:"list table table-condensed table-bordered table-condensed card"},[t._m(6),t._v(" "),s("tbody",t._l(t.byMasse.datas.recettes,function(e){return s("tr",[s("td",[t._v(t._s(e.refPiece))]),t._v(" "),s("td",[s("button",{staticClass:"btn btn-default",on:{click:function(s){t.details=e}}},[t._v(t._s(e.details.length))])]),t._v(" "),s("td",[t._v(t._s(e.types?e.types.join(","):""))]),t._v(" "),s("td",[t._v(t._s(e.text.join(", ")))]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.montant.toFixed(2)))]),t._v(" "),s("td",[t._v(t._s(e.compteBudgetaire.join(", ")))]),t._v(" "),s("td",[t._v(t._s(e.datecomptable))]),t._v(" "),s("td",[t._v(t._s(e.datepaiement))]),t._v(" "),s("td",[t._v(t._s(e.annee))])])}),0),t._v(" "),s("tfoot",[s("tr",{staticStyle:{"font-weight":"bold","font-size":"1.2em"}},[s("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("Total : ")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.byMasse.totaux.recettes.toFixed(2)))]),t._v(" "),s("td",{attrs:{colspan:"2"}},[t._v(" ")])])])])]):t._e()],2):t._e()])])])],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",[s("i",{staticClass:"icon-calculator"}),t._v("Dépenses")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",[s("i",{staticClass:"icon-zoom-in-outline"}),t._v("Détails des entrées comptables")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("ID")]),t._v(" "),s("th",[t._v("Description")]),t._v(" "),s("th",[t._v("Montant")]),t._v(" "),s("th",[t._v("Compte Budgetaire")]),t._v(" "),s("th",[t._v("Centre de profit")]),t._v(" "),s("th",[t._v("Compte général")]),t._v(" "),s("th",[t._v("Date comptable")]),t._v(" "),s("th",[t._v("Date paiement")]),t._v(" "),s("th",[t._v("Année")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("N°")]),t._v(" "),s("th",[t._v("Ligne(s)")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")]),t._v(" "),s("th",[t._v("Montant")]),t._v(" "),s("th",[t._v("Compte")]),t._v(" "),s("th",[t._v("Date comptable")]),t._v(" "),s("th",[t._v("Date paiement")]),t._v(" "),s("th",[t._v("Année")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("N°")]),t._v(" "),s("th",[t._v("Ligne(s)")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Montant")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Compte")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Date comptable")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Date paiement")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Année")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("N°")]),t._v(" "),s("th",[t._v("Ligne(s)")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Montant")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Compte")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Date comptable")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Date paiement")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Année")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("N°")]),t._v(" "),s("th",[t._v("Ligne(s)")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Montant")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Compte")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Date comptable")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Date paiement")]),t._v(" "),s("th",{staticStyle:{width:"8%"}},[t._v("Année")])])])}],i={render:n,staticRenderFns:a};e.a=i}])});
//# sourceMappingURL=SpentLinePFI.js.map