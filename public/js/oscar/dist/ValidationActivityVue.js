(function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.validationactivityvue=i():t.validationactivityvue=i()})("undefined"!=typeof self?self:this,function(){return function(t){function i(n){if(a[n])return a[n].exports;var s=a[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}var a={};return i.m=t,i.c=a,i.d=function(t,a,n){i.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(a,"a",a),a},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="/",i(i.s=1)}([function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={props:{days:{default:31},bootbox:{required:!0},periods:{default:{}}},filters:{displayTime:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;if(i){if(0==t)return 0;var n=Math.floor(t),s=Math.round(60*(t-n));return s<10&&(s="0"+s),n+":"+s}return 0==t?0:Math.round(100/a*t)+"%"}},computed:{nbrDays:function(){for(var t=[],i=1;i<=this.days;i++)i<10?t.push("0"+i):t.push(""+i);return t}},methods:{sendValidationPrj:function(t){var i=this;console.log("Validation de la période",t),this.bootbox.confirm("Confirmer la validation de la décaration pour cette période ?",function(a){a&&i.send("valid-prj",t)})},sendValidationSci:function(t){var i=this;console.log("VALID ",t),this.bootbox.confirm("Confirmer la validation scientifique de la décaration pour cette période ?",function(a){a&&i.send("valid-sci",t)})},sendValidationAdm:function(t){var i=this;this.bootbox.confirm("Confirmer la validation administrative de la décaration pour cette période ?",function(a){a&&i.send("valid-adm",t)})},sendRejectPrj:function(t){var i=this;this.bootbox.prompt("Indiquez les raisons du rejet de la déclaration",function(a){a&&i.send("reject-prj",t,a)})},sendRejectSci:function(t){var i=this;this.bootbox.prompt("Indiquez les raisons du rejet scientifique de la déclaration",function(a){a&&i.send("reject-sci",t,a)})},sendRejectAdm:function(t){var i=this;this.bootbox.prompt("Indiquez les raisons du rejet administratif de la déclaration",function(a){a&&i.send("reject-adm",t,a)})},send:function(t,i){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=new FormData;s.append("action",t),s.append("validationperiod_id",i),s.append("message",n),this.$http.post("",s).then(function(t){document.location.reload()},function(t){a.bootbox.alert("ERREUR : "+t.body)}).then(function(t){})}},data:function(){return{foo:"default"}}}},function(t,i,a){t.exports=a(2)},function(t,i,a){"use strict";function n(t){a(3)}Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=a.n(s);for(var o in s)"default"!==o&&function(t){a.d(i,t,function(){return s[t]})}(o);var r=a(5),d=a(4),l=n,c=d(e.a,r.a,!1,l,null,null);i.default=c.exports},function(t,i){},function(t,i){t.exports=function(t,i,a,n,s,e){var o,r=t=t||{},d=typeof t.default;"object"!==d&&"function"!==d||(o=t,r=t.default);var l="function"==typeof r?r.options:r;i&&(l.render=i.render,l.staticRenderFns=i.staticRenderFns,l._compiled=!0),a&&(l.functional=!0),s&&(l._scopeId=s);var c;if(e?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(e)},l._ssrRegister=c):n&&(c=n),c){var _=l.functional,v=_?l.render:l.beforeCreate;_?(l._injectStyles=c,l.render=function(t,i){return c.call(i),v(t,i)}):l.beforeCreate=v?[].concat(v,c):[c]}return{esModule:o,exports:r,options:l}}},function(t,i,a){"use strict";var n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("section",t._l(t.periods,function(i,n){return a("section",{staticClass:"period"},[a("h2",[t._v("Période : "),a("strong",[t._v(t._s(t._f("monthyear")(n)))])]),t._v(" "),a("pre",{staticStyle:{display:"none"}},[t._v("            "+t._s(i)+"\n        ")]),t._v(" "),t._l(i,function(i){return a("section",{staticClass:"card"},t._l(i.main,function(s){return a("section",{staticClass:"main"},[a("h3",{staticClass:"card-title"},[a("span",[a("i",{staticClass:"icon-user"}),t._v("\n                        Déclaration de "),a("strong",[t._v(t._s(i.declarant))])])]),t._v(" "),a("div",{staticClass:"validation",class:{valid:s.validationperiod.validationactivity_by,invalid:s.validationperiod.rejectactivity_by}},[a("span",{staticClass:"icon-cube"}),t._v(" Validation projet :\n                    "),s.validationperiod.validationactivity_by?a("span",[a("i",{staticClass:"icon-ok-circled"}),t._v("\n                        par "),a("strong",[t._v(t._s(s.validationperiod.validationactivity_by))])]):s.validationperiod.rejectactivity_by?a("span",[a("i",{staticClass:"icon-minus-circled"}),t._v("\n                       par "),a("strong",[t._v(t._s(s.validationperiod.rejectactivity_by))])]):a("span",[i.validable_prj?a("nav",[a("button",{staticClass:"btn btn-xs btn-success",on:{click:function(i){t.sendValidationPrj(s.validationperiod_id)}}},[a("i",{staticClass:"icon-ok-circled"}),t._v("Valider")]),t._v(" "),a("button",{staticClass:"btn btn-xs btn-danger",on:{click:function(i){t.sendRejectPrj(s.validationperiod_id)}}},[a("i",{staticClass:"icon-minus-circled"}),t._v("Refuser")])]):t._e()])]),t._v(" "),a("div",{staticClass:"validation",class:{valid:s.validationperiod.validationsci_by,invalid:s.validationperiod.rejectsci_by}},[a("span",{staticClass:"icon-beaker"}),t._v(" Validation scientifique :\n                    "),s.validationperiod.validationsci_by?a("span",[a("i",{staticClass:"icon-ok-circled"}),t._v("\n                        par "),a("strong",[t._v(t._s(s.validationperiod.validationsci_by))])]):s.validationperiod.rejectsci_by?a("span",[a("i",{staticClass:"icon-minus-circled"}),t._v("\n                       par "),a("strong",[t._v(t._s(s.validationperiod.rejectsci_by))])]):a("span",[i.validable_sci?a("nav",[a("button",{staticClass:"btn btn-xs btn-success",on:{click:function(i){t.sendValidationSci(s.validationperiod_id)}}},[a("i",{staticClass:"icon-ok-circled"}),t._v("Valider")]),t._v(" "),a("button",{staticClass:"btn btn-xs btn-danger",on:{click:function(i){t.sendRejectSci(s.validationperiod_id)}}},[a("i",{staticClass:"icon-minus-circled"}),t._v("Refuser")])]):t._e()])]),t._v(" "),a("div",{staticClass:"validation",class:{valid:s.validationperiod.validationadm_by,invalid:s.validationperiod.rejectadm_by}},[a("span",{staticClass:"icon-beaker"}),t._v(" Validation administrative :\n                    "),s.validationperiod.validationadm_by?a("span",[a("i",{staticClass:"icon-ok-circled"}),t._v("\n                        par "),a("strong",[t._v(t._s(s.validationperiod.validationadm_by))])]):s.validationperiod.rejectadm_by?a("span",[a("i",{staticClass:"icon-minus-circled"}),t._v("\n                       par "),a("strong",[t._v(t._s(s.validationperiod.rejectadm_by))])]):a("span",[i.validable_adm?a("nav",[a("button",{staticClass:"btn btn-xs btn-success",on:{click:function(i){t.sendValidationAdm(s.validationperiod_id)}}},[a("i",{staticClass:"icon-ok-circled"}),t._v("Valider")]),t._v(" "),a("button",{staticClass:"btn btn-xs btn-danger",on:{click:function(i){t.sendRejectAdm(s.validationperiod_id)}}},[a("i",{staticClass:"icon-minus-circled"}),t._v("Refuser")])]):t._e()])]),t._v(" "),a("table",{staticClass:"table table-condensed"},[a("thead",[a("tr",{staticClass:"header-day"},[a("th",{attrs:{colspan:"2"}},[t._v("\n                                "+t._s(t._f("monthyear")(n))+"\n                            ")]),t._v(" "),t._l(t.nbrDays,function(n){return a("th",{staticClass:"day",class:{closed:i.daysClosed[n]},attrs:{title:i.daysInfos[n]}},[a("small",[t._v(t._s(i.daysLabels[n]))]),t._v("\n                                "+t._s(n)),a("br")])}),t._v(" "),a("th",[t._v("\n                                Total\n                            ")]),t._v(" "),t._m(0,!0)],2)]),t._v(" "),a("tbody",[a("tr",{staticStyle:{"background-color":"#8f97a0"}},[a("th",{staticClass:"subhead",attrs:{colspan:t.nbrDays.length+4}},[a("i",{staticClass:"icon-cube"}),t._v(" "),a("strong",[t._v(t._s(s.acronym))]),t._v(" "),a("small",[t._v(t._s(s.label))])])]),t._v(" "),t._l(s.details,function(n,s){return a("tr",{staticClass:"subgroup"},[a("th",[t._v(" ")]),t._v(" "),a("th",[a("i",{staticClass:"icon-archive"}),t._v(t._s(n.label))]),t._v(" "),t._l(t.nbrDays,function(s){return a("td",{staticClass:"day",class:{empty:!n.days[s]},attrs:{title:(n.days[s]?n.days[s]:"0.0")+" heure(s)"}},[t._v("\n                                "+t._s(t._f("displayTime")(n.days[s]?n.days[s]:"0.0",i.displayHours,i.daysLength[s]))+"\n                            ")])}),t._v(" "),a("td",{staticClass:"soustotal",attrs:{title:n.total+" heure(s)"}},[t._v("\n                                "+t._s(t._f("displayTime")(n.total,i.displayHours,i.monthLength))+"\n                            ")]),t._v(" "),a("th",[t._v("\n                               ~\n                            ")])],2)}),t._v(" "),a("tr",[a("th",[t._v(" ")]),t._v(" "),a("th",[t._v("Total")]),t._v(" "),t._l(t.nbrDays,function(n){return a("td",{staticClass:"day soustotal",class:{empty:!s.totalDays[n]}},[t._v("\n                                "+t._s(t._f("displayTime")(s.totalDays[n]?s.totalDays[n]:"0.0",i.displayHours,i.dayLength))+"\n                            ")])}),t._v(" "),a("td",{staticClass:"total"},[t._v("\n                                "+t._s(t._f("displayTime")(s.totalPeriod,i.displayHours,i.monthLength))+"\n                            ")]),t._v(" "),a("th",[t._v("\n                                actions\n                            ")])],2),t._v(" "),a("tr",{staticClass:"interligne"},[a("th",{attrs:{colspan:t.nbrDays.length+4}},[t._v("\n                                Autres projets de recherche\n                            ")])]),t._v(" "),t._l(i.projects,function(n){return a("tr",{staticClass:"subgroup"},[a("th",[t._v(" ")]),t._v(" "),a("th",[a("i",{class:n.validation_icon}),t._v("\n                                "+t._s(n.code))]),t._v(" "),t._l(t.nbrDays,function(s){return a("td",{staticClass:"day",class:{empty:!n.days[s]}},[t._v("\n                                "+t._s(t._f("displayTime")(n.days[s]?n.days[s]:"0.0",i.displayHours,i.dayLength))+"\n                            ")])}),t._v(" "),a("td",{staticClass:"soustotal"},[t._v(t._s(t._f("displayTime")(n.total,i.displayHours,i.monthLength)))]),t._v(" "),a("td",[t._v("~")])],2)}),t._v(" "),a("tr",{staticClass:"interligne"},[a("th",{attrs:{colspan:t.nbrDays.length+4}},[t._v("\n                                Hors-lot\n                            ")])]),t._v(" "),t._l(i.others,function(n){return a("tr",{staticClass:"subgroup"},[a("th",[t._v(" ")]),t._v(" "),a("th",[a("i",{class:n.validation_icon}),t._v("\n                                "+t._s(n.label)+"\n                            ")]),t._v(" "),t._l(t.nbrDays,function(s){return a("td",{staticClass:"day",class:{empty:!n.days[s]}},[t._v("\n                                "+t._s(t._f("displayTime")(n.days[s]?n.days[s]:"0.0",i.displayHours,i.dayLength))+"\n\n                            ")])}),t._v(" "),a("td",{staticClass:"soustotal"},[t._v(t._s(t._f("displayTime")(n.total,i.displayHours,i.monthLength)))]),t._v(" "),a("td",[t._v("~")])],2)}),t._v(" "),a("tr",{staticClass:"interligne"},[a("th",{attrs:{colspan:t.nbrDays.length+4}},[t._v("\n                                Total période\n                            ")])]),t._v(" "),a("tr",{},[a("th",[t._v(" ")]),t._v(" "),a("th",[t._v(t._s(t._f("monthyear")(n)))]),t._v(" "),t._l(t.nbrDays,function(n){return a("td",{staticClass:"day soustotal",class:{empty:!i.total[n]}},[t._v("\n                                "+t._s(t._f("displayTime")(i.total[n]?i.total[n]:"0.0",i.displayHours,i.dayLength))+"\n                            ")])}),t._v(" "),a("td",{staticClass:"total"},[t._v("\n                                "+t._s(t._f("displayTime")(i.totalFull,i.displayHours,i.monthLength))+"\n                            ")]),t._v(" "),a("td",[t._v("~")])],2)],2),t._v(" "),a("tfoot")])])}))}),t._v(" "),a("hr")],2)}))},s=[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("th",[a("i",{staticClass:"icon-cog"})])}],e={render:n,staticRenderFns:s};i.a=e}])});
//# sourceMappingURL=ValidationActivityVue.js.map