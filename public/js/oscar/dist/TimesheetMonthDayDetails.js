(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.timesheetmonthdaydetails=e():t.timesheetmonthdaydetails=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(a){if(s[a])return s[a].exports;var i=s[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var s={};return e.m=t,e.c=s,e.d=function(t,s,a){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=4)}([function(t,e){t.exports=function(t,e,s,a,i,n){var r,c=t=t||{},o=typeof t.default;"object"!==o&&"function"!==o||(r=t,c=t.default);var l="function"==typeof c?c.options:c;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),s&&(l.functional=!0),i&&(l._scopeId=i);var d;if(n?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},l._ssrRegister=d):a&&(d=a),d){var u=l.functional,v=u?l.render:l.beforeCreate;u?(l._injectStyles=d,l.render=function(t,e){return d.call(e),v(t,e)}):l.beforeCreate=v?[].concat(v,d):[d]}return{esModule:r,exports:c,options:l}}},function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(7),n=a(i),r=s(10),c=a(r);e.default={name:"TimesheetMonthDayDetails",components:{wpselector:n.default,day:c.default},props:{workPackages:{require:!0},day:{require:!0},selection:{require:!0},label:{require:!0},dayExcess:{require:!0}},data:function(){return{formAdd:!1,debug:!1}},filters:{heures:function(t){var e=Math.floor(t),s=Math.round(60*(t-e));return s<10&&(s="0"+s),console.log(t," => ",e,"h",s),e+":"+s}},computed:{isExceed:function(){return this.total>this.day.dayLength},totalWP:function(){var t=0;return this.day.declarations.forEach(function(e){t+=e.duration}),t},enseignements:function(){var t=0;return this.day.teaching.forEach(function(e){t+=e.duration}),t},abs:function(){var t=0;return this.day.vacations.forEach(function(e){t+=e.duration}),t},learn:function(){var t=0;return this.day.training.forEach(function(e){t+=e.duration}),t},other:function(){var t=0;return this.day.infos.forEach(function(e){t+=e.duration}),t},sickleave:function(){var t=0;return this.day.sickleave.forEach(function(e){t+=e.sickleave}),t},research:function(){var t=0;return this.day.research.forEach(function(e){t+=e.research}),t}},methods:{addToWorkpackage:function(t){this.$emit("addtowp",t)}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{workpackages:{default:[]},selection:{reuire:!0},others:{default:function(){return[{label:"Congès",code:"conges",description:"Congès, RTT, récupération",icon:!0},{label:"Formation",code:"learning",description:"Vous avez suivi un formation, DIFF, etc...",icon:!0},{label:"Enseignement",code:"teaching",description:"Cours, TD, fonction pédagogique",icon:!0},{label:"Arrêt maladie",code:"sickleave",description:"",icon:!0},{label:"Absent",code:"absent",description:"",icon:!0},{label:"Autre recherche",code:"research",description:"Autre projet de recherche (sans feuille de temps)",icon:!0}]}}},data:function(){return{}},computed:{hasSelected:function(){return null!=this.selection},selectedCode:function(){return this.selection?this.selection.code:""},selectedLabel:function(){return this.selection?this.selection.label:""},selectedIcon:function(){return this.selection&&this.selection.icon?this.selection.code:""},selectedDescription:function(){return this.selection?this.selection.description:""}},methods:{handlerSelectWP:function(t){console.log("Selection WP"),this.selection=t,this.$emit("select",this.selection)},handlerSelectOther:function(t){console.log("Selection OTHER"),this.selection=t,this.$emit("select",this.selection)}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"TimesheetMonthDeclarationItem",props:{d:{required:!0},dayLength:{required:!0}},filters:{heures:function(t){var e=Math.floor(t),s=Math.round(60*(t-e));return s<10&&(s="0"+s),console.log(t," => ",e,"h",s),e+":"+s}}}},function(t,e,s){t.exports=s(5)},function(t,e,s){"use strict";function a(t){s(6)}Object.defineProperty(e,"__esModule",{value:!0});var i=s(1),n=s.n(i);for(var r in i)"default"!==r&&function(t){s.d(e,t,function(){return i[t]})}(r);var c=s(12),o=s(0),l=a,d=o(n.a,c.a,!1,l,null,null);e.default=d.exports},function(t,e){},function(t,e,s){"use strict";function a(t){s(8)}Object.defineProperty(e,"__esModule",{value:!0});var i=s(2),n=s.n(i);for(var r in i)"default"!==r&&function(t){s.d(e,t,function(){return i[t]})}(r);var c=s(9),o=s(0),l=a,d=o(n.a,c.a,!1,l,"data-v-7e55b372",null);e.default=d.exports},function(t,e){},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dropdown"},[s("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button",id:"dropdownMenu1","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[t.hasSelected?s("span",{staticClass:"info"},[s("i",{class:t.selectedIcon?"icon-"+t.selectedIcon:"icon-archive"}),t._v(" "),s("strong",[t._v(t._s(t.selectedCode))]),t._v(" "),s("em",[t._v(t._s(t.selectedLabel))]),s("br"),t._v(" "),s("small",{staticClass:"text-light"},[t._v(t._s(t.selectedDescription))])]):s("em",{staticClass:"info"},[t._v("Lot de travail/Activité...")]),t._v(" "),s("span",{staticClass:"caret"})]),t._v(" "),s("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenu1"}},[t._l(t.workpackages,function(e){return s("li",{class:t.selection==e?"selected":""},[s("a",{attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.handlerSelectWP(e)}}},[s("i",{staticClass:"icon-archive"}),t._v(" "),s("abbr",{attrs:{title:e.project}},[t._v("["+t._s(e.acronym)+"]")]),t._v(" "),s("strong",[t._v(t._s(e.code))]),t._v(" "),s("em",[t._v(t._s(e.label))]),s("br"),t._v(" "),s("small",{staticClass:"text-light"},[t._v(t._s(e.description))])])])}),t._v(" "),s("li",{staticClass:"divider",attrs:{role:"separator"}}),t._v(" "),t._l(t.others,function(e){return s("li",{class:t.selection==e?"selected":""},[s("a",{attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.handlerSelectOther(e)}}},[s("i",{class:"icon-"+e.code}),t._v("\n                "+t._s(e.label)+"\n            ")])])})],2)])},i=[],n={render:a,staticRenderFns:i};e.a=n},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(3),i=s.n(a);for(var n in a)"default"!==n&&function(t){s.d(e,t,function(){return a[t]})}(n);var r=s(11),c=s(0),o=c(i.a,r.a,!1,null,null,null);e.default=o.exports},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{staticClass:"card card-xs xs wp-duration",class:"status-"+t.d.status_id},[s("span",{staticClass:"infos"},[s("strong",[s("i",{staticClass:"icon-archive"}),t._v(" "),s("abbr",{attrs:{title:t.d.project}},[t._v(t._s(t.d.acronym))]),t._v(" "),s("i",{staticClass:"icon-angle-right"}),t._v(" "+t._s(t.d.wpCode)+"\n            "),s("i",{staticClass:"icon-comment",class:t.d.comment?"with-comment":"",attrs:{title:t.d.comment}})]),s("br"),t._v(" "),s("small",[s("i",{staticClass:"icon-cubes"}),t._v(" "+t._s(t.d.label))]),t._v(" "),s("div",{staticClass:"status"},[1==t.d.status_id?s("small",[s("i",{staticClass:"icon-ok-circled"}),t._v("Validée")]):2==t.d.status_id?s("small",[s("i",{staticClass:"icon-pencil"}),t._v(" Brouillon")]):3==t.d.status_id?s("small",[s("i",{staticClass:"icon-attention-circled"}),t._v(" Rejeté")]):5==t.d.status_id?s("small",[s("i",{staticClass:"icon-paper-plane"}),t._v("En cours de validation")]):s("small",[s("i",{staticClass:"icon-help-circled"}),t._v(" Autre status ("+t._s(t.d.status_id)+")")]),t._v(" "),2!=t.d.status_id&&3!=t.d.status_id?s("div",[t.d.validations.prj.date?s("span",[s("i",{staticClass:"icon-cubes"}),t._v("\n                    Validation projet par "),s("strong",[t._v(t._s(t.d.validations.prj.validator))]),t._v("\n                    le "),s("time",{attrs:{datetime:t.d.validations.prj.date}},[t._v(t._s(t.d.validations.prj.date))])]):s("span",[s("i",{staticClass:"icon-cubes"}),t._v("\n                    Validation projet en attente...\n                ")]),t._v(" "),s("br"),t._v(" "),t.d.validations.sci.date?s("span",[s("i",{staticClass:"icon-beaker"}),t._v("\n                    Validé scientifiquement par "),s("strong",[t._v(t._s(t.d.validations.sci.validator))]),t._v("\n                    le "),s("time",{attrs:{datetime:t.d.validations.sci.date}},[t._v(t._s(t.d.validations.sci.date))])]):s("span",[s("i",{staticClass:"icon-beaker"}),t._v(" "),t.d.credentials.validableSci?s("span",[s("a",{staticClass:"btn btn-xs btn-success",attrs:{href:"#"}},[t._v("Valider scientifiquement")]),t._v(" "),s("a",{staticClass:"btn btn-xs btn-danger",attrs:{href:"#"}},[t._v("Refuser scientifiquement")])]):s("span",[t._v("\n                        Validation scientifique en attente...\n                    ")])]),t._v(" "),s("br"),t._v(" "),t.d.validations.adm.date?s("span",[s("i",{staticClass:"icon-book"}),t._v("\n                    Validé administrativement par "),s("strong",[t._v(t._s(t.d.validations.adm.validator))]),t._v("\n                    le "),s("time",{attrs:{datetime:t.d.validations.adm.date}},[t._v(t._s(t.d.validations.adm.date))])]):s("span",[s("i",{staticClass:"icon-book"}),t._v(" "),t.d.credentials.validableAdm?s("span",[s("a",{staticClass:"btn btn-xs btn-success",attrs:{href:"#"}},[t._v("Valider administrativement")]),t._v(" "),s("a",{staticClass:"btn btn-xs btn-danger",attrs:{href:"#"}},[t._v("Refuser administrativement")])]):s("span",[t._v("\n                        Validation administrative en attente...\n                    ")])])]):t._e(),t._v(" "),t.d.validations.conflict?s("span",{staticClass:"text-danger"},[t._v("\n                "+t._s(t.d.validations.conflict)+"\n            ")]):t._e()])]),t._v(" "),s("div",{staticClass:"total"},[t._v("\n        "+t._s(t._f("duration2")(t.d.duration,t.dayLength))+"\n    ")]),t._v(" "),s("div",{staticClass:"left buttons-icon"},[s("i",{staticClass:"icon-trash",class:1!=t.d.credentials.deletable?"disabled":"",on:{click:function(e){t.$emit("removetimesheet",t.d)}}}),t._v(" "),s("i",{staticClass:"icon-edit",class:1!=t.d.credentials.editable?"disabled":"",on:{click:function(e){t.$emit("edittimesheet",t.d)}}}),t._v(" "),s("i",{staticClass:"icon-bug",on:{click:function(e){t.$emit("debug",t.d)}}})])])},i=[],n={render:a,staticRenderFns:i};e.a=n},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"day-details",class:{locked:t.day.locked}},[s("h3",{on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.$emit("debug",t.day)}}},[t._v("Déclarer des heures "),s("strong",[t._v(t._s(t.label))])]),t._v(" "),s("a",{staticClass:"link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.$emit("cancel")}}},[s("i",{staticClass:"icon-angle-left"}),t._v(" Retour\n    ")]),t._v(" "),t.day.locked?s("div",{staticClass:"alert alert-danger"},[t._v("\n        "+t._s(t.day.lockedReason)+"\n    ")]):s("div",[t._v("\n        Compléter avec :\n        "),s("wpselector",{attrs:{workpackages:t.workPackages,selection:t.selection},on:{select:t.addToWorkpackage}})],1),t._v(" "),s("section",[t.day.declarations.length?[t._m(0),t._v(" "),t._l(t.day.declarations,function(e){return s("day",{key:e.id,attrs:{d:e,"day-length":t.day.dayLength},on:{debug:function(e){t.$emit("debug",e)},removetimesheet:function(e){t.$emit("removetimesheet",e)},edittimesheet:function(e){t.$emit("edittimesheet",e,t.day)}}})}),t._v(" "),s("article",{staticClass:"wp-duration card xs"},[t._m(1),t._v(" "),s("div",{staticClass:"total"},[s("span",{staticClass:"text-large text-xl"},[t._v(t._s(t._f("duration2")(t.totalWP,t.day.dayLength)))]),t._v(" "),s("em",[t._v("heure(s)")])]),t._v(" "),s("div",{staticClass:"left"})]),t._v(" "),s("hr")]:t._e(),t._v(" "),t._l(t.day.teaching,function(e){return s("article",{staticClass:"wp-duration card xs"},[s("strong",[s("i",{staticClass:"icon-teaching"}),t._v(" Enseignements"),s("br"),t._v(" "),s("small",[t._v(t._s(e.description))])]),t._v(" "),s("div",{staticClass:"total"},[t._v(t._s(t._f("duration2")(e.duration,t.day.dayLength))+" "),s("em",[t._v("heure(s)")])]),t._v(" "),s("div",{staticClass:"left"},[s("i",{staticClass:"icon-trash",on:{click:function(s){t.$emit("removetimesheet",e)}}})])])}),t._v(" "),t._l(t.day.training,function(e){return s("article",{staticClass:"wp-duration card xs"},[s("strong",[s("i",{staticClass:"icon-training"}),t._v(" Formation"),s("br"),t._v(" "),s("small",[t._v(t._s(e.description))])]),t._v(" "),s("div",{staticClass:"total"},[t._v(t._s(t._f("duration2")(e.duration,t.day.dayLength))+" "),s("em",[t._v("heure(s)")])]),t._v(" "),s("div",{staticClass:"left"},[s("i",{staticClass:"icon-trash",on:{click:function(s){t.$emit("removetimesheet",e)}}})])])}),t._v(" "),t._l(t.day.vacations,function(e){return s("article",{staticClass:"wp-duration card xs"},[s("strong",[s("i",{staticClass:"icon-vacation"}),t._v(" Congès"),s("br"),t._v(" "),s("small",[t._v(t._s(e.description))])]),t._v(" "),s("div",{staticClass:"total"},[t._v(t._s(t._f("duration2")(e.duration,t.day.dayLength))+" "),s("em",[t._v("heure(s)")])]),t._v(" "),s("div",{staticClass:"left"},[s("i",{staticClass:"icon-trash",on:{click:function(s){t.$emit("removetimesheet",e)}}})])])}),t._v(" "),t._l(t.day.sickleave,function(e){return s("article",{staticClass:"wp-duration card xs"},[s("strong",[s("i",{staticClass:"icon-sickleave"}),t._v(" Arrêt maladie"),s("br"),t._v(" "),s("small",[t._v(t._s(e.description))])]),t._v(" "),s("div",{staticClass:"total"},[t._v(t._s(t._f("duration2")(e.duration,t.day.dayLength))+" "),s("em",[t._v("heure(s)")])]),t._v(" "),s("div",{staticClass:"left"},[s("i",{staticClass:"icon-trash",on:{click:function(s){t.$emit("removetimesheet",e)}}})])])}),t._v(" "),t._l(t.day.research,function(e){return s("article",{staticClass:"wp-duration card xs"},[s("strong",[s("i",{staticClass:"icon-research"}),t._v(" Autre projet de recherche"),s("br"),t._v(" "),s("small",[t._v(t._s(e.description))])]),t._v(" "),s("div",{staticClass:"total"},[t._v(t._s(t._f("duration2")(e.duration,t.day.dayLength))+" "),s("em",[t._v("heure(s)")])]),t._v(" "),s("div",{staticClass:"left"},[s("i",{staticClass:"icon-trash",on:{click:function(s){t.$emit("removetimesheet",e)}}})])])}),t._v(" "),t._l(t.day.absent,function(e){return s("article",{staticClass:"wp-duration card xs"},[s("strong",[s("i",{staticClass:"icon-abs"}),t._v(" Absence"),s("br"),t._v(" "),s("small",[t._v(t._s(e.description))])]),t._v(" "),s("div",{staticClass:"total"},[t._v(t._s(t._f("duration2")(e.duration,t.day.dayLength))+" "),s("em",[t._v("heure(s)")])]),t._v(" "),s("div",{staticClass:"left"},[s("i",{staticClass:"icon-trash",on:{click:function(s){t.$emit("removetimesheet",e)}}})])])}),t._v(" "),t._l(t.day.infos,function(e){return s("article",{staticClass:"wp-duration card xs"},[s("strong",[s("i",{staticClass:"icon-infos"}),t._v(" Infos"),s("br"),t._v(" "),s("small",[t._v(t._s(e.description))])]),t._v(" "),s("div",{staticClass:"total"},[t._v(t._s(t._f("duration2")(e.duration,t.day.dayLength))+" "),s("em",[t._v("heure(s)")])]),t._v(" "),s("div",{staticClass:"left"},[s("i",{staticClass:"icon-trash",on:{click:function(s){t.$emit("removetimesheet",e)}}})])])}),t._v(" "),s("hr"),t._v(" "),s("article",{staticClass:"wp-duration card xs"},[s("span",{staticClass:"text-large text-xl"},[t._v("Total journée")]),t._v(" "),s("div",{staticClass:"total"},[s("span",{staticClass:"text-large text-xl"},[t._v(t._s(t._f("duration2")(t.day.duration,t.day.dayLength)))]),t._v(" "),s("em",[t._v("heure(s)")])]),t._v(" "),s("div",{staticClass:"left"},[t._v("\n                 \n            ")])]),t._v(" "),t.day.duration>t.day.maxDay?s("div",{staticClass:"alert-danger alert"},[s("i",{staticClass:"icon-attention-circled"}),t._v("\n            Attention, le cumul des heures déclarées exéde la limite légale de "),s("strong",[t._v(t._s(t._f("heures")(t.day.maxDay))+" heures")]),t._v(" fixée par le droit du travail.\n        ")]):t._e()],2),t._v(" "),s("a",{attrs:{href:"#"},on:{click:function(e){t.debug=!t.debug}}},[s("i",{staticClass:"icon-bug"}),t._v(" debug")]),t._v(" "),s("pre",{directives:[{name:"show",rawName:"v-show",value:t.debug,expression:"debug"}]},[t._v(t._s(t.day))])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",[s("i",{staticClass:"icon-archive"}),t._v(" Heures identifiées sur des lots")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"text-large text-xl"},[t._v("Total"),s("br"),t._v(" "),s("small",{staticClass:"text-thin text-small"},[t._v("Sur les activités soumises aux déclarations")])])}],n={render:a,staticRenderFns:i};e.a=n}])});
//# sourceMappingURL=TimesheetMonthDayDetails.js.map