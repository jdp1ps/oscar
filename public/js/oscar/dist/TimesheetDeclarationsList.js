(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TimesheetDeclarationsList=t():e.TimesheetDeclarationsList=t()})("undefined"!=typeof self?self:this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default={name:"TimesheetDeclarationsList",props:{moment:{required:!0},bootbox:{required:!0},urlapi:{default:null}},components:{},data:function(){return{loading:null,declarations:[],error:null}},filters:{},methods:{fetch:function(){var e=this;!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading="Chargement de la période",this.$http.get("").then(function(t){for(var n in t.body)t.body[n].open=!1;e.declarations=t.body},function(t){e.error=i.default.resolve("Impossible de charger les données",t)}).then(function(t){e.loading=!1})},handlerCancelDeclaration:function(e){var t=this;console.log(e),this.bootbox.confirm("Supprimer la déclaration (le déclarant devra réenvoyer la déclaration) ?",function(n){n&&(t.loading="Suppression de la déclaration",t.$http.delete("?person_id="+e.person_id+"&period="+e.period).then(function(e){t.fetch()},function(e){t.error=i.default.resolve("Impossible de charger les données",e)}).then(function(e){t.loading=!1}))})}},mounted:function(){this.fetch(!0)}}},function(e,t,n){e.exports=n(2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var a=n(5),s=n(3),c=s(i.a,a.a,!1,null,null,null);t.default=c.exports},function(e,t){e.exports=function(e,t,n,o,i,r){var a,s=e=e||{},c=typeof e.default;"object"!==c&&"function"!==c||(a=e,s=e.default);var l="function"==typeof s?s.options:s;t&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId=i);var d;if(r?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},l._ssrRegister=d):o&&(d=o),d){var u=l.functional,f=u?l.render:l.beforeCreate;u?(l._injectStyles=d,l.render=function(e,t){return d.call(t),f(e,t)}):l.beforeCreate=f?[].concat(f,d):[d]}return{esModule:a,exports:s,options:l}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={resolve:function(e,t){var n="Erreur inconnue";return t&&(n=t.body,403==t.status&&(n="Vous avez été déconnectez de l'application")),e+" (Réponse : "+n+")"}}},function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"validations-admin"},[n("transition",{attrs:{name:"fade"}},[e.loading?n("div",{staticClass:"pending overlay"},[n("div",{staticClass:"overlay-content"},[n("i",{staticClass:"icon-spinner animate-spin"}),e._v("\n                "+e._s(e.loading)+"\n            ")])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.error?n("div",{staticClass:"pending overlay"},[n("div",{staticClass:"overlay-content"},[n("i",{staticClass:"icon-attention-1"}),e._v("\n                "+e._s(e.error)+"\n            ")])]):e._e()]),e._v(" "),n("h1",[e._v("Liste des déclarations")]),e._v(" "),e._l(e.declarations,function(t,o){return n("section",{staticClass:"card declaration",on:{click:function(e){t.open=!t.open}}},[n("strong",[e._v(e._s(t.person))]),e._v(" "),n("time",[e._v(e._s(t.period))]),e._v(" "),n("span",{staticClass:"validations-icon"},e._l(t.declarations,function(e){return n("i",{staticClass:"icon",class:"icon-"+e.status,attrs:{title:e.label}})})),e._v(" "),n("nav",[n("a",{staticClass:"btn btn-danger btn-xs",attrs:{href:"#"},on:{click:function(n){e.handlerCancelDeclaration(t)}}},[n("i",{staticClass:"icon-trash"}),e._v("Annuler cette déclaration")])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"line.open"}],staticClass:"validations text-small"},e._l(t.declarations,function(t){return n("article",{staticClass:"validation"},[n("span",[n("i",{class:"activity"==t.object?"icon-cube":"icon-tag"}),e._v(" "),n("strong",[e._v(e._s(t.label))])]),e._v(" "),n("em",[e._v("\n                    État : "),n("i",{class:"icon-"+t.status})])])}))])})],2)},i=[],r={render:o,staticRenderFns:i};t.a=r}])});
//# sourceMappingURL=TimesheetDeclarationsList.js.map