(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TimesheetDeclarationsList=e():t.TimesheetDeclarationsList=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(a[i])return a[i].exports;var n=a[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=5)}([function(t,e){t.exports=function(t,e,a,i,n,s){var r,l=t=t||{},o=typeof t.default;"object"!==o&&"function"!==o||(r=t,l=t.default);var c="function"==typeof l?l.options:l;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),a&&(c.functional=!0),n&&(c._scopeId=n);var d;if(s?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=d):i&&(d=i),d){var u=c.functional,v=u?c.render:c.beforeCreate;u?(c._injectStyles=d,c.render=function(t,e){return d.call(e),v(t,e)}):c.beforeCreate=v?[].concat(v,d):[d]}return{esModule:r,exports:l,options:c}}},function(t,e,a){"use strict";var i=a(2),n=a(7),s=a(9);e.a={name:"TimesheetDeclarationsList",props:{moment:{required:!0},bootbox:{required:!0},urlapi:{default:null},editable:{default:!1}},components:{personautocompleter:n.a,personschedule:s.a},data:function(){return{loading:null,schedule:null,declarations:{},declarers:{},error:null,selectedValidation:null,create:!1,addedPerson:null,filterPerson:"",filterActivity:"",selectedPerson:null,validatorId:null,validatorLabel:null,addvalidatorperson:null}},computed:{declarants:function(){var t=this,e={};return this.declarations&&Object.keys(this.declarations).forEach(function(a){var i=t.declarations[a].person,n=t.declarations[a].person_id;e.hasOwnProperty(i)||(e[i]={person:i,person_id:n})}),e},activities:function(){var t=this,e=[];return this.declarations&&Object.keys(this.declarations).forEach(function(a){for(var i=0;i<t.declarations[a].declarations.length;i++)e.indexOf(t.declarations[a].declarations[i].label)<0&&e.push(t.declarations[a].declarations[i].label)}),e},filteredDeclarations:function(){for(var t=this,e=[],a=Object.keys(this.declarations),i=0;i<a.length;i++){var n=a[i],s=this.declarations[n];if(""==this.filterPerson||s.person==this.filterPerson){if(""!=this.filterActivity){var r=!1;if(s.declarations.forEach(function(e){e.label==t.filterActivity&&(r=!0)}),0==r)continue}e.push(s)}}return e}},methods:{handlerSaveSchedule:function(t){var e=this,a=new FormData;a.append("person_id",this.schedule.person_id),a.append("period",this.schedule.period),a.append("action","changeschedule"),a.append("days",JSON.stringify(t)),this.$http.post("",a).then(function(t){e.fetch()},function(t){e.error=i.a.resolve("Impossible de modifier les horaires",t)}).then(function(t){e.addedPerson=null,e.schedule=null,e.create=null,e.loading=!1})},handlerChangeSchedule:function(t){console.log(t.settings),this.schedule={schedule:JSON.parse(t.settings),person_id:t.person_id,period:t.period}},handlerSelectValidateur:function(t){this.validatorLabel=t.displayname,this.validatorId=t.id},handlerAdd:function(t){this.create=t},handlerAddPerson:function(t){this.addedPerson=t},handlerDelete:function(t,e){var a=this;this.loading="Suppression du validateur";var n=new FormData;n.append("person_id",e.id),n.append("declaration_id",this.selectedValidation.id),n.append("action","delete"),n.append("type",t),this.$http.post("",n).then(function(i){switch(t){case"prj":a.selectedValidation.validateursPrj.splice(a.selectedValidation.validateursPrj.indexOf(e,1));break;case"sci":a.selectedValidation.validateursSci.splice(a.selectedValidation.validateursSci.indexOf(e,1));break;case"adm":a.selectedValidation.validateursAdm.splice(a.selectedValidation.validateursAdm.indexOf(e,1))}},function(t){a.error=i.a.resolve("Impossible de supprimer ce validateur",t)}).then(function(t){a.addedPerson=null,a.create=null,a.loading=!1})},handlerConfirmAdd:function(t,e){var a=this;this.loading="Ajout du validateur";var n=new FormData;n.append("person_id",e),n.append("declaration_id",this.selectedValidation.id),n.append("type",t),this.$http.post("",n).then(function(e){switch(t){case"prj":a.selectedValidation.validateursPrj.push(e.body);break;case"sci":a.selectedValidation.validateursSci.push(e.body);break;case"adm":a.selectedValidation.validateursAdm.push(e.body)}},function(t){a.error=i.a.resolve("Impossible d'ajouter le validateur",t)}).then(function(t){a.addedPerson=null,a.create=null,a.loading=!1})},fetch:function(){var t=this;!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading="Chargement des données",this.$http.get("").then(function(e){for(var a in e.body.periods)e.body.periods[a].open=!1;t.declarations=e.body.periods,t.declarers=e.body.declarants},function(e){t.error=i.a.resolve("Impossible de charger les données",e)}).then(function(e){t.loading=!1})},handlerCancelDeclaration:function(t){var e=this;console.log(t),this.bootbox.confirm("Supprimer la déclaration (le déclarant devra réenvoyer la déclaration) ?",function(a){a&&(e.loading="Suppression de la déclaration",e.$http.delete("?person_id="+t.person_id+"&period="+t.period).then(function(t){e.fetch()},function(t){e.error=i.a.resolve("Impossible de charger les données",t)}).then(function(t){e.loading=!1}))})},handlerFilterPerson:function(t){this.selectedValidation=null,this.filterPerson=this.filterPerson==t.displayname?"":t.displayname,this.selectedPerson=t},handlerFilterActivity:function(t){this.selectedValidation=null,this.filterActivity=this.filterActivity==t?"":t}},mounted:function(){this.fetch(!0)}}},function(t,e,a){"use strict";e.a={resolve:function(t,e){var a="Erreur inconnue";return e&&(a=e.body,403==e.status&&(a="Vous avez été déconnectez de l'application")),t+" (Réponse : "+a+")"}}},function(t,e,a){"use strict";e.a={data:function(){return{url:"/person?l=m&q=",persons:[],expression:"",loading:!1,selectedPerson:null,showSelector:!0,request:null}},watch:{expression:function(t,e){t.length>=2&&this.search()}},methods:{search:function(){var t=this;this.loading=!0,this.$http.get(this.url+this.expression,{before:function(t){this.request&&this.request.abort(),this.request=t}}).then(function(e){t.persons=e.body.datas,t.showSelector=!0},function(t){}).then(function(e){t.loading=!1,t.request=null})},handlerSelectPerson:function(t){this.selectedPerson=t,this.showSelector=!1,this.expression="",this.$emit("change",t)}}}},function(t,e,a){"use strict";var i=a(2);e.a={name:"PersonSchedule",props:{urlapi:{default:""},editable:{default:!1},schedule:null},data:function(){return{daysLabels:{1:"Lundi",2:"Mardi",3:"Mercredi",4:"Jeudi",5:"Vendredi",6:"Samedi",7:"Dimanche"},loading:null,error:null,dayLength:0,from:null,days:{},editDay:null,newValue:0,models:[],model:null}},computed:{totalWeek:function(){var t=this,e=0;return Object.keys(this.days).forEach(function(a){e+=parseFloat(t.days[a])}),e}},methods:{day:function(t){return this.days.hasOwnProperty(t)?this.days[t]:this.dayLength},handlerEditDays:function(){this.editDay=!0},handlerCancel:function(){this.urlapi?this.fetch():this.$emit("cancel")},handlerSaveDays:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"input";if(this.urlapi){this.loading="Enregistrement des horaires";var a=new FormData;"input"==e?a.append("days",JSON.stringify(this.days)):a.append("model",e),this.$http.post(this.urlapi,a).then(function(e){t.fetch()},function(e){t.error=i.a.resolve("Impossible de modifier les horaires",e)}).then(function(e){t.loading=!1})}else this.$emit("changeschedule",this.days)},fetch:function(){var t=this;!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null==this.schedule?(this.loading="Chargement des données",this.$http.get(this.urlapi).then(function(e){console.log(e.body),t.days=e.body.days,t.dayLength=e.body.dayLength,t.from=e.body.from,t.models=e.body.models,t.model=e.body.model},function(e){t.error=i.a.resolve("Impossible de charger les données",e)}).then(function(e){t.loading=!1,t.editDay=null})):(console.log(this.schedule),this.days=this.schedule.days,this.dayLength=this.schedule.dayLength,this.editDay=!0)}},mounted:function(){this.fetch(!0)}}},function(t,e,a){t.exports=a(6)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(1),n=a(11),s=a(0),r=s(i.a,n.a,!1,null,null,null);e.default=r.exports},function(t,e,a){"use strict";var i=a(3),n=a(8),s=a(0),r=s(i.a,n.a,!1,null,null,null);e.a=r.exports},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.expression,expression:"expression"}],attrs:{type:"text"},domProps:{value:t.expression},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.search(e))},input:function(e){e.target.composing||(t.expression=e.target.value)}}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[a("i",{staticClass:"icon-spinner animate-spin"})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.persons.length>0&&t.showSelector,expression:"persons.length > 0 && showSelector"}],staticClass:"choose",staticStyle:{position:"absolute","z-index":"3000","max-height":"400px",overflow:"hidden","overflow-y":"scroll"}},t._l(t.persons,function(e){return a("div",{key:e.id,staticClass:"choice",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.handlerSelectPerson(e)}}},[a("div",{staticStyle:{display:"block",width:"50px",height:"50px"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:"https://www.gravatar.com/avatar/"+e.mailMd5+"?s=50",alt:e.displayname}})]),t._v(" "),a("div",{staticClass:"infos"},[a("strong",{staticStyle:{"font-weight":"700","font-size":"1.1em","padding-left":"0"}},[t._v(t._s(e.displayname))]),a("br"),t._v(" "),a("span",{staticStyle:{"font-weight":"100","font-size":".8em","padding-left":"0"}},[a("i",{staticClass:"icon-location"}),t._v("\n                    "+t._s(e.affectation)+"\n                    "),e.ucbnSiteLocalisation?a("span",[t._v(" ~ "+t._s(e.ucbnSiteLocalisation))]):t._e()]),a("br"),t._v(" "),a("em",{staticStyle:{"font-weight":"100","font-size":".8em"}},[a("i",{staticClass:"icon-mail"}),t._v(t._s(e.email))])])])}),0)])},n=[],s={render:i,staticRenderFns:n};e.a=s},function(t,e,a){"use strict";var i=a(4),n=a(10),s=a(0),r=s(i.a,n.a,!1,null,null,null);e.a=r.exports},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"schedule"},[a("transition",{attrs:{name:"fade"}},[t.loading?a("div",{staticClass:"pending overlay"},[a("div",{staticClass:"overlay-content"},[a("i",{staticClass:"icon-spinner animate-spin"}),t._v("\n                "+t._s(t.loading)+"\n            ")])]):t._e()]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.error?a("div",{staticClass:"pending overlay"},[a("div",{staticClass:"overlay-content"},[a("i",{staticClass:"icon-attention-1"}),t._v("\n                "+t._s(t.error)+"\n            ")])]):t._e()]),t._v(" "),a("p",[t._v("La répartition horaire est issue de "+t._s(t.from)+"\n\n    "),"application"==t.from?a("strong",[t._v("la configuration Oscar par défaut")]):t._e(),t._v(" "),"sync"==t.from?a("strong",[t._v("la synchronisation (Connector)")]):t._e(),t._v(" "),"custom"==t.from?a("strong",[t._v("la configuration prédéfinie")]):t._e(),t._v(" "),"free"==t.from?a("strong",[t._v("la configuration manuelle")]):t._e()]),t._v(" "),t._l(t.days,function(e,i){return a("article",{staticClass:"card xs"},[a("h3",{staticClass:"card-title"},[a("strong",[t._v(t._s(t.daysLabels[i]))]),t._v(" "),t.editDay?a("input",{directives:[{name:"model",rawName:"v-model",value:t.days[i],expression:"days[day]"}],attrs:{type:"text"},domProps:{value:t.days[i]},on:{input:function(e){e.target.composing||t.$set(t.days,i,e.target.value)}}}):a("em",{staticClass:"big right",on:{click:function(e){return t.handlerEditDays()}}},[t._v(t._s(t._f("heures")(e)))])])])}),t._v(" "),a("article",{staticClass:"card"},[a("h3",{staticClass:"card-title"},[a("strong",[t._v("Total / semaine")]),t._v(" "),a("em",{staticClass:"big right"},[t._v(t._s(t._f("heures")(t.totalWeek)))])])]),t._v(" "),t.editable?a("nav",[t.editDay?t._e():a("button",{staticClass:"btn btn-default",on:{click:function(e){return e.preventDefault(),t.handlerEditDays()}}},[a("i",{staticClass:"icon-pencil"}),t._v(" modifier")]),t._v(" "),t.editDay?a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.handlerSaveDays()}}},[a("i",{staticClass:"icon-floppy"}),t._v(" enregistrer")]):t._e(),t._v(" "),t.models&&t.editDay?a("select",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"form-inline",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.model=e.target.multiple?a:a[0]},function(e){return t.handlerSaveDays(t.model)}]}},[a("option",{attrs:{value:"default"}},[t._v("Aucun")]),t._v(" "),t._l(t.models,function(e,i){return a("option",{domProps:{value:i,selected:t.model==i}},[t._v(t._s(e.label))])})],2):t._e(),t._v(" "),t.editDay&&"default"!=t.from?a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.handlerSaveDays("default")}}},[a("i",{staticClass:"icon-floppy"}),t._v(" Horaires par défaut")]):t._e(),t._v(" "),t.editDay?a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.handlerCancel()}}},[a("i",{staticClass:"icon-cancel-circled"}),t._v(" annuler")]):t._e()]):t._e()],2)},n=[],s={render:i,staticRenderFns:n};e.a=s},function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"validations-admin"},[a("transition",{attrs:{name:"fade"}},[t.loading?a("div",{staticClass:"pending overlay"},[a("div",{staticClass:"overlay-content"},[a("i",{staticClass:"icon-spinner animate-spin"}),t._v("\n                "+t._s(t.loading)+"\n            ")])]):t._e()]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.error?a("div",{staticClass:"pending overlay"},[a("div",{staticClass:"overlay-content"},[a("i",{staticClass:"icon-attention-1"}),t._v("\n                "+t._s(t.error)+"\n            ")])]):t._e()]),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.create,expression:"create"}],staticClass:"overlay"},[a("div",{staticClass:"overlay-content",staticStyle:{"overflow-y":"visible"}},[a("span",{staticClass:"overlay-closer",on:{click:function(e){t.create=null}}},[t._v("X")]),t._v("\n                Choisissez une personne à ajouter :\n\n                "),a("personautocompleter",{on:{change:t.handlerAddPerson}}),t._v(" "),a("button",{staticClass:"btn btn-primary",class:{disabled:null==t.addedPerson},on:{click:function(e){return t.handlerConfirmAdd(t.create,t.addedPerson.id)}}},[null!=t.addedPerson?a("span",[t._v("Ajouter "),a("strong",[t._v(t._s(t.addedPerson.displayname))]),t._v(" comme validateur")]):a("span",[t._v("Selectionner une personne")])])],1)])]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.addvalidatorperson?a("div",{staticClass:"overlay"},[a("div",{staticClass:"overlay-content",staticStyle:{"overflow-y":"visible"}},[a("span",{staticClass:"overlay-closer",on:{click:function(e){t.addvalidatorperson=null}}},[t._v("X")]),t._v(" "),a("h3",[t._v("Assigner un validateur Hors-lot")]),t._v(" "),a("p",{staticClass:"alert alert-info"},[t._v("Selectionnez un validateur pour les "),a("strong",[t._v("créneaux Hors-Lot")]),t._v(" de "),a("strong",[t._v(t._s(t.filterPerson))]),t._v(".\n                Cet opération affectera également le validateur pour les déclarations en cours non-validée.\n                ")]),t._v(" "),a("personautocompleter",{on:{change:t.handlerSelectValidateur}}),t._v(" "),a("form",{attrs:{action:"",method:"post"}},[a("input",{attrs:{type:"hidden",name:"action",value:"addvalidator"}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"person"},domProps:{value:t.selectedPerson.id}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"validatorId"},domProps:{value:t.validatorId}}),t._v(" "),a("button",{staticClass:"btn btn-primary",class:{disabled:!t.validatorId},attrs:{type:"submit"}},[t._v("Ajouter "),a("strong",[t._v(t._s(t.validatorLabel))]),t._v(" comme validateur hors-lot")])]),t._v(" "),a("button",{on:{click:function(e){t.addvalidatorperson=null}}},[t._v("Annuler")])],1)]):t._e()]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.schedule?a("div",{staticClass:"overlay"},[a("div",{staticClass:"overlay-content",staticStyle:{"overflow-y":"visible"}},[a("personschedule",{attrs:{schedule:t.schedule.schedule,editable:!0},on:{cancel:function(e){t.schedule=null},changeschedule:t.handlerSaveSchedule}})],1)]):t._e()]),t._v(" "),a("h1",[t._v("Liste des déclarations")]),t._v(" "),a("div",{staticClass:"declarations-ui cols"},[a("div",{staticClass:"persons-list col-1 onglets"},[t._m(0),t._v(" "),a("div",[t._m(1),t._v(" "),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane active",attrs:{role:"tabpanel",id:"declarants"}},t._l(t.declarers,function(e){return a("article",{staticClass:"list-item",class:{selected:e.displayname==t.filterPerson},on:{click:function(a){return a.preventDefault(),t.handlerFilterPerson(e)}}},[a("i",{staticClass:"icon-user"}),t._v(" "+t._s(e.displayname)+"\n                            "),0==e.referents.length?a("i",{staticClass:"icon-attention-1"}):t._e()])}),0),t._v(" "),a("div",{staticClass:"tab-pane",attrs:{role:"tabpanel",id:"activities"}},t._l(t.activities,function(e){return a("article",{staticClass:"list-item",class:{selected:e==t.filterActivity},on:{click:function(a){return a.preventDefault(),t.handlerFilterActivity(e)}}},[a("i",{staticClass:"icon-cube"}),t._v(" "+t._s(e)+"\n                        ")])}),0)])])]),t._v(" "),a("div",{staticClass:"declarations-list col-4"},[t._m(2),t._v(" "),t._l(t.filteredDeclarations,function(e,i){return a("section",{staticClass:"card declaration reactive",on:{click:function(t){e.open=!e.open}}},[a("span",{staticClass:"opener"},[e.open?a("i",{staticClass:"icon-angle-down"}):a("i",{staticClass:"icon-angle-right"})]),t._v(" "),a("strong",[t._v(t._s(e.person))]),t._v(" "),a("time",[t._v(t._s(t._f("period")(e.period)))]),t._v(" "),a("span",{staticClass:"validations-icon"},[e.warnings.length>0?a("i",{staticClass:"icon-attention-1 bg-danger rounded",staticStyle:{"border-radius":"8px"}}):t._e(),t._v(" "),t._l(e.declarations,function(t){return a("i",{staticClass:"icon",class:"icon-"+t.status,attrs:{title:t.label}})})],2),t._v(" "),a("nav",[a("a",{staticClass:"btn btn-default btn-xs",attrs:{href:"/feuille-de-temps/excel?action=export2&period="+e.period+"&personid="+e.person_id}},[a("i",{staticClass:"icon-file-pdf"}),t._v("Voir")]),t._v(" "),a("a",{staticClass:"btn btn-default btn-xs",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.handlerChangeSchedule(e)}}},[a("i",{staticClass:"icon-clock"}),t._v("Horaires")]),t._v(" "),a("a",{staticClass:"btn btn-danger btn-xs",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.handlerCancelDeclaration(e)}}},[a("i",{staticClass:"icon-trash"}),t._v("Annuler")])]),t._v(" "),a("transition",{attrs:{name:"slide"}},[e.open?a("section",{staticClass:"validations text-small"},[e.warnings.length>0?a("ul",{staticClass:"alert-danger alert"},t._l(e.warnings,function(e){return a("li",[t._v(t._s(e))])}),0):t._e(),t._v(" "),t._l(e.declarations,function(e){return a("article",{staticClass:"validation",class:{selected:t.selectedValidation==e},on:{click:function(a){a.preventDefault(),a.stopPropagation(),t.selectedValidation=e}}},[a("span",[a("i",{class:"activity"==e.object?"icon-cube":"icon-"+e.object}),t._v(" "),a("strong",[t._v(t._s(e.label))])]),t._v(" "),"activity"==e.object?a("span",[e.validation.validationactivity_by?a("span",{staticClass:"cartouche green",attrs:{title:"Validation projet"}},[a("i",{staticClass:"icon-cube"}),t._v(t._s(e.validation.validationactivity_by)+"\n                            ")]):a("span",{directives:[{name:"else",rawName:"v-else"}],staticClass:"validators"},[a("i",{staticClass:"icon-cube"}),t._v(" "),t._l(e.validateursPrj,function(e){return a("span",[t._v(t._s(e.person))])})],2)]):a("span",[t._v("~")]),t._v(" "),"activity"==e.object?a("span",[e.validation.validationsci_by?a("span",{staticClass:"cartouche green",attrs:{title:"Validation scientifique"}},[a("i",{staticClass:"icon-beaker"}),t._v(t._s(e.validation.validationsci_by)+"\n                            ")]):a("span",{staticClass:"validators"},[a("i",{staticClass:"icon-beaker"}),t._v(" "),t._l(e.validateursSci,function(e){return a("span",[t._v(t._s(e.person))])})],2)]):a("span",[t._v("~")]),t._v(" "),a("span",[e.validation.validationadm_by?a("span",{staticClass:"cartouche green",attrs:{title:"Validation administrative"}},[a("i",{staticClass:"icon-book"}),t._v(t._s(e.validation.validationadm_by)+"\n                            ")]):a("span",{staticClass:"validators"},[a("i",{staticClass:"icon-book"}),t._v(" "),t._l(e.validateursAdm,function(e){return a("span",[t._v(t._s(e.person))])})],2)]),t._v(" "),a("em",[a("i",{class:"icon-"+e.status})])])})],2):t._e()])],1)})],2),t._v(" "),a("div",{staticClass:"declaration-details col-2"},[t.filterPerson?a("div",[a("h3",[a("i",{staticClass:"icon-cog"}),t._v(" "+t._s(t.filterPerson))]),t._v(" "),0==t.selectedPerson.referents.length?a("div",{staticClass:"alert alert-danger"},[t._v("\n                    Aucun référent pour "),a("strong",[t._v("valider les déclarations Hors-lot")])]):a("div",[a("h4",[t._v("Validateur :")]),t._v(" "),a("ul",t._l(t.selectedPerson.referents,function(e){return a("li",{staticClass:"cartouche cartouche-default"},[t._v(t._s(e.displayname))])}),0)]),t._v(" "),a("button",{staticClass:"btn-primary btn",on:{click:function(e){t.addvalidatorperson=!0}}},[t._v("\n                    Ajouter un validateur pour les créneaux "),a("strong",[t._v("Hors-Lot")])]),t._v(" "),a("a",{staticClass:"btn-primary btn",attrs:{href:"/person/show/"+t.selectedPerson.id}},[t._v("\n                    Voir la fiche de "),a("strong",[t._v(t._s(t.filterPerson))])])]):t._e(),t._v(" "),t._m(3),t._v(" "),t.selectedValidation?t._e():a("p",{staticClass:"alert alert-info"},[t._v("\n                Selectionnez une ligne d'une déclaration pour afficher les détails et "),a("strong",[t._v("gérer les validateurs")])]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.selectedValidation?a("div",{staticClass:"validation-details"},[a("h3",[a("small",[t._v("Validation pour les créneaux")]),a("br"),t._v(" "),"activity"==t.selectedValidation.object?a("strong",[a("i",{staticClass:"icon-cube"}),t._v(" "+t._s(t.selectedValidation.label)+"\n                        ")]):a("strong",[a("i",{class:"icon-"+t.selectedValidation.object}),t._v(" "+t._s(t.selectedValidation.label)+"\n                        ")]),a("br"),t._v(" "),a("small",[t._v("\n                            de "),a("strong",[t._v(t._s(t.selectedValidation.person))]),t._v("\n                            en "),a("strong",[t._v(t._s(t._f("period")(t.selectedValidation.period)))])])]),t._v(" "),"activity"==t.selectedValidation.object?a("div",[t.selectedValidation.validation.validationactivity_by?a("div",{staticClass:"card valid"},[a("i",{staticClass:"icon-ok-circled"}),t._v("\n                            Validation projet par "),a("strong",[a("i",{staticClass:"icon-user"}),t._v(t._s(t.selectedValidation.validation.validationactivity_by))]),t._v(" le\n                            "),a("time",[t._v(t._s(t._f("humandate")(t.selectedValidation.validation.validationactivity_at)))])]):t.selectedValidation.validation.rejectactivity_by?a("div",{staticClass:"card reject"},[a("i",{staticClass:"icon-attention-circled"}),t._v("\n                            Rejet des créneaux par "),a("strong",[a("i",{staticClass:"icon-user"}),t._v(t._s(t.selectedValidation.validation.rejectactivity_by))]),t._v(" le\n                            "),a("time",[t._v(t._s(t._f("humandate")(t.selectedValidation.validation.rejectactivity_at)))]),t._v(" :\n                            "),a("pre",[t._v(t._s(t.selectedValidation.validation.rejectactivity_message))])]):a("div",{staticClass:"card waiting"},[a("strong",[t._v("Validation projet en attente")]),t._v("\n                            par l'un des validateurs suivant :\n                            "),a("ul",t._l(t.selectedValidation.validateursPrj,function(e){return a("li",[a("i",{staticClass:"icon-user"}),t._v(t._s(e.person)+"\n                                    "),a("a",{staticClass:"link",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.handlerDelete("prj",e)}}},[a("i",{staticClass:"icon-trash"}),t._v(" Supprimer")])])}),0),t._v(" "),a("a",{staticClass:"btn btn-xs btn-primary",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handlerAdd("prj")}}},[t._v("Ajouter un validateur")])]),t._v(" "),t.selectedValidation.validation.validationsci_by?a("div",{staticClass:"card valid"},[t._v("\n                            Validation scientifique par "),a("strong",[a("i",{staticClass:"icon-user"}),t._v(t._s(t.selectedValidation.validation.validationsci_by))]),t._v(" le\n                            "),a("time",[t._v(t._s(t._f("humandate")(t.selectedValidation.validation.validationsci_at)))])]):t.selectedValidation.validation.rejectsci_by?a("div",{staticClass:"card reject"},[a("i",{staticClass:"icon-attention-circled"}),t._v("\n                            Rejet scientifique des créneaux par "),a("strong",[a("i",{staticClass:"icon-user"}),t._v(t._s(t.selectedValidation.validation.rejectsci_by))]),t._v(" le\n                            "),a("time",[t._v(t._s(t._f("humandate")(t.selectedValidation.validation.rejectsci_at)))]),t._v(" "),a("pre",[t._v(t._s(t.selectedValidation.validation.rejectsci_message))])]):a("div",{staticClass:"card waiting"},[a("strong",[t._v("Validation scientifique en attente")]),t._v("\n                            par l'un des validateurs suivant :\n                            "),a("ul",t._l(t.selectedValidation.validateursSci,function(e){return a("li",[a("i",{staticClass:"icon-user"}),t._v(t._s(e.person)+"\n                                    "),a("a",{staticClass:"link",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.handlerDelete("sci",e)}}},[a("i",{staticClass:"icon-trash"}),t._v(" Supprimer")])])}),0),t._v(" "),a("a",{staticClass:"btn btn-xs btn-primary",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handlerAdd("sci")}}},[t._v("Ajouter un validateur")])])]):t._e(),t._v(" "),t.selectedValidation.validation.validationadm_by?a("div",{staticClass:"card valid"},[t._v("\n                        Validation administrative par "),a("strong",[a("i",{staticClass:"icon-user"}),t._v(t._s(t.selectedValidation.validation.validationadm_by))]),t._v(" le\n                        "),a("time",[t._v(t._s(t._f("humandate")(t.selectedValidation.validation.validationadm_at)))])]):t.selectedValidation.validation.rejectadm_by?a("div",{staticClass:"card reject"},[a("i",{staticClass:"icon-attention-circled"}),t._v("\n                        Rejet administrative des créneaux par "),a("strong",[a("i",{staticClass:"icon-user"}),t._v(t._s(t.selectedValidation.validation.rejectadm_by))]),t._v(" le\n                        "),a("time",[t._v(t._s(t._f("humandate")(t.selectedValidation.validation.rejectadm_at)))]),t._v(" "),a("pre",[t._v(t._s(t.selectedValidation.validation.validationadm_message))])]):a("div",{staticClass:"card waiting"},[a("strong",[t._v("Validation administrative en attente")]),t._v("\n                        par l'un des validateurs suivant :\n                        "),a("ul",t._l(t.selectedValidation.validateursAdm,function(e){return a("li",[a("i",{staticClass:"icon-user"}),t._v(t._s(e.person)+"\n                                "),a("a",{staticClass:"link",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.handlerDelete("adm",e)}}},[a("i",{staticClass:"icon-trash"}),t._v(" Supprimer")])])}),0),t._v(" "),a("a",{staticClass:"btn btn-xs btn-primary",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handlerAdd("adm")}}},[t._v("Ajouter un validateur")])])]):t._e()])],1)])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",[a("i",{staticClass:"icon-sort"}),t._v(" Filtres")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav nav-tabs",attrs:{role:"tablist"}},[a("li",{staticClass:"active",attrs:{role:"presentation"}},[a("a",{attrs:{href:"#declarants","aria-controls":"home",role:"tab","data-toggle":"tab"}},[a("i",{staticClass:"icon-group"}),t._v(" Déclarants")])]),t._v(" "),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{href:"#activities","aria-controls":"profile",role:"tab","data-toggle":"tab"}},[a("i",{staticClass:"icon-cubes"}),t._v(" Activités")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",[a("i",{staticClass:"icon-calendar"}),t._v(" Déclaration")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",[a("i",{staticClass:"icon-zoom-in-outline"}),t._v("\n                Détails")])}],s={render:i,staticRenderFns:n};e.a=s}])});
//# sourceMappingURL=TimesheetDeclarationsList.js.map