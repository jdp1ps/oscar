(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TimesheetDeclarationsList=e():t.TimesheetDeclarationsList=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(4),i=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default={name:"TimesheetDeclarationsList",props:{moment:{required:!0},bootbox:{required:!0},urlapi:{default:null}},components:{},data:function(){return{loading:null,declarations:[],error:null}},filters:{},methods:{fetch:function(){var t=this;!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading="Chargement de la période",this.$http.get("").then(function(e){for(var n in e.body)e.body[n].open=!1;t.declarations=e.body},function(e){t.error=i.default.resolve("Impossible de charger les données",e)}).then(function(e){t.loading=!1})},handlerCancelDeclaration:function(t){var e=this;console.log(t),this.bootbox.confirm("Supprimer la déclaration (le déclarant devra réenvoyer la déclaration) ?",function(n){n&&(e.loading="Suppression de la déclaration",e.$http.delete("?person_id="+t.person_id+"&period="+t.period).then(function(t){e.fetch()},function(t){e.error=i.default.resolve("Impossible de charger les données",t)}).then(function(t){e.loading=!1}))})}},mounted:function(){this.fetch(!0)}}},function(t,e,n){t.exports=n(2)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);var o=n(5),r=n(3),c=r(i.a,o.a,!1,null,null,null);e.default=c.exports},function(t,e){t.exports=function(t,e,n,a,i,s){var o,r=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(o=t,r=t.default);var l="function"==typeof r?r.options:r;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId=i);var d;if(s?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=d):a&&(d=a),d){var u=l.functional,v=u?l.render:l.beforeCreate;u?(l._injectStyles=d,l.render=function(t,e){return d.call(e),v(t,e)}):l.beforeCreate=v?[].concat(v,d):[d]}return{esModule:o,exports:r,options:l}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resolve:function(t,e){var n="Erreur inconnue";return e&&(n=e.body,403==e.status&&(n="Vous avez été déconnectez de l'application")),t+" (Réponse : "+n+")"}}},function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"validations-admin"},[n("transition",{attrs:{name:"fade"}},[t.loading?n("div",{staticClass:"pending overlay"},[n("div",{staticClass:"overlay-content"},[n("i",{staticClass:"icon-spinner animate-spin"}),t._v("\n                "+t._s(t.loading)+"\n            ")])]):t._e()]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.error?n("div",{staticClass:"pending overlay"},[n("div",{staticClass:"overlay-content"},[n("i",{staticClass:"icon-attention-1"}),t._v("\n                "+t._s(t.error)+"\n            ")])]):t._e()]),t._v(" "),n("h1",[t._v("Liste des déclarations")]),t._v(" "),t._l(t.declarations,function(e,a){return n("section",{staticClass:"card declaration",on:{click:function(t){e.open=!e.open}}},[n("strong",[t._v(t._s(e.person))]),t._v(" "),n("time",[t._v(t._s(e.period))]),t._v(" "),n("span",{staticClass:"validations-icon"},t._l(e.declarations,function(t){return n("i",{staticClass:"icon",class:"icon-"+t.status,attrs:{title:t.label}})})),t._v(" "),n("nav",[n("a",{staticClass:"btn btn-danger btn-xs",attrs:{href:"#"},on:{click:function(n){t.handlerCancelDeclaration(e)}}},[n("i",{staticClass:"icon-trash"}),t._v("Annuler cette déclaration")])]),t._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"line.open"}],staticClass:"validations text-small"},t._l(e.declarations,function(e){return n("article",{staticClass:"validation"},[n("span",[n("i",{class:"activity"==e.object?"icon-cube":"icon-tag"}),t._v(" "),n("strong",[t._v(t._s(e.label))])]),t._v(" "),"activity"==e.object?n("span",[e.validation.validationactivity_by?n("span",{staticClass:"cartouche green",attrs:{title:"Validation projet"}},[n("i",{staticClass:"icon-cube"}),t._v(t._s(e.validation.validationactivity_by)+"\n                    ")]):n("span",{directives:[{name:"else",rawName:"v-else"}],staticClass:"validators"},[n("i",{staticClass:"icon-cube"}),t._v(" "),t._l(e.validateursPrj,function(e){return n("span",[t._v(t._s(e.person))])})],2)]):n("span",[t._v("~")]),t._v(" "),"activity"==e.object?n("span",[e.validation.validationsci_by?n("span",{staticClass:"cartouche green",attrs:{title:"Validation scientifique"}},[n("i",{staticClass:"icon-beaker"}),t._v(t._s(e.validation.validationsci_by)+"\n                    ")]):n("span",{staticClass:"validators"},[n("i",{staticClass:"icon-beaker"}),t._v(" "),t._l(e.validateursSci,function(e){return n("span",[t._v(t._s(e.person))])})],2)]):n("span",[t._v("~")]),t._v(" "),n("span",[e.validation.validationadm_by?n("span",{staticClass:"cartouche green",attrs:{title:"Validation administrative"}},[n("i",{staticClass:"icon-book"}),t._v(t._s(e.validation.validationadm_by)+"\n                    ")]):n("span",{staticClass:"validators"},[n("i",{staticClass:"icon-book"}),t._v(" "),t._l(e.validateursAdm,function(e){return n("span",[t._v(t._s(e.person))])})],2)]),t._v(" "),n("em",[t._v("\n                    État : "),n("i",{class:"icon-"+e.status})])])}))])}),t._v(" "),n("pre",[t._v("TOT :"+t._s(t.$data))])],2)},i=[],s={render:a,staticRenderFns:i};e.a=s}])});
//# sourceMappingURL=TimesheetDeclarationsList.js.map