(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Referent=t():e.Referent=t()})("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(s[n])return s[n].exports;var r=s[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var s={};return t.m=e,t.c=s,t.d=function(e,s,n){t.o(e,s)||Object.defineProperty(e,s,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,"a",s),s},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=3)}([function(e,t){e.exports=function(e,t,s,n,r,o){var a,i=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(a=e,i=e.default);var c="function"==typeof i?i.options:i;t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),s&&(c.functional=!0),r&&(c._scopeId=r);var d;if(o?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=d):n&&(d=n),d){var u=c.functional,p=u?c.render:c.beforeCreate;u?(c._injectStyles=d,c.render=function(e,t){return d.call(t),p(e,t)}):c.beforeCreate=p?[].concat(p,d):[d]}return{esModule:a,exports:i,options:c}}},function(e,t,s){"use strict";var n=s(5);t.a={components:{personselector:n.a},props:{displayName:{require:!0},referentId:{require:!0},declarationsToDo:[],declarationsFor:[]},data:function(){return{selectPerson:!1,personSelected:null,error:null}},methods:{handlerSelectPerson:function(e){console.log(arguments),this.personSelected=e},handlerSubmit:function(e){if(!this.personSelected)return e.stopPropagation(),e.preventDefault(),!1}}}},function(e,t,s){"use strict";t.a={data:function(){return{url:"/person?l=m&q=",persons:[],expression:"",loading:!1,selectedPerson:null,showSelector:!0,request:null}},watch:{expression:function(e,t){e.length>=2&&this.search()}},methods:{search:function(){var e=this;this.loading=!0,this.$http.get(this.url+this.expression,{before:function(e){this.request&&this.request.abort(),this.request=e}}).then(function(t){e.persons=t.body.datas,e.showSelector=!0},function(e){}).then(function(t){e.loading=!1,e.request=null})},handlerSelectPerson:function(e){this.selectedPerson=e,this.showSelector=!1,this.expression="",this.$emit("change",e)}}}},function(e,t,s){e.exports=s(4)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),r=s(7),o=s(0),a=o(n.a,r.a,!1,null,null,null);t.default=a.exports},function(e,t,s){"use strict";var n=s(2),r=s(6),o=s(0),a=o(n.a,r.a,!1,null,null,null);t.a=a.exports},function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.expression,expression:"expression"}],attrs:{type:"text"},domProps:{value:e.expression},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.search(t))},input:function(t){t.target.composing||(e.expression=t.target.value)}}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]},[s("i",{staticClass:"icon-spinner animate-spin"})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.persons.length>0&&e.showSelector,expression:"persons.length > 0 && showSelector"}],staticClass:"choose",staticStyle:{position:"absolute","z-index":"3000","max-height":"400px",overflow:"hidden","overflow-y":"scroll"}},e._l(e.persons,function(t){return s("div",{key:t.id,staticClass:"choice",on:{click:function(s){return s.preventDefault(),s.stopPropagation(),e.handlerSelectPerson(t)}}},[s("div",{staticStyle:{display:"block",width:"50px",height:"50px"}},[s("img",{staticStyle:{width:"100%"},attrs:{src:"https://www.gravatar.com/avatar/"+t.mailMd5+"?s=50",alt:t.displayname}})]),e._v(" "),s("div",{staticClass:"infos"},[s("strong",{staticStyle:{"font-weight":"700","font-size":"1.1em","padding-left":"0"}},[e._v(e._s(t.displayname))]),s("br"),e._v(" "),s("span",{staticStyle:{"font-weight":"100","font-size":".8em","padding-left":"0"}},[s("i",{staticClass:"icon-location"}),e._v("\n                    "+e._s(t.affectation)+"\n                    "),t.ucbnSiteLocalisation?s("span",[e._v(" ~ "+e._s(t.ucbnSiteLocalisation))]):e._e()]),s("br"),e._v(" "),s("em",{staticStyle:{"font-weight":"100","font-size":".8em"}},[s("i",{staticClass:"icon-mail"}),e._v(e._s(t.email))])])])}),0)])},r=[],o={render:n,staticRenderFns:r};t.a=o},function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[s("transition",{attrs:{name:"fade"}},[e.selectPerson?s("div",{staticClass:"overlay"},[s("div",{staticClass:"overlay-content",staticStyle:{overflow:"visible"}},[s("a",{staticClass:"overlay-closer",attrs:{href:"#"},on:{click:function(t){e.selectPerson=!1}}},[e._v("X")]),e._v(" "),s("div",[s("form",{attrs:{action:"",method:"post"},on:{submit:e.handlerSubmit}},[s("h1",["add"==e.selectPerson?s("span",[e._v("AJOUTER")]):"replace"==e.selectPerson?s("span",[e._v("REMPLACER")]):e._e()]),e._v(" "),s("input",{attrs:{type:"hidden",name:"action",value:"flipreferent"}}),e._v(" "),s("input",{attrs:{type:"hidden",name:"referent_id"},domProps:{value:e.referentId}}),e._v(" "),s("input",{attrs:{type:"hidden",name:"mode"},domProps:{value:e.selectPerson}}),e._v(" "),s("input",{attrs:{type:"hidden",name:"person_id"},domProps:{value:e.personSelected?e.personSelected.id:""}}),e._v(" "),s("h2",{staticClass:"h3"},[e._v("Choississez le "),"add"==e.selectPerson?s("span",[e._v("suppléant")]):s("span",[e._v("remplaçant")])]),e._v(" "),s("personselector",{on:{change:e.handlerSelectPerson}}),e._v(" "),s("hr"),e._v(" "),s("h2",{staticClass:"h3"},[e._v("Récapitulatif"),e.personSelected?e._e():s("span",[e._v("…")])]),e._v(" "),s("transition",{attrs:{name:"fade"}},[e.personSelected?s("div",["add"==e.selectPerson?s("p",[e._v("Ajouter "),s("strong",[e._v(e._s(e.personSelected.displayname))]),e._v(" comme "),s("strong",[e._v("suppléant")]),e._v(" de "),s("strong",[e._v(e._s(e.displayName))])]):"replace"==e.selectPerson?s("div",[s("p",[e._v("Remplacer "),s("strong",[e._v(e._s(e.displayName))]),e._v(" par "),s("strong",[e._v(e._s(e.personSelected.displayname))])]),e._v(" "),s("div",{staticClass:"alert alert-danger"},[s("i",{staticClass:"icon-attention-1"}),e._v(" "),s("strong",[e._v(e._s(e.displayName))]),e._v(" ne pourra plus valider les prochaines déclarations Hors-Lot et de celle en attente de validation.\n                                ")])]):e._e(),e._v(" "),s("hr"),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("h3",[s("i",{staticClass:"icon-group"}),e._v("Personnes à valider")]),e._v(" "),s("p",{staticClass:"alert alert-info"},[s("i",{staticClass:"icon-info-circled"}),e._v(" "),s("strong",[e._v(e._s(e.personSelected.displayname))]),e._v(" aura en charge de valider les "),s("strong",[e._v("déclarations Hors-Lot")]),e._v(" des personnes suivantes :\n                                    ")]),e._v(" "),s("ul",e._l(e.declarationsFor,function(t){return s("li",[s("i",{staticClass:"icon-Person"}),e._v(" "+e._s(t))])}),0)]),e._v(" "),s("div",{staticClass:"col-md-6"},[s("h3",[s("i",{staticClass:"icon-calendar"}),e._v("Validations en cours")]),e._v(" "),s("p",{staticClass:"alert alert-info"},[s("i",{staticClass:"icon-info-circled"}),e._v(" "),s("strong",[e._v(e._s(e.personSelected.displayname))]),e._v(" sera autorisé à valider les déclarations "),s("strong",[e._v("Hors-lot")]),e._v(" en cours pour les déclarants : ")]),e._v(" "),s("ul",e._l(e.declarationsToDo,function(t){return s("li",[s("i",{staticClass:"icon-Person"}),e._v(" "+e._s(t))])}),0)])])]):e._e()]),e._v(" "),s("hr"),e._v(" "),s("div",{staticClass:"btn-group-sm btn-group text-center"},[s("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"cancel"},on:{click:function(t){e.personSelected=null,e.selectPerson=null}}},[s("i",{staticClass:"icon-block-outline"}),e._v("\n                            Annuler")]),e._v(" "),s("button",{staticClass:"btn btn-sm btn-success",class:e.personSelected?"":"disabled",attrs:{type:"submit"}},[s("i",{staticClass:"icon-valid"}),e._v("\n                            Appliquer")])])],1)])])]):e._e()]),e._v("\n    Vous pouvez :\n    "),s("div",{staticClass:"btn-group-sm btn-group"},[s("a",{staticClass:"btn btn-sm btn-danger",attrs:{href:"#"},on:{click:function(t){e.selectPerson="replace"}}},[s("i",{staticClass:"icon-cw-outline"}),e._v("Remplacer")]),e._v(" "),s("a",{staticClass:"btn btn-sm btn-primary",attrs:{href:"#"},on:{click:function(t){e.selectPerson="add"}}},[s("i",{staticClass:"icon-plus-circled"}),e._v("Renforcer")])])],1)},r=[],o={render:n,staticRenderFns:r};t.a=o}])});
//# sourceMappingURL=Referent.js.map