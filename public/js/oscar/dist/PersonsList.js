(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PersonsList=e():t.PersonsList=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,s){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{result:{default:null},urlapi:{default:""}},data:function(){return{search:"",loading:!1,extended:!1,total:0,page:0,error:"",persons:[]}},computed:{totalPage:function(){return Math.ceil(this.total/50)}},mounted:function(){this.result&&this.displayResult(this.result)},methods:{displayResult:function(t){this.persons=t.persons,this.page=t.page,this.total=t.total,this.search=t.search,this.extended=1==t.extended},handlerPrevious:function(){this.page>1&&(this.page--,this.handlerSearch(!1))},handlerNext:function(){this.page<this.totalPage&&(this.page++,this.handlerSearch(!1))},handlerSearch:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=!0;var n=this.page>0?this.page:1;e&&(n=1);var s="?p="+n+"&q="+this.search+"&extended="+(this.extended?1:0);window.history.pushState({},"",s),this.$http.get(s).then(function(e){t.displayResult(e.body)},function(e){t.error=e.body}).then(function(e){t.loading=!1})}}}},function(t,e,n){t.exports=n(2)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,function(){return s[t]})}(i);var r=n(4),o=n(3),l=o(a.a,r.a,!1,null,null,null);e.default=l.exports},function(t,e){t.exports=function(t,e,n,s,a,i){var r,o=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(r=t,o=t.default);var c="function"==typeof o?o.options:o;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),a&&(c._scopeId=a);var d;if(i?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=d):s&&(d=s),d){var u=c.functional,p=u?c.render:c.beforeCreate;u?(c._injectStyles=d,c.render=function(t,e){return d.call(e),p(t,e)}):c.beforeCreate=p?[].concat(p,d):[d]}return{esModule:r,exports:o,options:c}}},function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[t._m(0),t._v(" "),n("div",{staticClass:"input-group input-group-lg"},[t._m(1),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Rechercher"},domProps:{value:t.search},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handlerSearch(e):null},input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),n("span",{staticClass:"input-group-addon"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.extended,expression:"extended"}],attrs:{type:"checkbox","aria-label":"",title:"Étendre la recherche"},domProps:{checked:Array.isArray(t.extended)?t._i(t.extended,null)>-1:t.extended},on:{change:function(e){var n=t.extended,s=e.target,a=!!s.checked;if(Array.isArray(n)){var i=t._i(n,null);s.checked?i<0&&(t.extended=n.concat([null])):i>-1&&(t.extended=n.slice(0,i).concat(n.slice(i+1)))}else t.extended=a}}})]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"input-group-addon"},[t._m(2)]),t._v(" "),t.page>0?n("span",{staticClass:"input-group-btn"},[n("span",{staticClass:"btn btn-default",class:1==t.page?"disabled":"",on:{click:t.handlerPrevious}},[n("i",{staticClass:"icon-left-open-outline"})]),t._v(" "),n("span",{staticClass:"btn btn-default disabled"},[n("i",{staticClass:"icon-docs"}),t._v(" "),n("strong",[t._v(t._s(t.page))]),t._v(" / "),n("em",[t._v(t._s(t.totalPage))])]),t._v(" "),n("span",{staticClass:"btn btn-default disabled"},[n("i",{staticClass:"icon-group"}),t._v(" "),n("strong",[t._v(t._s(t.total))]),t._v(" personne(s)\n            ")]),t._v(" "),n("span",{staticClass:"btn btn-default",class:t.page<t.totalPage?"":"disabled",on:{click:t.handlerNext}},[n("i",{staticClass:"icon-right-open-outline"})])]):t._e(),t._v(" "),n("span",{staticClass:"input-group-btn"},[n("button",{staticClass:"btn btn-primary",on:{click:t.handlerSearch}},[t._v("Rechercher")])])]),t._v(" "),t.error?n("div",{staticClass:"alert alert-danger"},[n("div",{staticClass:"close",on:{click:function(e){t.error=null}}},[t._v("X")]),t._v("\n        "+t._s(t.error)+"\n    ")]):t._e(),t._v(" "),n("hr"),t._v(" "),t._l(t.persons,function(e){return n("article",{staticClass:"card xs"},[n("h2",{staticClass:"card-title",staticStyle:{display:"flex"}},[n("img",{staticClass:"thumb32",attrs:{src:"//www.gravatar.com/avatar/"+e.mailMd5+"?s=30",alt:""}}),t._v(" "),n("span",{staticClass:"fn"},[n("span",{staticClass:"family-name"},[t._v(t._s(e.lastName))]),t._v(" "),n("span",{staticClass:"given-name"},[t._v(t._s(e.firstName))]),t._v(" "),n("span",{staticClass:"label label-primary"},[t._v(t._s(e.activities))]),t._v(" "),n("a",{staticClass:"more",attrs:{href:"/person/show/"+e.id}},[t._v("Fiche")])]),t._v(" "),n("span",{staticClass:"right"},[e.coworker?n("small",[n("i",{staticClass:"icon-building-filled"}),t._v(" collègue\n                ")]):t._e(),t._v(" "),e.sub?n("small",[n("i",{staticClass:"icon-user-md"}),t._v(" Subordonné\n                ")]):t._e()])]),t._v(" "),e.organisations?n("section",t._l(e.organisations,function(e){return n("span",{staticClass:"cartouche"},[t._v("\n                "+t._s(e.organisation)+"\n                "),n("span",{staticClass:"addon"},[t._v("\n                    "+t._s(e.roles.join(", "))+"\n                ")])])})):t._e(),t._v(" "),n("div",{staticClass:"card-content text-highlight"},[n("i",{staticClass:"icon-phone-outline"}),n("strong",{staticClass:"addon"},[t._v(t._s(e.phone))]),t._v(" |\n            Affectation LDAP : "),n("strong",{staticClass:"addon"},[t._v(t._s(e.affectation))]),t._v(" |\n            Localisation LDAP : "),n("strong",{staticClass:"addon"},[t._v(t._s(e.ucbnSiteLocalisation))]),t._v(" |\n            "),n("i",{staticClass:"icon-mail"}),n("strong",{staticClass:"addon"},[t._v(t._s(e.mail))])])])})],2)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[n("i",{staticClass:"icon-group"}),t._v("\n        Liste du personnel")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"input-group-addon"},[n("i",{staticClass:"icon-zoom-in-outline"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"oscar-text-loading"},[n("i",{staticClass:"icon-spinner animate-spin"}),t._v("\n                Chargement des données\n            ")])}],i={render:s,staticRenderFns:a};e.a=i}])});
//# sourceMappingURL=PersonsList.js.map