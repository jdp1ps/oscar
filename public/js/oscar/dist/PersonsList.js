(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PersonsList=e():t.PersonsList=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(s[n])return s[n].exports;var a=s[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var s={};return e.m=t,e.c=s,e.d=function(t,s,n){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{urlapi:{default:""}},data:function(){return{search:"",loading:!1,total:0,page:0,error:"",persons:[]}},computed:{totalPage:function(){return Math.ceil(this.total/50)}},methods:{handlerPrevious:function(){this.page>1&&(this.page--,this.handlerSearch(!1))},handlerNext:function(){this.page<this.totalPage&&(this.page++,this.handlerSearch(!1))},handlerSearch:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=!0;var s=this.page>0?this.page:1;e&&(s=1),this.$http.get(this.urlapi+"?p="+s+"&q="+this.search).then(function(e){t.persons=e.body.persons,t.page=e.body.page,t.total=e.body.total},function(e){t.error=e.body}).then(function(e){t.loading=!1})}}}},function(t,e,s){t.exports=s(2)},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(0),a=s.n(n);for(var i in n)"default"!==i&&function(t){s.d(e,t,function(){return n[t]})}(i);var o=s(4),r=s(3),l=r(a.a,o.a,!1,null,null,null);e.default=l.exports},function(t,e){t.exports=function(t,e,s,n,a,i){var o,r=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(o=t,r=t.default);var c="function"==typeof r?r.options:r;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),s&&(c.functional=!0),a&&(c._scopeId=a);var u;if(i?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=u):n&&(u=n),u){var d=c.functional,p=d?c.render:c.beforeCreate;d?(c._injectStyles=u,c.render=function(t,e){return u.call(e),p(t,e)}):c.beforeCreate=p?[].concat(p,u):[u]}return{esModule:o,exports:r,options:c}}},function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h1",[t._v("Liste du personnel")]),t._v(" "),s("div",{staticClass:"input-group input-group-lg"},[t._m(0),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Rechercher"},domProps:{value:t.search},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handlerSearch(e):null},input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"input-group-addon"},[t._m(1)]),t._v(" "),t.page>0?s("span",{staticClass:"input-group-btn"},[s("span",{staticClass:"btn btn-default",class:1==t.page?"disabled":"",on:{click:t.handlerPrevious}},[s("i",{staticClass:"icon-left-open-outline"})]),t._v(" "),s("span",{staticClass:"btn btn-default disabled"},[s("i",{staticClass:"icon-docs"}),t._v(" "),s("strong",[t._v(t._s(t.page))]),t._v(" / "),s("em",[t._v(t._s(t.totalPage))])]),t._v(" "),s("span",{staticClass:"btn btn-default disabled"},[s("i",{staticClass:"icon-group"}),t._v(" "),s("strong",[t._v(t._s(t.total))]),t._v(" personne(s)\n            ")]),t._v(" "),s("span",{staticClass:"btn btn-default",class:t.page<t.totalPage?"":"disabled",on:{click:t.handlerNext}},[s("i",{staticClass:"icon-right-open-outline"})])]):t._e()]),t._v(" "),t.error?s("div",{staticClass:"alert alert-danger"},[s("div",{staticClass:"close",on:{click:function(e){t.error=null}}},[t._v("X")]),t._v("\n        "+t._s(t.error)+"\n    ")]):t._e(),t._v(" "),s("hr"),t._v(" "),t._l(t.persons,function(e){return s("article",{staticClass:"card xs"},[s("h2",{staticClass:"card-title",staticStyle:{display:"flex"}},[s("img",{staticClass:"thumb32",attrs:{src:"//www.gravatar.com/avatar/"+e.mailMd5+"?s=30",alt:""}}),t._v(" "),s("span",{staticClass:"fn"},[s("span",{staticClass:"family-name"},[t._v(t._s(e.lastName))]),t._v(" "),s("span",{staticClass:"given-name"},[t._v(t._s(e.firstName))]),t._v(" "),s("span",{staticClass:"label label-primary"},[t._v(t._s(e.activities))]),t._v(" "),s("a",{staticClass:"more",attrs:{href:"/person/show/"+e.id}},[t._v("Fiche")])]),t._v(" "),s("span",{staticClass:"right"},[e.coworker?s("small",[s("i",{staticClass:"icon-building-filled"}),t._v(" collègue\n                ")]):t._e(),t._v(" "),e.sub?s("small",[s("i",{staticClass:"icon-user-md"}),t._v(" Subordonné\n                ")]):t._e()])]),t._v(" "),e.organisations?s("section",t._l(e.organisations,function(e){return s("span",{staticClass:"cartouche"},[t._v("\n                "+t._s(e.organisation)+"\n                "),s("span",{staticClass:"addon"},[t._v("\n                    "+t._s(e.roles.join(", "))+"\n                ")])])})):t._e(),t._v(" "),s("div",{staticClass:"card-content text-highlight"},[s("i",{staticClass:"icon-phone-outline"}),s("strong",{staticClass:"addon"},[t._v(t._s(e.phone))]),t._v(" |\n            Affectation LDAP : "),s("strong",{staticClass:"addon"},[t._v(t._s(e.affectation))]),t._v(" |\n            Localisation LDAP : "),s("strong",{staticClass:"addon"},[t._v(t._s(e.ucbnSiteLocalisation))]),t._v(" |\n            "),s("i",{staticClass:"icon-mail"}),s("strong",{staticClass:"addon"},[t._v(t._s(e.mail))])])])})],2)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"input-group-addon"},[s("i",{staticClass:"icon-zoom-in-outline"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"oscar-text-loading"},[s("i",{staticClass:"icon-spinner animate-spin"}),t._v("\n                Chargement des données\n            ")])}],i={render:n,staticRenderFns:a};e.a=i}])});
//# sourceMappingURL=PersonsList.js.map