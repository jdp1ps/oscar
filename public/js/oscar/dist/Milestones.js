(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Milestones=t():e.Milestones=t()})("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=4)}([function(e,t){e.exports=function(e,t,n,i,a,s){var r,o=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(r=e,o=e.default);var c="function"==typeof o?o.options:o;t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),a&&(c._scopeId=a);var u;if(s?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=u):i&&(u=i),u){var d=c.functional,f=d?c.render:c.beforeCreate;d?(c._injectStyles=u,c.render=function(e,t){return u.call(t),f(e,t)}):c.beforeCreate=f?[].concat(f,u):[u]}return{esModule:r,exports:o,options:c}}},function(e,t,n){"use strict";var i=n(6),a=n(8);t.a={props:["moment","url","model"],components:{milestone:i.a,datepicker:a.a},data:function(){return{error:null,formData:null,pendingMsg:"",creatable:!1,deleteMilestone:null,editMilestone:null,validMilestone:null,cancelMilestone:null,refusedMilestone:null,unvalidMilestone:null,inProgressMilestone:null,action:null,actionMessage:"",actionMilestone:null}},computed:{types:function(){return this.model.types},milestones:function(){var e=this,t=[];return this.model.payments.forEach(function(n){var i=new Date,a=!1,s=!1,r=void 0;switch(n.status){case 1:i=n.datePredicted,i?(r="PRÉVU",(a=e.moment(n.datePredicted.date).unix()<e.moment().unix())&&(r+=" EN RETARD")):r="ERREUR DE DATE";break;case 2:i=n.datePayment,r="RÉALISÉ",s=!0;break;default:return}i||(i=new Date),t.push({dateStart:i,comment:"VERSEMENT "+r,deletable:!1,late:a,done:s,editable:!1,validable:!1,isPayment:!0,type:{label:"Versement de "+n.amount+n.currency.symbol,facet:"payment"}})}),this.model.milestones.forEach(function(e){t.push(e)}),t.sort(function(t,n){return e.moment(t.dateStart.date).unix()-e.moment(n.dateStart.date).unix()}),t},payments:function(){return this.model.payments},formTypeFinishable:function(){var e=this;return!!this.formData&&this.types.find(function(t){return t.id==e.formData.type.id&&t.finishable})},groupedTypes:function(){var e={};return this.model.types.forEach(function(t){var n=t.facet;e.hasOwnProperty(n)||(e[n]={label:n,types:[]}),e[t.facet].types.push(t)}),e}},methods:{handlerValid:function(e){this.validMilestone=e},handlerInProgress:function(e){this.inProgressMilestone=e},handlerUnvalid:function(e){this.unvalidMilestone=e},handlerActionConfirm:function(e,t,n){this.actionMilestone=e,this.action=t,this.actionMessage=n},handlerActionCancel:function(){this.actionMilestone=null,this.action=null,this.actionMessage=""},handlerCancel:function(e){this.unvalidMilestone=e},handlerRemove:function(e){this.deleteMilestone=e},handlerEdit:function(e){this.editMilestone=e,this.formData={type:e.type,id:e.id,comment:e.comment,dateStart:this.getMoment()(e.dateStart.date).format("YYYY-MM-DD")}},handlerNew:function(){this.formData={id:0,type:JSON.parse(JSON.stringify(this.types[0])),dateStart:this.getMoment()().format("YYYY-MM-DD"),comment:""}},preformDelete:function(){var e=this;this.pendingMsg="Suppression du jalon",this.$http.delete(this.url+"?id="+this.deleteMilestone.id).then(function(t){e.getMilestones()},function(t){e.error="Impossible de supprimer le jalon "+t.body}).then(function(t){e.pendingMsg=null,e.deleteMilestone=null})},performValid:function(e){var t=this;console.log(e);var n,i=new FormData;switch(e){case"valid":this.pendingMsg="Validation du jalon",n=this.validMilestone;break;case"unvalid":this.pendingMsg="Réinitialisation du jalon",n=this.unvalidMilestone;break;case"inprogress":this.pendingMsg="Marquage du jalon comme en cours",n=this.inProgressMilestone;break;case"cancel":case"refused":n=this.actionMilestone;break;default:return void(this.error="Action incorrecte")}i.append("id",n.id),i.append("action",e),this.action=null,this.actionMessage="",this.actionMilestone=null,this.$http.post(this.url,i).then(function(e){t.getMilestones()},function(e){t.error="Impossible de modifier l'état du jalon : "+e.body}).then(function(e){t.pendingMsg=null,t.validMilestone=null,t.unvalidMilestone=null,t.inProgressMilestone=null})},performSave:function(){var e=this,t=new FormData;t.append("id",this.formData.id),t.append("type",this.formData.type.id),t.append("comment",this.formData.comment),t.append("dateStart",this.formData.dateStart),t.append("action",this.formData.id?"update":"create"),this.pendingMsg=this.formData.id?"Enregistrement des modifications":"Création du nouveau jalon",this.$http.post(this.url,t).then(function(t){e.getMilestones()},function(t){e.error="Impossible d'enregistrer le jalon "+t}).then(function(t){e.pendingMsg=null,e.formData=null})},getMilestones:function(){var e=this;this.pendingMsg="Chargement des jalons : "+this.url,this.$http.get(this.url).then(function(t){e.model.milestones=t.data.milestones,e.model.types=t.data.types,e.creatable=t.data.creatable},function(t){e.error="Impossible de charger les jalons de cette activités : "+t}).then(function(t){e.pendingMsg=""})},getMoment:function(){return this.moment}},mounted:function(){this.getMilestones()}}},function(e,t,n){"use strict";t.a={props:{milestone:{required:!0}},computed:{finishedPerson:function(){var e=/\[Person:([0-9]*):(.*)\]/gm,t=e.exec(this.milestone.finishedBy);return null!==t?t[2]:""},statutText:function(){if(!this.milestone.type.finishable)return"";switch(this.milestone.finished){case 0:case null:return this.milestone.past?"EN RETARD":"A FAIRE";case 50:return"EN COURS";case 100:return"Validé";case 200:return"Sans suite";case 400:return"Refusé";default:return""}},owner:function(){return this.finishedPerson?finishedPerson[2]:"Unreadable data"},ownerId:function(){return this.finishedPerson?finishedPerson[1]:"Unreadble data"},finishable:function(){return this.milestone.validable&&1==this.milestone.type.finishable&&this.milestone.finished<100},cancelFinish:function(){return this.milestone.validable&&1==this.milestone.type.finishable&&this.milestone.finished>0},progressable:function(){return this.milestone.validable&&1==this.milestone.type.finishable&&(null==this.milestone.finished||0==this.milestone.finished||100==this.milestone.finished)},inProgress:function(){return this.milestone.validable&&1==this.milestone.type.finishable&&this.milestone.finished>0&&this.milestone.finished<100},finished:function(){return 1==this.milestone.type.finishable&&this.milestone.finished>=100},late:function(){return 1==this.finishable&&this.milestone.past&&!this.finished},past:function(){return this.milestone.past},cssClass:function(){var e={finishable:this.finishable,finished:this.finished||this.milestone.done,late:this.late||this.milestone.late,inprogress:this.inProgress,canceled:200==this.milestone.finished,refused:400==this.milestone.finished,valided:100==this.milestone.finished,past:this.past};return e[this.milestone.type.facet]=!0,e}}}},function(e,t,n){"use strict";t.a={model:{prop:"value",event:"input"},props:{moment:{required:!0},value:{default:null},i18n:{default:"fr"},limitFrom:{default:null},daysShort:{default:function(){return["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"]}},months:{default:function(){return["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","Décembre"]}},valueFormat:{default:"YYYY-MM-DD"},displayFormat:{default:"D MMMM YYYY"},format:{default:"dddd D MMMM YYYY"}},data:function(){return{picker:!1,pickerMode:"day",pickerDayRef:this.moment().format(),pickerYearRef:this.moment().format("YYYY"),pickerMonthRef:this.moment().month(),realValue:this.value,manualChange:""}},computed:{years:function(){for(var e=this.pickerYearRef-11,t=this.pickerYearRef+11,n=[],i=e;i<t;i++)n.push(i);return n},mmValue:function(){return this.realValue?this.moment(this.realValue):this.moment()},pickerData:function(){this.moment.locale(this.i18n);for(var e=this.daysShort,t=this.moment(this.realValue).format(this.valueFormat),n=this.moment(this.pickerDayRef).startOf("month").startOf("isoWeek"),i=this.moment(this.pickerDayRef).endOf("month").startOf("isoWeek"),a=[];n.unix()<=i.unix();){for(var s={num:n.week(),days:[]},r=1;r<=7;r++){var o=!this.limitFrom||this.limitFrom&&this.limitFrom<n.format();s.days.push({enabled:o,date:n.format(),active:n.format(this.valueFormat)==t,day:n.format("D")}),n.add(1,"day")}a.push(s)}return{dayslabels:e,weeks:a}},currentMonth:function(){return this.moment(this.pickerDayRef).format("MMMM")},currentYear:function(){return this.moment(this.pickerDayRef).format("YYYY")},renderDate:function(){return null==this.realValue?"":this.moment(this.realValue).format(this.format)},renderValue:{get:function(){return this.realValue?this.mmValue.format(this.displayFormat):""},set:function(e){console.log("convert ",e);try{var t=this.moment(e,this.displayFormat);t.isValid()&&this.changeDate(t.format(this.valueFormat))}catch(e){return}}}},methods:{handlerClear:function(){console.log(this.realValue),this.changeDate(null)},handlerInputChange:function(e){try{var t=this.moment(e.target.value);this.changeDate(t.format(this.valueFormat))}catch(e){console.error("WTF DATE",e)}},handlerSelectMonth:function(e){var t=this.months.indexOf(e);this.pickerDayRef=this.moment(this.pickerDayRef).month(t).format(),this.pickerMode="day"},handlerSelectYear:function(e){this.pickerDayRef=this.moment(this.pickerDayRef).year(e).format(),this.pickerMode="day"},changeDate:function(e){console.log("Modification de la date",e),this.picker=!1,this.realValue=e,this.$emit("input",this.realValue),this.$emit("change",this.realValue),this.handlerHide()},pickerNextMonth:function(){this.pickerDayRef=this.moment(this.pickerDayRef).add(1,"month").format()},pickerPrevMonth:function(){this.pickerDayRef=this.moment(this.pickerDayRef).subtract(1,"month").format()},handlerPickerMonth:function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),this.pickerMode="month"},handlerPickerYear:function(){this.pickerMode="year"},handlerShow:function(){this.initPickerVar(),this.picker=!0,this.watchOut()},watchOut:function(){},handlerHide:function(e){this.picker=!1},initPickerVar:function(){var e=this.moment(this.pickerDayRef?this.pickerDayRef:moment());this.pickerYearRef=e.year(),this.pickerMonthRef=e.format("MMMM")}},created:function(){this.moment.locale(this.i18n),this.pickerDayRef=this.value?this.value:this.moment().format(),this.initPickerVar()}}},function(e,t,n){e.exports=n(5)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(11),s=n(0),r=s(i.a,a.a,!1,null,null,null);t.default=r.exports},function(e,t,n){"use strict";var i=n(2),a=n(7),s=n(0),r=s(i.a,a.a,!1,null,null,null);t.a=r.exports},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"card xs jalon",class:e.cssClass},[n("strong",[e._v(" "+e._s(e.statutText))]),e._v(" "),n("time",{attrs:{datetime:e.milestone.dateStart}},[e._v("\n        "+e._s(e._f("moment")(e.milestone.dateStart))+"\n    ")]),e._v(" "),n("strong",{staticClass:"card-title"},[e._v("\n        "+e._s(e.milestone.type.label)+"\n        "),e.inProgress?n("small",[e._v(" (En cours par "),n("strong",[e._v(e._s(e.finishedPerson))]),e._v(")")]):e._e()]),e._v(" "),e.finished?n("p",[n("strong",[e._v(e._s(e.finishedPerson))]),e._v(" a complété ce jalon")]):e._e(),e._v(" "),e.milestone.comment?n("p",{staticClass:"details"},[e._v(e._s(e.milestone.comment))]):e._e(),e._v(" "),n("nav",[e.cancelFinish?n("a",{attrs:{href:"#",title:"Réinitialiser la progression"},on:{click:function(t){return t.preventDefault(),e.$emit("unvalid",e.milestone)}}},[n("i",{staticClass:"icon-rewind-outline"})]):e._e(),e._v(" "),e.progressable?n("a",{attrs:{href:"#",title:"Marquer comme en cours"},on:{click:function(t){return t.preventDefault(),e.$emit("inprogress",e.milestone)}}},[n("i",{staticClass:"icon-cw-outline"})]):e._e(),e._v(" "),e.finishable?n("a",{attrs:{href:"#",title:"Marquer comme terminé"},on:{click:function(t){return t.preventDefault(),e.$emit("valid",e.milestone)}}},[n("i",{staticClass:"icon-ok-circled"})]):e._e(),e._v(" "),e.finishable?n("a",{attrs:{href:"#",title:"Marquer comme sans suite"},on:{click:function(t){return t.preventDefault(),e.$emit("cancel",e.milestone)}}},[n("i",{staticClass:"icon-archive"})]):e._e(),e._v(" "),e.finishable?n("a",{attrs:{href:"#",title:"Marquer comme refusé"},on:{click:function(t){return t.preventDefault(),e.$emit("refused",e.milestone)}}},[n("i",{staticClass:"icon-block"})]):e._e(),e._v(" "),e.milestone.deletable?n("a",{attrs:{href:"#",title:"Supprimer ce jalon"},on:{click:function(t){return t.preventDefault(),e.$emit("remove",e.milestone)}}},[n("i",{staticClass:"icon-trash"})]):e._e(),e._v(" "),e.milestone.editable?n("a",{attrs:{href:"#",title:"Modifier ce jalon"},on:{click:function(t){return t.preventDefault(),e.$emit("edit",e.milestone)}}},[n("i",{staticClass:"icon-edit"})]):e._e()])])},a=[],s={render:i,staticRenderFns:a};t.a=s},function(e,t,n){"use strict";function i(e){n(9)}var a=n(3),s=n(10),r=n(0),o=i,l=r(a.a,s.a,!1,o,"data-v-5bc1d1c4",null);t.a=l.exports},function(e,t){},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{mouseenter:e.handlerShow,mouseleave:e.handlerHide}},[n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.renderValue,expression:"renderValue"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.renderValue},on:{input:function(t){t.target.composing||(e.renderValue=t.target.value)}}}),e._v(" "),e._m(0)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.picker,expression:"picker"}],staticClass:"datepicker-selector",on:{mouseleave:e.handlerHide}},[n("div",{staticClass:"datepicker-wrapper"},[n("header",[n("nav",[n("span",{attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.pickerPrevMonth(t)}}},[n("i",{staticClass:"icon-angle-left"})]),e._v(" "),n("strong",{staticClass:"heading"},[n("span",{staticClass:"currentMonth",on:{click:function(t){return t.stopPropagation(),e.handlerPickerMonth(t)}}},[e._v(e._s(e.currentMonth))]),e._v(" "),n("span",{staticClass:"currentYear",on:{click:function(t){return t.stopPropagation(),e.handlerPickerYear(t)}}},[e._v(e._s(e.currentYear))])]),e._v(" "),n("span",{attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),e.pickerNextMonth(t)}}},[n("i",{staticClass:"icon-angle-right"})])]),e._v(" "),"day"==e.pickerMode?n("div",{staticClass:"day-labels week"},[n("span",{staticClass:"week-label"},[e._v(" ")]),e._v(" "),e._l(e.pickerData.dayslabels,function(t){return n("span",{staticClass:"day-label"},[e._v(e._s(t))])})],2):e._e()]),e._v(" "),"day"==e.pickerMode?n("section",e._l(e.pickerData.weeks,function(t){return n("div",{staticClass:"weeks"},[n("span",{staticClass:"week"},[n("span",{staticClass:"week-label"},[e._v(e._s(t.num))]),e._v(" "),e._l(t.days,function(t){return n("span",{staticClass:"week-day",class:{active:t.active,disabled:!t.enabled},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),e.changeDate(t.date)}}},[e._v("\n                              "+e._s(t.day)+"\n                            ")])})],2)])}),0):e._e(),e._v(" "),"month"==e.pickerMode?n("section",{staticClass:"months"},e._l(e.months,function(t){return n("span",{staticClass:"month",class:{active:e.pickerMonthRef==t},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),e.handlerSelectMonth(t)}}},[e._v("\n                      "+e._s(t)+"\n                    ")])}),0):e._e(),e._v(" "),"year"==e.pickerMode?n("section",{staticClass:"years"},[n("span",{staticClass:"year",on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.pickerYearRef-=22}}},[e._v("<<")]),e._v(" "),e._l(e.years,function(t){return n("span",{staticClass:"year",class:{active:e.pickerYearRef==t},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),e.handlerSelectYear(t)}}},[e._v("\n                      "+e._s(t)+"\n                    ")])}),e._v(" "),n("span",{staticClass:"year",on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.pickerYearRef+=22}}},[e._v(">>")])],2):e._e()]),e._v(" "),n("div",{staticStyle:{"text-align":"center",cursor:"pointer"},on:{click:e.handlerClear}},[n("i",{staticClass:"icon-cancel-alt"}),e._v("\n            Supprimer la date\n        ")])])])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-group-addon"},[n("i",{staticClass:"icon-calendar"})])}],s={render:i,staticRenderFns:a};t.a=s},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"milestones"},[e._m(0),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.error?n("div",{staticClass:"error overlay"},[n("div",{staticClass:"overlay-content"},[n("i",{staticClass:"icon-warning-empty"}),e._v("\n                "+e._s(e.error)+"\n                "),n("br"),e._v(" "),n("a",{staticClass:"btn btn-sm btn-default btn-xs",attrs:{href:"#"},on:{click:function(t){e.error=null}}},[n("i",{staticClass:"icon-cancel-circled"}),e._v("\n                    Fermer")])])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.pendingMsg?n("div",{staticClass:"pending overlay"},[n("div",{staticClass:"overlay-content"},[n("i",{staticClass:"icon-spinner animate-spin"}),e._v("\n                "+e._s(e.pendingMsg)+"\n            ")])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.formData?n("div",{staticClass:"overlay"},[n("div",{staticClass:"overlay-content"},[e.formData.id?n("h3",[e._v("Modification du jalon "),n("strong",[e._v(e._s(e.formData.type.label))])]):n("h3",[e._v("Nouveau jalon")]),e._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[e._v("Type de jalon")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.formData.type.id,expression:"formData.type.id"}],staticClass:"form-control",attrs:{name:"",id:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.formData.type,"id",t.target.multiple?n:n[0])}}},e._l(e.groupedTypes,function(t){return n("optgroup",{attrs:{label:t.label}},e._l(t.types,function(t){return n("option",{domProps:{value:t.id}},[e._v(e._s(t.label))])}),0)}),0),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.formTypeFinishable,expression:"formTypeFinishable"}],staticClass:"help"},[n("i",{staticClass:"icon-info-circled"}),e._v("\n                        Ce type de jalon inclut des méchanismes de validation pour marquer le jalon comme terminé\n                    ")])]),e._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[e._v("Date prévue pour le jalon")]),e._v(" "),n("datepicker",{attrs:{moment:e.moment,value:e.formData.dateStart},on:{input:function(t){e.formData.dateStart=t}}})],1),e._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[e._v("Description")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.comment,expression:"formData.comment"}],staticClass:"form-control",domProps:{value:e.formData.comment},on:{input:function(t){t.target.composing||e.$set(e.formData,"comment",t.target.value)}}})]),e._v(" "),n("nav",[n("button",{staticClass:"btn btn-default",on:{click:e.performSave}},[n("i",{staticClass:"icon-trash"}),e._v("\n                        Enregistrer\n                    ")]),e._v(" "),n("button",{staticClass:"btn btn-default",on:{click:function(t){e.formData=null}}},[n("i",{staticClass:"icon-cancel-outline"}),e._v("\n                        Annuler\n                    ")])])])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.deleteMilestone?n("div",{staticClass:"deleteconfirm overlay"},[n("div",{staticClass:"overlay-content"},[n("h3",[n("i",{staticClass:"icon-help-circled"}),e._v("\n                    Supprimer ce jalon ?")]),e._v(" "),n("p",[e._v("Cette suppression sera "),n("strong",[e._v("définitive")]),e._v(", si vous souhaitez signifier que ce jalon est réalisé, utilisez plutôt l'option "),n("em",[e._v("Marquer comme terminé")]),e._v(". Si cette option n'est pas disponible, demandez à l'administrateur Oscar si vous avez les privilèges pour réaliser cette action ou si le type de jalon "),n("strong",[e._v(e._s(e.deleteMilestone.type.label))]),e._v(" est correctement configuré.")]),e._v(" "),n("nav",[n("button",{staticClass:"btn btn-default",on:{click:e.preformDelete}},[n("i",{staticClass:"icon-trash"}),e._v("\n                        Supprimer\n                    ")]),e._v(" "),n("button",{staticClass:"btn btn-default",on:{click:function(t){e.deleteMilestone=null}}},[n("i",{staticClass:"icon-cancel-outline"}),e._v("\n                        Annuler\n                    ")])])])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.validMilestone?n("div",{staticClass:"validconfirm overlay"},[n("div",{staticClass:"overlay-content"},[n("h3",[n("i",{staticClass:"icon-help-circled"}),e._v("\n                    Valider ce jalon ?\n                ")]),e._v(" "),n("p",[e._v("Les jalons marqués comme terminés ne feront pas l'objet de notifications ou d'alertes.")]),e._v(" "),n("nav",[n("button",{staticClass:"btn btn-default",on:{click:function(t){return e.performValid("valid")}}},[n("i",{staticClass:"icon-ok-circled"}),e._v("\n                        Marquer ce jalon comme terminé\n                    ")]),e._v(" "),n("button",{staticClass:"btn btn-default",on:{click:function(t){e.validMilestone=null}}},[n("i",{staticClass:"icon-cancel-outline"}),e._v("\n                        Annuler\n                    ")])])])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.inProgressMilestone?n("div",{staticClass:"inprogressconfirm overlay"},[n("div",{staticClass:"overlay-content"},[n("h3",[n("i",{staticClass:"icon-help-circled"}),e._v('\n                    Marquer ce jalon "en cours" ?\n                ')]),e._v(" "),n("p"),e._v(" "),n("nav",[n("button",{staticClass:"btn btn-default",on:{click:function(t){return e.performValid("inprogress")}}},[n("i",{staticClass:"icon-cw-outline"}),e._v("\n                        Marquer ce jalon comme en cours\n                    ")]),e._v(" "),n("button",{staticClass:"btn btn-default",on:{click:function(t){e.inProgressMilestone=null}}},[n("i",{staticClass:"icon-cancel-outline"}),e._v("\n                        Annuler\n                    ")])])])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.actionMessage?n("div",{staticClass:"inprogressconfirm overlay"},[n("div",{staticClass:"overlay-content"},[n("h3",[n("i",{staticClass:"icon-help-circled"}),e._v("\n                    "+e._s(e.actionMessage)+" ?\n                ")]),e._v(" "),n("p",[e._v("Les jalons marqués comme terminés (Validé, refusé ou sans suite) ne feront pas l'objet de notifications ou d'alertes")]),e._v(" "),n("nav",[n("button",{staticClass:"btn btn-default",on:{click:function(t){return e.performValid(e.action)}}},[n("i",{staticClass:"icon-cw-outline"}),e._v("\n                        "+e._s(e.actionMessage)+"\n                    ")]),e._v(" "),n("button",{staticClass:"btn btn-default",on:{click:e.handlerActionCancel}},[n("i",{staticClass:"icon-cancel-outline"}),e._v("\n                        Annuler\n                    ")])])])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.unvalidMilestone?n("div",{staticClass:"validconfirm overlay"},[n("div",{staticClass:"overlay-content"},[n("h3",[n("i",{staticClass:"icon-help-circled"}),e._v("\n                    Invalider ce jalon ?\n                ")]),e._v(" "),n("p",[e._v("L'état d'avancement du jalon sera réinitialisé.")]),e._v(" "),n("nav",[n("button",{staticClass:"btn btn-default",on:{click:function(t){return e.performValid("unvalid")}}},[n("i",{staticClass:"icon-ok-circled"}),e._v("\n                        Réinitialiser la progression de ce jalon\n                    ")]),e._v(" "),n("button",{staticClass:"btn btn-default",on:{click:function(t){e.unvalidMilestone=null}}},[n("i",{staticClass:"icon-cancel-outline"}),e._v("\n                        Annuler\n                    ")])])])]):e._e()]),e._v(" "),null!=e.model.milestones?n("section",{staticClass:"list"},[n("p",[n("small",[e._v("Il y a "+e._s(e.milestones.length)+" jalon(s)")])]),e._v(" "),e._l(e.milestones,function(t){return n("milestone",{key:t.id,attrs:{milestone:t},on:{valid:e.handlerValid,unvalid:e.handlerUnvalid,inprogress:e.handlerInProgress,cancel:function(t){return e.handlerActionConfirm(t,"cancel","Marquer ce jalon comme sans suite")},refused:function(t){return e.handlerActionConfirm(t,"refused","Marquer ce jalon comme refusé")},remove:e.handlerRemove,edit:e.handlerEdit}})})],2):e._e(),e._v(" "),n("nav",{staticClass:"text-right"},[n("a",{directives:[{name:"show",rawName:"v-show",value:e.creatable,expression:"creatable"}],staticClass:"oscar-link",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.handlerNew(t)}}},[n("i",{staticClass:"icon-calendar-plus-o"}),e._v("\n            Nouveau Jalon\n        ")])])],1)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[n("i",{staticClass:"icon-calendar"}),e._v("Jalons")])}],s={render:i,staticRenderFns:a};t.a=s}])});
//# sourceMappingURL=Milestones.js.map