(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.milestones=e():t.milestones=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=3)}([function(t,e){t.exports=function(t,e,n,a,s,i){var o,r=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(o=t,r=t.default);var c="function"==typeof r?r.options:r;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId=s);var u;if(i?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=u):a&&(u=a),u){var d=c.functional,f=d?c.render:c.beforeCreate;d?(c._injectStyles=u,c.render=function(t,e){return u.call(e),f(t,e)}):c.beforeCreate=f?[].concat(f,u):[u]}return{esModule:o,exports:r,options:c}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default={props:["moment","url"],components:{milestone:s.default},data:function(){return{error:null,formData:null,pendingMsg:"",milestones:null,deleteMilestone:null,editMilestone:null,validMilestone:null,types:null}},methods:{handlerValid:function(t){this.validMilestone=t},handlerRemove:function(t){this.deleteMilestone=t},handlerEdit:function(t){this.editMilestone=t,this.formData=JSON.parse(JSON.stringify(t))},handlerNew:function(){this.formData={id:0,type:JSON.parse(JSON.stringify(this.types[0])),dateStart:new Date,comment:"Commentaire par defaut"}},getMoment:function(){return this.moment},saveFormData:function(){console.log(this.formData);var t=new FormData;t.append("id",this.formData.id),t.append("type",this.formData.type.id),t.append("comment",this.formData.comment),t.append("dateStart",this.formData.dateStart.date),this.formData.id?this.$http.post(this.url,t).then(function(t){console.log("OK")},function(t){console.log("ERROR",t)}):this.$http.put(this.url,t).then(function(t){console.log("OK")},function(t){console.log("ERROR",t)})},getMilestones:function(){var t=this;this.pendingMsg="Chargement des jalons : "+this.url,this.$http.get(this.url).then(function(e){console.log("Données chargée",e.data),t.milestones=e.data.milestones,t.types=e.data.types},function(e){t.error="Impossible de charger les jalons de cette activités : "+e}).then(function(e){return t.pendingMsg=""})}},mounted:function(){this.getMilestones()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{milestone:{required:!0}},computed:{finishable:function(){return 1==this.milestone.type.finishable},finished:function(){return 100==this.milestone.finished},late:function(){return this.finishable&&this.milestone.past&&!this.finished},past:function(){return this.milestone.past},cssClass:function(){return{finishable:this.finishable,finished:this.finished,late:this.late,past:this.past}}}}},function(t,e,n){t.exports=n(4)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var o=n(7),r=n(0),l=r(s.a,o.a,!1,null,null,null);e.default=l.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),s=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var o=n(6),r=n(0),l=r(s.a,o.a,!1,null,null,null);e.default=l.exports},function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"card xs jalon",class:t.cssClass},[n("time",{attrs:{datetime:t.milestone.dateStart}},[t._v("\n        "+t._s(t._f("moment")(t.milestone.dateStart))+"\n    ")]),t._v(" "),n("strong",{staticClass:"card-title"},[t._v(t._s(t.milestone.type.label))]),t._v(" "),t.milestone.comment?n("p",{staticClass:"details"},[t._v(t._s(t.milestone.comment))]):t._e(),t._v(" "),n("nav",[n("a",{staticClass:"btn-valid",attrs:{href:"#",title:"Marquer comme terminé"},on:{click:function(e){e.preventDefault(),t.$emit("valid",t.milestone)}}},[n("i",{staticClass:"icon-ok-circled"})]),t._v(" "),n("a",{staticClass:"btn-delete",attrs:{href:"#",title:"Supprimer ce jalon"},on:{click:function(e){e.preventDefault(),t.$emit("remove",t.milestone)}}},[n("i",{staticClass:"icon-trash"})]),t._v(" "),n("a",{staticClass:"btn-edit",attrs:{href:"#",title:"Modifier ce jalon"},on:{click:function(e){e.preventDefault(),t.$emit("edit",t.milestone)}}},[n("i",{staticClass:"icon-edit"})])])])},s=[],i={render:a,staticRenderFns:s};e.a=i},function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"milestones"},[t._m(0),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.pendingMsg?n("div",{staticClass:"pending overlay"},[n("div",{staticClass:"overlay-content"},[n("i",{staticClass:"icon-spinner animate-spin"}),t._v("\n                "+t._s(t.pendingMsg)+"\n            ")])]):t._e()]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.formData?n("div",{staticClass:"overlay"},[n("div",{staticClass:"overlay-content"},[t.formData.id?n("h3",[t._v("Modification du jalon "),n("strong",[t._v(t._s(t.formData.type.label))])]):n("h3",[t._v("Nouveau jalon")]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v("Type de jalon")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.type.id,expression:"formData.type.id"}],staticClass:"form-control",attrs:{name:"",id:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData.type,"id",e.target.multiple?n:n[0])}}},t._l(t.types,function(e){return n("option",{domProps:{value:e.id}},[t._v(t._s(e.label))])}))]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v("Date prévu pour le jalon")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.dateStart.date,expression:"formData.dateStart.date"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.formData.dateStart.date},on:{input:function(e){e.target.composing||t.$set(t.formData.dateStart,"date",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v("Description")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.comment,expression:"formData.comment"}],staticClass:"form-control",domProps:{value:t.formData.comment},on:{input:function(e){e.target.composing||t.$set(t.formData,"comment",e.target.value)}}})]),t._v(" "),n("nav",[n("button",{staticClass:"btn btn-default",on:{click:t.saveFormData}},[n("i",{staticClass:"icon-trash"}),t._v("\n                        Enregistrer\n                    ")]),t._v(" "),n("button",{staticClass:"btn btn-default",on:{click:function(e){t.formData=null}}},[n("i",{staticClass:"icon-cancel-outline"}),t._v("\n                        Annuler\n                    ")])])])]):t._e()]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.deleteMilestone?n("div",{staticClass:"deleteconfirm overlay"},[n("div",{staticClass:"overlay-content"},[n("i",{staticClass:"icon-help-circled"}),t._v("\n                Supprimer définitivement ce jalon ?\n                "),n("nav",[n("button",{staticClass:"btn btn-default",on:{click:t.preformDelete}},[n("i",{staticClass:"icon-trash"}),t._v("\n                        Supprimer\n                    ")]),t._v(" "),n("button",{staticClass:"btn btn-default",on:{click:function(e){t.deleteMilestone=null}}},[n("i",{staticClass:"icon-cancel-outline"}),t._v("\n                        Annuler\n                    ")])])])]):t._e()]),t._v(" "),t.error?n("div",{staticClass:"alert"},[t._v("\n        "+t._s(t.error)+"\n    ")]):t._e(),t._v(" "),null!=t.milestones?n("section",{staticClass:"list"},[n("p",[t._v("Il y'a "+t._s(t.milestones.length)+" jalon(s)")]),t._v(" "),t._l(t.milestones,function(e){return n("milestone",{key:e.id,attrs:{milestone:e},on:{valid:t.handlerValid,remove:t.handlerRemove,edit:t.handlerEdit}})})],2):t._e(),t._v(" "),n("button",{staticClass:"btn btn-default",on:{click:t.handlerNew}},[n("i",{staticClass:"icon-calendar-plus-o"}),t._v("\n        Nouveau Jalon")])],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[n("i",{staticClass:"icon-calendar"}),t._v("\n        Jalons UP")])}],i={render:a,staticRenderFns:s};e.a=i}])});
//# sourceMappingURL=Milestones.js.map