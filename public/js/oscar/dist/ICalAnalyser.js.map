{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///ICalAnalyser.js","webpack:///webpack/bootstrap 21533430e0ee86b43105","webpack:///./public/js/oscar/src/ICalAnalyser.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","value","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","ICalAnalyser","ending","arguments","undefined","Date","dailyStrategy","String","daysString","summaries","debugMode","console","log","apply","item","mmStart","moment","start","mmEnd","end","date","part1","JSON","parse","stringify","part2","splitEnd","endOf","toISOString","beginnextDay","add","startOf","generateItem","concat","uid","icsuid","icsfileuid","icsfilename","icsfiledateaddedd","label","summary","lastimport","exception","description","rrule","exdate","items","recursive","freq","fromDate","toDate","until","interval","pas","count","byday","copy","indexOf","setDate","getDate","currentDay","getDay","daily","format","icsData","_this","defaultTimeZone","tz","guess","out","exceptions","forEach","warnings","dd","tzid","push","email","recurenceid","lastModified","itemStart","startHourStr","startTime","split","startHour","parseInt","startMinute","endHourStr","endTime","endHour","endMinute","event","icsfiledateadded","hours","minutes","repeat","ex","splice","e","_this2","fr","FileReader","onloadend","result","parseFileContent","ICAL","readAsText","files","dataString","data","error","default"],"mappings":"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","file":"ICalAnalyser.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"icalanalyser\"] = factory();\n\telse\n\t\troot[\"icalanalyser\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"icalanalyser\"] = factory();\n\telse\n\t\troot[\"icalanalyser\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!***************************************************!*\\\n  !*** multi ./public/js/oscar/src/ICalAnalyser.js ***!\n  \\***************************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! /home/bouvry/Projects/Unicaen/oscar/public/js/oscar/src/ICalAnalyser.js */1);\n\n\n/***/ }),\n/* 1 */\n/*!*********************************************!*\\\n  !*** ./public/js/oscar/src/ICalAnalyser.js ***!\n  \\*********************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ICalAnalyser = function () {\n    _createClass(ICalAnalyser, [{\n        key: 'getDailyStrategy',\n        value: function getDailyStrategy() {\n            return this.dailyStrategy;\n        }\n    }]);\n\n    function ICalAnalyser() {\n        var ending = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date();\n        var dailyStrategy = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n        _classCallCheck(this, ICalAnalyser);\n\n        if (ending instanceof String) ending = new Date(ending);\n\n        if (!(ending instanceof Date)) throw 'Bad usage, date or string required.';\n\n        this.ending = typeof ending == 'string' ? new Date(ending) : ending;\n        this.daysString = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\n        this.dailyStrategy = dailyStrategy;\n        this.summaries = [];\n        this.debugMode = false;\n    }\n\n    _createClass(ICalAnalyser, [{\n        key: 'debug',\n        value: function debug() {\n            if (this.debugMode === true) console.log.apply(this, arguments);\n        }\n    }, {\n        key: 'generateItem',\n        value: function generateItem(item) {\n            // POST traitement\n            var mmStart = moment(item.start);\n            var mmEnd = moment(item.end);\n\n            // Détection des chevauchements\n            // découpe la période en 2 morceaux pour n'avoir que des périodes\n            // journalières.\n            if (mmStart.date() != mmEnd.date()) {\n\n                var part1 = JSON.parse(JSON.stringify(item)),\n                    part2 = JSON.parse(JSON.stringify(item)),\n                    splitEnd = mmStart.endOf('day');\n\n                part1.end = splitEnd.toISOString();\n\n                var beginnextDay = splitEnd.add(1, 'day').startOf('day');\n                part2.start = beginnextDay.toISOString();\n\n                // Si le deuxième morceau a une durée nulle, on l'ignore\n                if (part2.start == part2.end) {\n                    return this.generateItem(part1);\n                }\n                return [].concat(this.generateItem(part1)).concat(this.generateItem(part2));\n            }\n            return [{\n                uid: item.uid,\n                icsuid: item.icsuid,\n                icsfileuid: item.icsfileuid,\n                icsfilename: item.icsfilename,\n                icsfiledateaddedd: item.icsfiledateaddedd,\n                label: item.summary,\n                summary: item.summary,\n                lastimport: true,\n                start: item.start,\n                end: item.end,\n                exception: item.exception ? item.exception : null,\n                description: item.description == undefined ? null : item.description\n            }];\n        }\n\n        /**\n         * Traitement des événements récursifs.\n         *\n         * @param item\n         * @param rrule\n         * @param exdate\n         * @returns {Array}\n         */\n\n    }, {\n        key: 'repeat',\n        value: function repeat(item, rrule) {\n            var exdate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n\n            var items = [];\n            item.recursive = true;\n            if (rrule.freq == 'DAILY' || rrule.freq == 'WEEKLY') {\n                var fromDate = new Date(item.start);\n                var toDate = new Date(item.end);\n                var end = rrule.until ? new Date(rrule.until) : this.ending;\n                var interval = rrule.interval || 1;\n                var pas = rrule.freq == 'DAILY' ? 1 : 7;\n                var count = rrule.count || null;\n                var byday = rrule.byday || this.daysString;\n\n                if (byday instanceof String) byday = [byday];\n\n                if (count) {\n                    for (var i = 0; i < count; i++) {\n                        var copy = JSON.parse(JSON.stringify(item));\n                        copy.start = moment(fromDate).toISOString();\n                        copy.end = moment(toDate).toISOString();\n                        copy.recursive = true;\n                        if (exdate.indexOf(fromDate.toISOString()) < 0) {\n                            items = items.concat(this.generateItem(copy));\n                        }\n                        fromDate.setDate(fromDate.getDate() + interval * pas);\n                        toDate.setDate(toDate.getDate() + interval * pas);\n                    }\n                } else {\n                    while (fromDate < end) {\n                        var currentDay = this.daysString[fromDate.getDay()];\n                        if (item.daily == \"allday\" && exdate.indexOf(moment(fromDate).format(\"YYYY-MM-DD\") + 'T00:00:00.000Z') > -1) {} else if (!(byday.indexOf(currentDay) < 0 || exdate.indexOf(fromDate.toISOString()) > -1)) {\n                            var _copy = JSON.parse(JSON.stringify(item));\n                            _copy.start = moment(fromDate).format();\n                            _copy.end = moment(toDate).format();\n                            _copy.recursive = true;\n                            items = items.concat(this.generateItem(_copy));\n                        }\n                        fromDate.setDate(fromDate.getDate() + interval * pas);\n                        toDate.setDate(toDate.getDate() + interval * pas);\n                    }\n                }\n            } else {\n                console.log('RECURENCE NON-TRAITEE', rrule);\n            }\n\n            if (items.length == 0) {\n                console.log(\" !!!!!!!!!!!!!!!! RIEN de CRÉÉ\", item, rrule);\n                console.log(' TO => ', new Date(rrule.until));\n                console.log(' TO => ', this.ending);\n                console.log(' TO => ', end);\n            } else {\n                console.log(' ================ ', items.length, ' créé(s)');\n            }\n            return items;\n        }\n    }, {\n        key: 'parse',\n        value: function parse(icsData) {\n            var _this = this;\n\n            // local TZ\n            var defaultTimeZone = moment.tz.guess(),\n                out = [],\n                exceptions = [];\n\n            // Données concernant le fichier ICS\n            var icsfilename = icsData[1][0][3];\n            var icsfileuid = icsData[1][1][3];\n            var icsfiledateaddedd = moment().format('YYYY-MM-DD');\n\n            // Events\n            icsData[2].forEach(function (d) {\n                var item = {\n                    'icsfileuid': icsfileuid,\n                    'icsfilename': icsfilename,\n                    'icsfiledateaddedd': icsfiledateaddedd,\n                    warnings: []\n                },\n                    rrule = null,\n                    exdate = [];\n\n                // Extraction des données brutes\n                if (d[0] == 'vevent') {\n                    d[1].forEach(function (dd) {\n                        if (dd[0] == 'uid') {\n                            item.uid = dd[3];\n                            item.icsuid = dd[3];\n                        } else if (dd[0] == 'rrule') {\n                            rrule = dd[3];\n                        } else if (dd[0] == 'exdate') {\n                            var m = moment.tz(dd[3], dd[1].tzid);\n                            exdate.push(m.tz(defaultTimeZone).toISOString());\n                        } else if (dd[0] == 'organizer') {\n                            item.email = dd[3];\n                        } else if (dd[0] == 'description') {\n                            item.description = dd[3];\n                            if (item.description == 'undefined') {\n                                item.description = '';\n                            }\n                        } else if (dd[0] == 'dtstart') {\n                            var m = moment.tz(dd[3], dd[1].tzid);\n                            item.start = m.tz(defaultTimeZone).format();\n                        } else if (dd[0] == 'recurrence-id') {\n                            item.recurenceid = dd[2];\n                            var m = moment.tz(dd[3], dd[1].tzid);\n                            item.exception = m.tz(defaultTimeZone).format();\n                        } else if (dd[0] == 'dtend') {\n                            var m = moment.tz(dd[3], dd[1].tzid);\n                            item.end = m.tz(defaultTimeZone).format();\n                        } else if (dd[0] == 'last-modified') {\n                            item.lastModified = moment(dd[3]).format();\n                        } else if (dd[0] == 'summary') {\n                            item.summary = item.label = dd[3];\n                            if (_this.summaries.indexOf(item.summary) < 0) {\n                                _this.summaries.push(item.summary);\n                            }\n                        } else if (dd[0] == 'x-microsoft-cdo-alldayevent') {\n                            item.daily = \"allday\";\n                        }\n                    });\n\n                    if (item.exception) {\n                        exceptions = exceptions.concat(_this.generateItem(item));\n                    } else if (item.daily == \"allday\") {\n                        var itemStart = moment(item.start);\n                        if (_this.dailyStrategy) {\n                            _this.dailyStrategy.forEach(function (copy) {\n                                var startHourStr = copy.startTime.split(':');\n                                var startHour = parseInt(startHourStr[0]);\n                                var startMinute = parseInt(startHourStr[1]);\n                                var endHourStr = copy.endTime.split(':');\n                                var endHour = parseInt(endHourStr[0]);\n                                var endMinute = parseInt(endHourStr[1]);\n                                var event = {\n                                    uid: item.uid,\n                                    icsuid: item.icsuid,\n                                    icsfileuid: item.icsfileuid,\n                                    icsfilename: item.icsfilename,\n                                    icsfiledateadded: item.icsfiledateadded,\n                                    daily: \"allday\",\n                                    label: item.label,\n                                    summary: item.label,\n                                    description: item.description,\n                                    email: item.email,\n                                    start: itemStart.hours(startHour).minutes(startMinute).format(),\n                                    end: itemStart.hours(endHour).minutes(endMinute).format()\n                                };\n                                if (rrule) {\n                                    out = out.concat(_this.repeat(event, rrule, exdate));\n                                } else {\n                                    out = out.concat(_this.generateItem(event));\n                                }\n                            });\n                        }\n                    } else {\n                        if (rrule) {\n                            out = out.concat(_this.repeat(item, rrule, exdate));\n                        } else {\n                            out = out.concat(_this.generateItem(item));\n                        }\n                    }\n                }\n            });\n\n            exceptions.forEach(function (ex) {\n                for (var i = 0; i < out.length; i++) {\n                    var current = out[i];\n                    if (out[i].uid == ex.uid && out[i].start == ex.exception) {\n                        out.splice(i, 1, ex);\n                    }\n                }\n            });\n\n            return out;\n        }\n    }, {\n        key: 'loadIcsFile',\n        value: function loadIcsFile(e) {\n            var _this2 = this;\n\n            var fr = new FileReader();\n            fr.onloadend = function (result) {\n                _this2.parseFileContent(ICAL.parse(fr.result));\n            };\n            fr.readAsText(e.target.files[0]);\n        }\n\n        /**\n         * Analyse le contenu du fichier pour en extraire un objet structuré.\n         */\n\n    }, {\n        key: 'parseFileContent',\n        value: function parseFileContent(dataString) {\n            try {\n                var data = ICAL.parse(dataString);\n                if (data.length < 2) throw \"Bad format\";\n                var events = this.parse(data);\n                return events;\n            } catch (error) {\n                throw error;\n            }\n        }\n    }]);\n\n    return ICalAnalyser;\n}();\n\nexports.default = ICalAnalyser;\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// ICalAnalyser.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 21533430e0ee86b43105","var ICalAnalyser = class  {\n\n    getDailyStrategy() {\n        return this.dailyStrategy;\n    }\n\n    constructor(ending = new Date(), dailyStrategy = []) {\n        if (ending instanceof String)\n            ending = new Date(ending);\n\n        if (!(ending instanceof Date))\n            throw 'Bad usage, date or string required.'\n\n        this.ending = typeof ending == 'string' ? new Date(ending) : ending;\n        this.daysString = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\n        this.dailyStrategy = dailyStrategy;\n        this.summaries = [];\n        this.debugMode = false;\n    }\n\n    debug(){\n        if( this.debugMode === true )\n            console.log.apply(this, arguments);\n    }\n\n    generateItem(item) {\n        // POST traitement\n        var mmStart = moment(item.start);\n        var mmEnd = moment(item.end);\n\n        // Détection des chevauchements\n        // découpe la période en 2 morceaux pour n'avoir que des périodes\n        // journalières.\n        if (mmStart.date() != mmEnd.date()) {\n\n            var part1 = JSON.parse(JSON.stringify(item))\n                , part2 = JSON.parse(JSON.stringify(item))\n                , splitEnd = mmStart.endOf('day');\n\n            part1.end = splitEnd.toISOString();\n\n            var beginnextDay = splitEnd.add(1, 'day').startOf('day');\n            part2.start = beginnextDay.toISOString();\n\n            // Si le deuxième morceau a une durée nulle, on l'ignore\n            if (part2.start == part2.end) {\n                return this.generateItem(part1)\n            }\n            return [].concat(this.generateItem(part1)).concat(this.generateItem(part2));\n        }\n        return [{\n            uid: item.uid,\n            icsuid: item.icsuid,\n            icsfileuid: item.icsfileuid,\n            icsfilename: item.icsfilename,\n            icsfiledateaddedd: item.icsfiledateaddedd,\n            label: item.summary,\n            summary: item.summary,\n            lastimport: true,\n            start: item.start,\n            end: item.end,\n            exception: item.exception ? item.exception : null,\n            description: item.description == undefined ? null : item.description\n        }];\n    }\n\n    /**\n     * Traitement des événements récursifs.\n     *\n     * @param item\n     * @param rrule\n     * @param exdate\n     * @returns {Array}\n     */\n    repeat(item, rrule, exdate = null) {\n\n\n        var items = [];\n        item.recursive = true;\n        if (rrule.freq == 'DAILY' || rrule.freq == 'WEEKLY') {\n            var fromDate = new Date(item.start);\n            var toDate = new Date(item.end);\n            var end = rrule.until ? new Date(rrule.until) : this.ending;\n            var interval = rrule.interval || 1;\n            var pas = rrule.freq == 'DAILY' ? 1 : 7;\n            var count = rrule.count || null;\n            var byday = rrule.byday || this.daysString;\n\n            if (byday instanceof String)\n                byday = [byday];\n\n            if (count) {\n                for (var i = 0; i < count; i++) {\n                    let copy = JSON.parse(JSON.stringify(item));\n                    copy.start = moment(fromDate).toISOString();\n                    copy.end = moment(toDate).toISOString();\n                    copy.recursive = true;\n                    if( exdate.indexOf(fromDate.toISOString()) < 0 ) {\n                        items = items.concat(this.generateItem(copy));\n                    }\n                    fromDate.setDate(fromDate.getDate() + (interval * pas));\n                    toDate.setDate(toDate.getDate() + (interval * pas));\n                }\n            }\n            else {\n                while (fromDate < end) {\n                    let currentDay = this.daysString[fromDate.getDay()];\n                    if( item.daily == \"allday\" && exdate.indexOf(moment(fromDate).format(\"YYYY-MM-DD\")+'T00:00:00.000Z') > -1 ){\n                    } else if (!(byday.indexOf(currentDay) < 0 || exdate.indexOf(fromDate.toISOString()) > -1 )) {\n                        let copy = JSON.parse(JSON.stringify(item));\n                        copy.start = moment(fromDate).format();\n                        copy.end = moment(toDate).format();\n                        copy.recursive = true;\n                        items = items.concat(this.generateItem(copy));\n                    }\n                    fromDate.setDate(fromDate.getDate() + (interval * pas));\n                    toDate.setDate(toDate.getDate() + (interval * pas));\n                }\n            }\n        } else {\n            console.log('RECURENCE NON-TRAITEE', rrule);\n        }\n\n        if (items.length == 0) {\n            console.log(\" !!!!!!!!!!!!!!!! RIEN de CRÉÉ\", item, rrule)\n            console.log(' TO => ', new Date(rrule.until))\n            console.log(' TO => ', this.ending)\n            console.log(' TO => ', end)\n        } else {\n            console.log(' ================ ', items.length, ' créé(s)')\n        }\n        return items;\n    }\n\n    parse(icsData) {\n        // local TZ\n        var   defaultTimeZone = moment.tz.guess()\n            , out = []\n            , exceptions = [];\n\n        // Données concernant le fichier ICS\n        var icsfilename = icsData[1][0][3];\n        var icsfileuid = icsData[1][1][3];\n        var icsfiledateaddedd = moment().format('YYYY-MM-DD');\n\n        // Events\n        icsData[2].forEach((d)=> {\n            var item = {\n                    'icsfileuid': icsfileuid,\n                    'icsfilename': icsfilename,\n                    'icsfiledateaddedd': icsfiledateaddedd,\n                    warnings: []\n                },\n                rrule = null,\n                exdate = [];\n\n            // Extraction des données brutes\n            if (d[0] == 'vevent') {\n                d[1].forEach((dd) => {\n                    if (dd[0] == 'uid') {\n                        item.uid = dd[3];\n                        item.icsuid = dd[3];\n                    } else if (dd[0] == 'rrule') {\n                        rrule = dd[3];\n                    }\n\n                    else if (dd[0] == 'exdate') {\n                        var m = moment.tz(dd[3], dd[1].tzid);\n                        exdate.push(m.tz(defaultTimeZone).toISOString());\n                    }\n\n                    else if (dd[0] == 'organizer') {\n                        item.email = dd[3];\n                    }\n\n                    else if (dd[0] == 'description') {\n                        item.description = dd[3];\n                        if( item.description == 'undefined' ){\n                            item.description = '';\n                        }\n                    }\n\n                    else if (dd[0] == 'dtstart') {\n                        var m = moment.tz(dd[3], dd[1].tzid);\n                        item.start = m.tz(defaultTimeZone).format();\n                    }\n\n                    else if (dd[0] == 'recurrence-id') {\n                        item.recurenceid = dd[2];\n                        var m = moment.tz(dd[3], dd[1].tzid);\n                        item.exception = m.tz(defaultTimeZone).format();\n                    }\n\n                    else if (dd[0] == 'dtend') {\n                        var m = moment.tz(dd[3], dd[1].tzid);\n                        item.end = m.tz(defaultTimeZone).format();\n                    }\n\n                    else if (dd[0] == 'last-modified') {\n                        item.lastModified = moment(dd[3]).format();\n                    }\n\n                    else if (dd[0] == 'summary') {\n                        item.summary = item.label = dd[3];\n                        if (this.summaries.indexOf(item.summary) < 0) {\n                            this.summaries.push(item.summary);\n                        }\n                    }\n                    else if (dd[0] == 'x-microsoft-cdo-alldayevent') {\n                        item.daily = \"allday\";\n                    }\n                });\n\n                if (item.exception) {\n                    exceptions = exceptions.concat(this.generateItem(item));\n                }\n                else if( item.daily == \"allday\" ){\n                    var itemStart = moment(item.start);\n                    if( this.dailyStrategy ){\n                        this.dailyStrategy.forEach((copy) => {\n                            var startHourStr = copy.startTime.split(':');\n                            var startHour = parseInt(startHourStr[0]);\n                            var startMinute = parseInt(startHourStr[1]);\n                            var endHourStr = copy.endTime.split(':');\n                            var endHour = parseInt(endHourStr[0]);\n                            var endMinute = parseInt(endHourStr[1]);\n                            var event = {\n                                uid: item.uid,\n                                icsuid: item.icsuid,\n                                icsfileuid: item.icsfileuid,\n                                icsfilename: item.icsfilename,\n                                icsfiledateadded: item.icsfiledateadded,\n                                daily: \"allday\",\n                                label: item.label,\n                                summary: item.label,\n                                description: item.description,\n                                email: item.email,\n                                start: itemStart.hours(startHour).minutes(startMinute).format(),\n                                end: itemStart.hours(endHour).minutes(endMinute).format()\n                            };\n                            if( rrule ){\n                                out = out.concat(this.repeat(event, rrule, exdate));\n                            } else {\n                                out = out.concat(this.generateItem(event));\n                            }\n                        })\n                    }\n                } else {\n                    if (rrule) {\n                        out = out.concat(this.repeat(item, rrule, exdate));\n                    } else {\n                        out = out.concat(this.generateItem(item));\n                    }\n                }\n            }\n        })\n\n        exceptions.forEach((ex)=> {\n            for (var i = 0; i < out.length; i++) {\n                let current = out[i];\n                if (out[i].uid == ex.uid && out[i].start == ex.exception) {\n                    out.splice(i, 1, ex);\n                }\n            }\n        });\n\n        return out\n    }\n\n    loadIcsFile(e){\n        var fr = new FileReader();\n        fr.onloadend = (result)=> {\n            this.parseFileContent(ICAL.parse(fr.result));\n        };\n        fr.readAsText(e.target.files[0]);\n    }\n\n    /**\n     * Analyse le contenu du fichier pour en extraire un objet structuré.\n     */\n    parseFileContent(dataString){\n        try {\n            var data = ICAL.parse(dataString);\n            if (data.length < 2) throw \"Bad format\";\n            var events  = this.parse(data);\n            return events;\n        } catch( error ){\n            throw error;\n        }\n    }\n}\n\nexport default ICalAnalyser;\n\n\n// WEBPACK FOOTER //\n// ./public/js/oscar/src/ICalAnalyser.js"],"sourceRoot":""}