(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ActivitySpentSynthesis=t():e.ActivitySpentSynthesis=t()})("undefined"!=typeof self?self:this,function(){return function(e){function t(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,s){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=1)}([function(e,t,n){"use strict";t.a={props:["url","manageDepense"],data:function(){return{error:null,warning:null,pendingMsg:"",synthesis:[],masses:{},dateUpdated:null}},computed:{getNoMasse:function(){var e=[];for(var t in this.synthesis.details["N.B"]){var n=this.synthesis.details["N.B"][t];e.indexOf(n)<0&&e.push(n)}return e}},methods:{fetch:function(){var e=this;this.pendingMsg="Chargement des donnèes",this.$http.get(this.url).then(function(t){e.synthesis=t.data.synthesis,e.masses=t.data.masses,e.dateUpdated=t.data.dateUpdated,e.error=t.data.error,e.warning=t.data.warning},function(t){403==t.status?e.error="Vous n'avez pas l'autorisation d'accès à ces informations.":e.error="Impossible de charger les dépenses pour ce PFI : "+t.data}).then(function(t){e.pendingMsg=""})}},mounted:function(){this.fetch()}}},function(e,t,n){e.exports=n(2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),r=n(4),a=n(3),i=a(s.a,r.a,!1,null,null,null);t.default=i.exports},function(e,t){e.exports=function(e,t,n,s,r,a){var i,o=e=e||{},d=typeof e.default;"object"!==d&&"function"!==d||(i=e,o=e.default);var c="function"==typeof o?o.options:o;t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId=r);var l;if(a?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):s&&(l=s),l){var u=c.functional,p=u?c.render:c.beforeCreate;u?(c._injectStyles=l,c.render=function(e,t){return l.call(t),p(e,t)}):c.beforeCreate=p?[].concat(p,l):[l]}return{esModule:i,exports:o,options:c}}},function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("transition",{attrs:{name:"fade"}},[e.error?n("div",{staticClass:"alert alert-danger"},[n("i",{staticClass:"icon-attention-1"}),e._v("\n            Il y'a eut un problème lors de la récupération des données financières :\n            "+e._s(e.error)+"\n        ")]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.warning?n("div",{staticClass:"alert-warning alert"},[n("i",{staticClass:"icon-warning-empty"}),e._v("\n            Les données affichées peuvent ne pas être à jour :\n            "+e._s(e.warning)+"\n        ")]):e._e()]),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.pendingMsg?n("div",{staticClass:"pending"},[n("div",{},[n("i",{staticClass:"icon-spinner animate-spin"}),e._v("\n                "+e._s(e.pendingMsg)+"\n            ")])]):e._e()]),e._v(" "),e.pendingMsg?e._e():n("table",{staticClass:"table table-condensed"},[e._l(e.masses,function(t,s){return n("tr",[n("th",[e._v(e._s(t))]),e._v(" "),n("td",{staticStyle:{"text-align":"right","white-space":"nowrap"}},[e._v(e._s(e._f("money")(e.synthesis[s]))+" €")])])}),e._v(" "),e.synthesis["N.B"]?n("tr",{staticStyle:{"border-top":"solid #000 thin"}},[n("th",[e._v("\n                Hors masse"),n("br"),e._v(" "),n("small",{staticClass:"error-block",staticStyle:{"font-weight":"300"}},[n("i",{staticClass:"icon-attention"}),e._v(" Les annexes de certains comptes ne sont pas renseignés :\n                    "),n("ul",e._l(e.getNoMasse,function(t){return n("li",[n("strong",[e._v(e._s(t))])])}),0),e._v(" "),e.manageDepense?n("a",{staticClass:"btn btn-xs btn-default",attrs:{href:e.manageDepense}},[n("i",{staticClass:"icon-cog"}),e._v("Gérer les types de dépense")]):n("span",[e._v("Merci de contacter un administrateur pour que les annexes des comptes soient configurés.")])])]),e._v(" "),n("td",{staticStyle:{"text-align":"right","white-space":"nowrap"}},[e._v(e._s(e._f("money")(e.synthesis["N.B"]))+" €")])]):e._e(),e._v(" "),n("tr",{staticStyle:{"border-top":"solid #000 thin","font-size":"1.6em"}},[n("th",[e._v("TOTAL : ")]),e._v(" "),n("td",{staticStyle:{"text-align":"right","white-space":"nowrap"}},[e._v(e._s(e._f("money")(e.synthesis.total))+" €")])])],2),e._v(" "),n("small",[e._v("Données mise à jour : "),e.dateUpdated?n("strong",[e._v(e._s(e._f("dateFull")(e.dateUpdated.date)))]):e._e()])],1)},r=[],a={render:s,staticRenderFns:r};t.a=a}])});
//# sourceMappingURL=ActivitySpentSynthesis.js.map