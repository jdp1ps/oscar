(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.validationperiod=e():t.validationperiod=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{error:null,declarations:null,group:"monthLabel"}},props:{bootbox:{required:!0}},computed:{subgroup:function(){return"monthLabel"==this.group?"label":"monthLabel"},grouped:function(){var t=this,e={};return this.declarations&&this.declarations.forEach(function(n){var o=n[t.group];console.log(o),e.hasOwnProperty(o)||(e[o]={label:n[o],declarations:[],maxDays:0}),n.sublabel=n[t.subgroup],e[o].declarations.push(n),e[o].maxDays=Math.max(e[o].maxDays,n.totalDays)}),e}},methods:{fetch:function(){var t=this;this.$http.get().then(function(e){console.log(e),t.declarations=e.body.packages},function(t){console.log("ERROR",t)})},validate:function(t){var e=this;this.bootbox.confirm("Valider cette déclaration ?",function(n){n&&e.send("valid",t,"")})},reject:function(t){var e=this;this.bootbox.prompt("Refuser cette déclaration ?",function(n){n&&e.send("reject",t,n)})},send:function(t,e,n){var o=this,r=new FormData;r.append("period_id",e),r.append("action",t),r.append("message",n),this.$http.post("",r).then(function(t){o.fetch()},function(t){o.error="Erreur : "+t.body})}},mounted:function(){this.fetch()}}},function(t,e,n){t.exports=n(2)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);var s=n(4),i=n(3),c=i(r.a,s.a,!1,null,null,null);e.default=c.exports},function(t,e){t.exports=function(t,e,n,o,r,a){var s,i=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(s=t,i=t.default);var l="function"==typeof i?i.options:i;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),r&&(l._scopeId=r);var u;if(a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=u):o&&(u=o),u){var d=l.functional,f=d?l.render:l.beforeCreate;d?(l._injectStyles=u,l.render=function(t,e){return u.call(e),f(t,e)}):l.beforeCreate=f?[].concat(f,u):[u]}return{esModule:s,exports:i,options:l}}},function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.error?n("div",{staticClass:"overlay",staticStyle:{"z-index":"2002"}},[n("div",{staticClass:"content container overlay-content"},[t._m(0),t._v(" "),n("pre",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]),t._v(" "),n("p",{staticClass:"text-danger"},[t._v("\n                Si ce message ne vous aide pas, transmettez le à l'administrateur Oscar.\n            ")]),t._v(" "),n("nav",{staticClass:"buttons"},[n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.error=""}}},[t._v("Fermer")])])])]):t._e(),t._v(" "),t.declarations?n("section",[n("a",{staticClass:"btn btn-xs btn-default",attrs:{href:"#"},on:{click:function(e){t.group="label"}}},[t._v("\n            par type\n        ")]),t._v(" "),n("a",{staticClass:"btn btn-xs btn-default",attrs:{href:"#"},on:{click:function(e){t.group="monthLabel"}}},[t._v("\n            par période\n        ")]),t._v(" "),t._l(t.grouped,function(e,o){return n("section",{staticClass:"card card-xs"},[n("h1",[t._v(t._s(o))]),t._v(" "),n("table",{staticClass:"table table-bordered"},[n("thead",[n("tr",[n("th",[t._v(t._s(o))]),t._v(" "),t._l(e.maxDays,function(e){return n("th",[t._v("\n                            "+t._s(e)+"\n                        ")])}),t._v(" "),n("th",[t._v("Total")]),t._v(" "),n("th",[t._v("\n                            Actions\n                        ")])],2)]),t._v(" "),n("tbody",t._l(e.declarations,function(o){return n("tr",[n("th",[t._v(t._s(o.sublabel))]),t._v(" "),t._l(e.maxDays,function(e){return n("td",[o.days[e]?n("strong",[t._v(t._s(o.days[e].total))]):n("em",[t._v("-")])])}),t._v(" "),n("td",[t._v("<"+t._s(o.total)+"/td>\n                        ")]),n("td",["valid"==o.validation.status?n("span",[n("i",{staticClass:"icon-ok-circled"}),t._v(" Validé\n                            ")]):"conflict"==o.validation.status?n("span",[n("i",{staticClass:"icon-minus-circled"}),t._v(" Refusé\n                            ")]):n("span",[n("button",{staticClass:"btn btn-success btn-xs",on:{click:function(e){t.validate(o.period_id)}}},[t._v("Valider")]),t._v(" "),n("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(e){t.reject(o.period_id)}}},[t._v("Rejeter")])])])],2)}))])])})],2):t._e()])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[n("i",{staticClass:"icon-attention-1"}),t._v(" Oups !")])}],a={render:o,staticRenderFns:r};e.a=a}])});
//# sourceMappingURL=ValidationPeriod.js.map