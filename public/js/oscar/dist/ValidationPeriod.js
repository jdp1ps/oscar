(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ValidationPeriod=e():t.ValidationPeriod=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(s){if(a[s])return a[s].exports;var n=a[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,s){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{error:null,declarations:null,group:"monthLabel"}},props:{bootbox:{required:!0}},computed:{periodsPerson:function(){return this.declarations}},methods:{fetch:function(){var t=this;this.$http.get().then(function(e){var a=[];Object.keys(e.body).forEach(function(t){e.body[t].open=e.body[t].validableStep,a.push(e.body[t])}),t.declarations=a},function(e){t.error="Impossible de charger les données : "+e.body})},validate:function(t){var e=this;this.bootbox.confirm("Valider cette déclaration ?",function(a){a&&e.send("valid",t,"")})},reject:function(t){var e=this;this.bootbox.prompt("Refuser cette déclaration ?",function(a){a&&e.send("reject",t,a)})},send:function(t,e,a){var s=this,n=new FormData;n.append("period_id",e),n.append("action",t),n.append("message",a),this.$http.post("",n).then(function(t){s.fetch()},function(t){s.error="Erreur : "+t.body})}},mounted:function(){this.fetch()}}},function(t,e,a){t.exports=a(2)},function(t,e,a){"use strict";function s(t){a(3)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(0),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);var r=a(5),c=a(4),l=s,d=c(i.a,r.a,!1,l,null,null);e.default=d.exports},function(t,e){},function(t,e){t.exports=function(t,e,a,s,n,i){var o,r=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(o=t,r=t.default);var l="function"==typeof r?r.options:r;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),a&&(l.functional=!0),n&&(l._scopeId=n);var d;if(i?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},l._ssrRegister=d):s&&(d=s),d){var _=l.functional,u=_?l.render:l.beforeCreate;_?(l._injectStyles=d,l.render=function(t,e){return d.call(e),u(t,e)}):l.beforeCreate=u?[].concat(u,d):[d]}return{esModule:o,exports:r,options:l}}},function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.error?a("div",{staticClass:"overlay",staticStyle:{"z-index":"2002"}},[a("div",{staticClass:"content container overlay-content"},[t._m(0),t._v(" "),a("pre",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]),t._v(" "),a("p",{staticClass:"text-danger"},[t._v("\n                Si ce message ne vous aide pas, transmettez le à l'administrateur Oscar.\n            ")]),t._v(" "),a("nav",{staticClass:"buttons"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){t.error=""}}},[t._v("Fermer")])])])]):t._e(),t._v(" "),t.declarations&&t.declarations.length?a("section",{staticClass:"validation"},t._l(t.periodsPerson,function(e){return a("section",[a("h3",{class:{"has-validation":e.validableStep},on:{click:function(t){e.open=!e.open}}},[a("strong",{staticClass:"person"},[a("i",{staticClass:"icon-user"}),t._v(" "+t._s(e.person))]),t._v(" "),a("strong",{staticClass:"period"},[a("i",{staticClass:"icon-calendar"}),t._v(" "+t._s(t._f("period")(e.period)))]),t._v(" "),e.validableStep?a("small",[a("i",{staticClass:"icon-clock"}),t._v("\n                    Validation à faire\n                ")]):t._e()]),t._v(" "),a("transition",{attrs:{name:"slide"}},[a("section",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"period.open"}],staticClass:"activity card"},[a("table",{staticClass:"table table-condensed"},[a("thead",{staticClass:"heading-days"},[a("th",[t._v("~")]),t._v(" "),t._l(e.details,function(e,s){return a("th",{class:{locked:e.locked}},[a("small",[t._v(t._s(e.label))]),t._v(" "),a("strong",[t._v(t._s(s))])])}),t._v(" "),a("th",[t._v("Total")]),t._v(" "),a("th",{staticStyle:{width:"150px"}},[a("i",{staticClass:"icon-cog"}),t._v(" Validation")])],2),t._v(" "),a("tbody",[t._l(e.declarations_activities,function(s){return[a("tr",{staticClass:"heading-activity heading"},[a("th",{attrs:{colspan:e.totalDays+3}},[a("i",{staticClass:"icon-cube"}),t._v(t._s(s.label)+"\n                            ")])]),t._v(" "),t._l(s.workpackages,function(s){return a("tr",{staticClass:"datas"},[a("th",{attrs:{title:s.label}},[a("i",{staticClass:"icon-archive"}),t._v(t._s(s.code))]),t._v(" "),t._l(e.totalDays,function(e){return a("td",[s.timesheets[e]?a("strong",[t._v(t._s(t._f("duration2")(s.timesheets[e])))]):a("em",[t._v("-")])])}),t._v(" "),a("th",{staticClass:"total"},[t._v("\n                                "+t._s(t._f("duration2")(s.total))+"\n                            ")]),t._v(" "),a("th",[t._v("-")])],2)}),t._v(" "),a("tr",[a("th",{attrs:{colspan:e.totalDays-1}},[t._v("\n                                    Total pour "),a("i",{staticClass:"icon-cube"}),t._v(t._s(s.label)+"\n                                ")]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v("Actions")]),t._v(" "),a("th",{staticClass:"total"},[t._v("\n                                    "+t._s(t._f("duration2")(s.total))+"\n                                ")]),t._v(" "),a("th",[a("small",[a("i",{class:"icon-"+s.status}),t._v(" "+t._s(s.statusMessage))]),t._v(" "),s.validableStep?a("span",[s.validableStep?a("button",{staticClass:"btn btn-success btn-xs",on:{click:function(e){t.validate(s.validationperiod_id)}}},[t._v("Valider")]):t._e(),t._v(" "),s.validableStep?a("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(e){t.reject(s.validationperiod_id)}}},[t._v("Rejeter")]):t._e()]):a("span",[s.validabe?a("span",[0==s.validators.length?a("span",{staticClass:"text-danger"},[a("i",{staticClass:"icon-attention-1"}),t._v(" Aucun validateur pour cette étape, contacter l'administrateur Oscar pour corriger le problème\n                                            ")]):a("div",t._l(s.validators,function(e){return a("span",{staticClass:"cartouche xs"},[t._v(t._s(e))])}))]):t._e()])])])]}),t._v(" "),e.declarations_others?[a("tr",{staticClass:"heading-activity heading"},[a("th",{attrs:{colspan:e.totalDays+3}},[a("i",{staticClass:"icon-tags"}),t._v("Hors-lot")])]),t._v(" "),t._l(e.declarations_others,function(s,n){return a("tr",{staticClass:"datas"},[a("th",[a("i",{staticClass:"hors-lot",class:"icon-"+n}),t._v(t._s(s.label))]),t._v(" "),t._l(e.totalDays,function(e){return a("td",[s.timesheets[e]?a("strong",[t._v(t._s(t._f("duration2")(s.timesheets[e])))]):a("em",[t._v("-")])])}),t._v(" "),a("th",{staticClass:"total"},[t._v("\n                                    "+t._s(t._f("duration2")(s.total))+"\n                                ")]),t._v(" "),a("th",[a("small",[a("i",{class:"icon-"+s.status}),t._v(" "+t._s(s.statusMessage))]),t._v(" "),s.validableStep?a("span",[a("button",{staticClass:"btn btn-success btn-xs",on:{click:function(e){t.validate(s.validationperiod_id)}}},[t._v("Valider")]),t._v(" "),a("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(e){t.reject(s.validationperiod_id)}}},[t._v("Rejeter")])]):s.validabe?a("span",[0==s.validators.length?a("span",[a("i",{staticClass:"icon-attention-1"}),t._v(" Aucun validateur pour cette étape, contacter l'administrateur Oscar pour corriger le problème\n                                        ")]):a("div",t._l(s.validators,function(e){return a("span",{staticClass:"cartouche xs"},[t._v(t._s(e))])}))]):t._e()])],2)})]:t._e(),t._v(" "),e.declarations_off?[a("tr",{staticClass:"heading-activity heading"},[a("th",{attrs:{colspan:e.totalDays+2}},[a("i",{staticClass:"icon-lock"}),t._v("Autres déclarations ")])]),t._v(" "),a("tr",{staticClass:"datas"},[a("th",[a("small",[t._v("Vous ne pouvez pas voir le détails pour ces créneaux")])]),t._v(" "),t._l(e.totalDays,function(s){return a("td",[e.declarations_off.timesheets[s]?a("strong",[t._v(t._s(t._f("duration2")(e.declarations_off.timesheets[s])))]):a("em",[t._v("-")])])}),t._v(" "),a("th",{staticClass:"total"},[t._v("\n                                    "+t._s(t._f("duration2")(e.declarations_off.total))+"\n                                ")]),t._v(" "),a("th",[t._v("~")])],2)]:t._e()],2),t._v(" "),a("tfoot",[a("tr",{staticClass:"total-row"},[a("th",[t._v("Total période")]),t._v(" "),t._l(e.details,function(e,s){return a("th",{class:{locked:e.locked}},[a("strong",[t._v(t._s(t._f("duration2")(e.duration))),a("small",[t._v("/ "+t._s(t._f("duration2")(e.dayLength)))])])])}),t._v(" "),a("th",{staticClass:"total"},[t._v(t._s(t._f("duration2")(e.total)))]),t._v(" "),a("th",[t._v("-")])],2)])])])])],1)})):a("section",{staticClass:"alert alert-info"},[t._v("\n        Aucune déclaration en attente\n    ")])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",[a("i",{staticClass:"icon-attention-1"}),t._v(" Oups !")])}],i={render:s,staticRenderFns:n};e.a=i}])});
//# sourceMappingURL=ValidationPeriod.js.map