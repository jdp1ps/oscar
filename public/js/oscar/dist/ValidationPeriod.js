(function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.validationperiod=n():t.validationperiod=n()})("undefined"!=typeof self?self:this,function(){return function(t){function n(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}var e={};return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="/",n(n.s=1)}([function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={data:function(){return{error:null,declarations:null,group:"monthLabel"}},props:{bootbox:{required:!0}},computed:{subgroup:function(){return"monthLabel"==this.group?"person":"monthLabel"},grouped:function(){var t=this,n={};return this.declarations&&this.declarations.forEach(function(e){var a=e[t.group];n.hasOwnProperty(a)||(n[a]={label:e[a],declarations:[],maxDays:0}),e.sublabel=e[t.subgroup],n[a].declarations.push(e),n[a].maxDays=Math.max(n[a].maxDays,e.totalDays)}),n}},methods:{fetch:function(){var t=this;this.$http.get().then(function(n){console.log(n),t.declarations=n.body.packages},function(t){console.log("ERROR",t)})},validate:function(t){var n=this;this.bootbox.confirm("Valider cette déclaration ?",function(e){e&&n.send("valid",t,"")})},reject:function(t){var n=this;this.bootbox.prompt("Refuser cette déclaration ?",function(e){e&&n.send("reject",t,e)})},send:function(t,n,e){var a=this,s=new FormData;s.append("period_id",n),s.append("action",t),s.append("message",e),this.$http.post("",s).then(function(t){a.fetch()},function(t){a.error="Erreur : "+t.body})}},mounted:function(){this.fetch()}}},function(t,n,e){t.exports=e(2)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e(0),s=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(n,t,function(){return a[t]})}(o);var r=e(4),i=e(3),c=i(s.a,r.a,!1,null,null,null);n.default=c.exports},function(t,n){t.exports=function(t,n,e,a,s,o){var r,i=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(r=t,i=t.default);var l="function"==typeof i?i.options:i;n&&(l.render=n.render,l.staticRenderFns=n.staticRenderFns,l._compiled=!0),e&&(l.functional=!0),s&&(l._scopeId=s);var u;if(o?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=u):a&&(u=a),u){var d=l.functional,_=d?l.render:l.beforeCreate;d?(l._injectStyles=u,l.render=function(t,n){return u.call(n),_(t,n)}):l.beforeCreate=_?[].concat(_,u):[u]}return{esModule:r,exports:i,options:l}}},function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t.error?e("div",{staticClass:"overlay",staticStyle:{"z-index":"2002"}},[e("div",{staticClass:"content container overlay-content"},[t._m(0),t._v(" "),e("pre",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]),t._v(" "),e("p",{staticClass:"text-danger"},[t._v("\n                Si ce message ne vous aide pas, transmettez le à l'administrateur Oscar.\n            ")]),t._v(" "),e("nav",{staticClass:"buttons"},[e("button",{staticClass:"btn btn-primary",on:{click:function(n){t.error=""}}},[t._v("Fermer")])])])]):t._e(),t._v(" "),t.declarations&&t.declarations.length?e("section",[e("a",{staticClass:"btn btn-xs btn-default",attrs:{href:"#"},on:{click:function(n){t.group="person"}}},[t._v("\n            par personne\n        ")]),t._v(" "),e("a",{staticClass:"btn btn-xs btn-default",attrs:{href:"#"},on:{click:function(n){t.group="monthLabel"}}},[t._v("\n            par période\n        ")]),t._v(" "),t._l(t.grouped,function(n,a){return e("section",{staticClass:"card card-xs"},[e("h1",[t._v(t._s(a))]),t._v(" "),e("table",{staticClass:"table table-bordered validations-table"},[e("thead",[e("tr",[e("th",[t._v(t._s(a))]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("\n                           ~\n                        ")]),t._v(" "),t._l(n.maxDays,function(n){return e("th",[t._v("\n                            "+t._s(n)+"\n                        ")])}),t._v(" "),e("th",[t._v("Total")]),t._v(" "),e("th",[t._v("\n                            Actions\n                        ")])],2)]),t._v(" "),e("tbody",t._l(n.declarations,function(a){return e("tr",[e("th",[t._v(t._s(a.sublabel))]),t._v(" "),e("th",[t._v(t._s(a.label))]),t._v(" "),e("td",[t._l(a.totalWps,function(n,a){return e("small",{staticClass:"lot"},[e("i",{staticClass:"icon-archive"}),t._v(t._s(a))])}),t._v(" "),e("strong",{staticClass:"lotsTotal"},[t._v("Total")])],2),t._v(" "),t._l(n.maxDays,function(n){return e("td",[a.days[n]?e("span",[t._l(a.days[n].details,function(n,a){return e("small",{staticClass:"lot",attrs:{title:"Total pour le lot : "+a}},[t._v("\n                                    "+t._s(t._f("duration")(n))+"\n                                ")])}),t._v(" "),e("strong",{staticClass:"lotsTotal"},[t._v("\n                                    "+t._s(t._f("duration")(a.days[n].total))+"\n                                ")])],2):e("em",[t._v("-")])])}),t._v(" "),e("td",[t._l(a.totalWps,function(n,a){return e("small",{staticClass:"lot"},[e("i",{staticClass:"icon-archive"}),t._v(t._s(t._f("duration")(n)))])}),t._v(" "),e("strong",{staticClass:"lotsTotal"},[t._v(t._s(t._f("duration")(a.total)))])],2),t._v(" "),e("td",["valid"==a.validation.status?e("span",[e("i",{staticClass:"icon-ok-circled"}),t._v(" Validé\n                            ")]):"conflict"==a.validation.status?e("span",[e("i",{staticClass:"icon-minus-circled"}),t._v(" Refusé\n                            ")]):e("span",[e("button",{staticClass:"btn btn-success btn-xs",on:{click:function(n){t.validate(a.period_id)}}},[t._v("Valider")]),t._v(" "),e("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(n){t.reject(a.period_id)}}},[t._v("Rejeter")])])])],2)}))])])})],2):e("section",{staticClass:"alert alert-info"},[t._v("\n        Aucune déclaration en attente\n    ")])])},s=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("h2",[e("i",{staticClass:"icon-attention-1"}),t._v(" Oups !")])}],o={render:a,staticRenderFns:s};n.a=o}])});
//# sourceMappingURL=ValidationPeriod.js.map