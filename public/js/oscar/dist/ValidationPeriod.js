(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.validationperiod=e():t.validationperiod=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{error:null,declarations:null,group:"monthLabel"}},props:{bootbox:{required:!0}},computed:{subgroup:function(){return"monthLabel"==this.group?"person":"monthLabel"},grouped:function(){var t=this,e={};return this.declarations&&this.declarations.forEach(function(n){var r=n[t.group];e.hasOwnProperty(r)||(e[r]={label:n[r],declarations:[],maxDays:0}),n.sublabel=n[t.subgroup],e[r].declarations.push(n),e[r].maxDays=Math.max(e[r].maxDays,n.totalDays)}),e}},methods:{fetch:function(){var t=this;this.$http.get().then(function(e){console.log(e),t.declarations=e.body.packages},function(t){console.log("ERROR",t)})},validate:function(t){var e=this;this.bootbox.confirm("Valider cette déclaration ?",function(n){n&&e.send("valid",t,"")})},reject:function(t){var e=this;this.bootbox.prompt("Refuser cette déclaration ?",function(n){n&&e.send("reject",t,n)})},send:function(t,e,n){var r=this,o=new FormData;o.append("period_id",e),o.append("action",t),o.append("message",n),this.$http.post("",o).then(function(t){r.fetch()},function(t){r.error="Erreur : "+t.body})}},mounted:function(){this.fetch()}}},function(t,e,n){t.exports=n(2)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);var s=n(4),i=n(3),c=i(o.a,s.a,!1,null,null,null);e.default=c.exports},function(t,e){t.exports=function(t,e,n,r,o,a){var s,i=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(s=t,i=t.default);var u="function"==typeof i?i.options:i;e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0),n&&(u.functional=!0),o&&(u._scopeId=o);var l;if(a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):r&&(l=r),l){var d=u.functional,f=d?u.render:u.beforeCreate;d?(u._injectStyles=l,u.render=function(t,e){return l.call(e),f(t,e)}):u.beforeCreate=f?[].concat(f,l):[l]}return{esModule:s,exports:i,options:u}}},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.error?n("div",{staticClass:"overlay",staticStyle:{"z-index":"2002"}},[n("div",{staticClass:"content container overlay-content"},[t._m(0),t._v(" "),n("pre",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]),t._v(" "),n("p",{staticClass:"text-danger"},[t._v("\n                Si ce message ne vous aide pas, transmettez le à l'administrateur Oscar.\n            ")]),t._v(" "),n("nav",{staticClass:"buttons"},[n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.error=""}}},[t._v("Fermer")])])])]):t._e(),t._v(" "),t.declarations&&t.declarations.length?n("section",[n("a",{staticClass:"btn btn-xs btn-default",attrs:{href:"#"},on:{click:function(e){t.group="person"}}},[t._v("\n            par personne\n        ")]),t._v(" "),n("a",{staticClass:"btn btn-xs btn-default",attrs:{href:"#"},on:{click:function(e){t.group="monthLabel"}}},[t._v("\n            par période\n        ")]),t._v(" "),t._l(t.grouped,function(e,r){return n("section",{staticClass:"card card-xs"},[n("h1",[t._v(t._s(r))]),t._v(" "),n("table",{staticClass:"table table-bordered"},[n("thead",[n("tr",[n("th",[t._v(t._s(r))]),t._v(" "),n("th",[t._v("Créneaux")]),t._v(" "),t._l(e.maxDays,function(e){return n("th",[t._v("\n                            "+t._s(e)+"\n                        ")])}),t._v(" "),n("th",[t._v("Total")]),t._v(" "),n("th",[t._v("\n                            Actions\n                        ")])],2)]),t._v(" "),n("tbody",t._l(e.declarations,function(r){return n("tr",[n("th",[t._v(t._s(r.sublabel))]),t._v(" "),n("th",[t._v(t._s(r.label))]),t._v(" "),t._l(e.maxDays,function(e){return n("td",[r.days[e]?n("strong",[t._v(t._s(t._f("duration")(r.days[e].total)))]):n("em",[t._v("-")])])}),t._v(" "),n("td",[t._v(t._s(t._f("duration")(r.total)))]),t._v(" "),n("td",["valid"==r.validation.status?n("span",[n("i",{staticClass:"icon-ok-circled"}),t._v(" Validé\n                            ")]):"conflict"==r.validation.status?n("span",[n("i",{staticClass:"icon-minus-circled"}),t._v(" Refusé\n                            ")]):n("span",[n("button",{staticClass:"btn btn-success btn-xs",on:{click:function(e){t.validate(r.period_id)}}},[t._v("Valider")]),t._v(" "),n("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(e){t.reject(r.period_id)}}},[t._v("Rejeter")])])])],2)}))])])})],2):n("section",{staticClass:"alert alert-info"},[t._v("\n        Aucune déclaration en attente\n    ")])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[n("i",{staticClass:"icon-attention-1"}),t._v(" Oups !")])}],a={render:r,staticRenderFns:o};e.a=a}])});
//# sourceMappingURL=ValidationPeriod.js.map