(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ValidationPeriod=e():t.ValidationPeriod=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{error:null,declarations:null,group:"monthLabel"}},props:{bootbox:{required:!0}},computed:{periodsPerson:function(){return this.declarations}},methods:{fetch:function(){var t=this;this.$http.get().then(function(e){t.declarations=e.body},function(e){t.error="Impossible de charger les données : "+e.body})},validate:function(t){var e=this;this.bootbox.confirm("Valider cette déclaration ?",function(n){n&&e.send("valid",t,"")})},reject:function(t){var e=this;this.bootbox.prompt("Refuser cette déclaration ?",function(n){n&&e.send("reject",t,n)})},send:function(t,e,n){var a=this,s=new FormData;s.append("period_id",e),s.append("action",t),s.append("message",n),this.$http.post("",s).then(function(t){a.fetch()},function(t){a.error="Erreur : "+t.body})}},mounted:function(){this.fetch()}}},function(t,e,n){t.exports=n(2)},function(t,e,n){"use strict";function a(t){n(3)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),i=n.n(s);for(var o in s)"default"!==o&&function(t){n.d(e,t,function(){return s[t]})}(o);var r=n(5),c=n(4),l=a,_=c(i.a,r.a,!1,l,null,null);e.default=_.exports},function(t,e){},function(t,e){t.exports=function(t,e,n,a,s,i){var o,r=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(o=t,r=t.default);var l="function"==typeof r?r.options:r;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),s&&(l._scopeId=s);var _;if(i?(_=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},l._ssrRegister=_):a&&(_=a),_){var d=l.functional,u=d?l.render:l.beforeCreate;d?(l._injectStyles=_,l.render=function(t,e){return _.call(e),u(t,e)}):l.beforeCreate=u?[].concat(u,_):[_]}return{esModule:o,exports:r,options:l}}},function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.error?n("div",{staticClass:"overlay",staticStyle:{"z-index":"2002"}},[n("div",{staticClass:"content container overlay-content"},[t._m(0),t._v(" "),n("pre",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]),t._v(" "),n("p",{staticClass:"text-danger"},[t._v("\n                Si ce message ne vous aide pas, transmettez le à l'administrateur Oscar.\n            ")]),t._v(" "),n("nav",{staticClass:"buttons"},[n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.error=""}}},[t._v("Fermer")])])])]):t._e(),t._v(" "),t.declarations&&t.declarations.length?n("section",{staticClass:"validation"},t._l(t.periodsPerson,function(e){return n("section",[n("h2",[n("strong",{staticClass:"person"},[n("i",{staticClass:"icon-user"}),t._v(" "+t._s(e.person))]),t._v(" "),n("strong",{staticClass:"period"},[n("i",{staticClass:"icon-calendar"}),t._v(" "+t._s(t._f("period")(e.period)))])]),t._v(" "),n("section",{staticClass:"activity card"},[n("table",{staticClass:"table table-condensed"},[n("thead",{staticClass:"heading-days"},[n("th",[t._v("~")]),t._v(" "),t._l(e.details,function(e,a){return n("th",{class:{locked:e.locked}},[n("small",[t._v(t._s(e.label))]),t._v(" "),n("strong",[t._v(t._s(a))])])}),t._v(" "),n("th",[t._v("Total")]),t._v(" "),t._m(1,!0)],2),t._v(" "),n("tbody",[t._l(e.declarations_activities,function(a){return[n("tr",{staticClass:"heading-activity heading"},[n("th",{attrs:{colspan:e.totalDays+3}},[n("i",{staticClass:"icon-cube"}),t._v(t._s(a.label)+"\n                            ")])]),t._v(" "),t._l(a.workpackages,function(a){return n("tr",{staticClass:"datas"},[n("th",{attrs:{title:a.label}},[n("i",{staticClass:"icon-archive"}),t._v(t._s(a.code))]),t._v(" "),t._l(e.totalDays,function(e){return n("td",[a.timesheets[e]?n("strong",[t._v(t._s(t._f("duration2")(a.timesheets[e])))]):n("em",[t._v("-")])])}),t._v(" "),n("th",[t._v("\n                                "+t._s(a.total)+"\n                            ")]),t._v(" "),n("th",[t._v("-")])],2)}),t._v(" "),n("tr",[n("th",{attrs:{colspan:e.totalDays-1}},[t._v("\n                                    Total pour "),n("i",{staticClass:"icon-cube"}),t._v(t._s(a.label)+"\n                                ")]),t._v(" "),n("th",{attrs:{colspan:"2"}},[t._v("Actions")]),t._v(" "),n("th",[t._v("\n                                    "+t._s(t._f("duration2")(a.total))+"\n                                ")]),t._v(" "),n("th",[n("small",[n("i",{class:"icon-"+a.status}),t._v(" "+t._s(a.statusMessage))]),t._v(" "),a.validableStep?n("span",[a.validableStep?n("button",{staticClass:"btn btn-success btn-xs",on:{click:function(e){t.validate(a.validationperiod_id)}}},[t._v("Valider")]):t._e(),t._v(" "),a.validableStep?n("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(e){t.reject(a.validationperiod_id)}}},[t._v("Rejeter")]):t._e()]):n("span",[a.validabe?n("span",[0==a.validators.length?n("span",{staticClass:"text-danger"},[n("i",{staticClass:"icon-attention-1"}),t._v(" Aucun validateur pour cette étape, contacter l'administrateur Oscar pour corriger le problème\n                                            ")]):n("div",t._l(a.validators,function(e){return n("span",{staticClass:"cartouche xs"},[t._v(t._s(e))])}))]):t._e()])])])]}),t._v(" "),e.declarations_others?[n("tr",{staticClass:"heading-activity heading"},[n("th",{attrs:{colspan:e.totalDays+3}},[n("i",{staticClass:"icon-tags"}),t._v("Hors-lot")])]),t._v(" "),t._l(e.declarations_others,function(a,s){return n("tr",{staticClass:"datas"},[n("th",[n("i",{staticClass:"hors-lot",class:"icon-"+s}),t._v(t._s(a.label))]),t._v(" "),t._l(e.totalDays,function(e){return n("td",[a.timesheets[e]?n("strong",[t._v(t._s(t._f("duration2")(a.timesheets[e])))]):n("em",[t._v("-")])])}),t._v(" "),n("th",[t._v("\n                                    "+t._s(a.total)+"\n                                ")]),t._v(" "),n("th",[n("small",[n("i",{class:"icon-"+a.status}),t._v(" "+t._s(a.statusMessage))]),t._v(" "),a.validableStep?n("span",[n("button",{staticClass:"btn btn-success btn-xs",on:{click:function(e){t.validate(a.validationperiod_id)}}},[t._v("Valider")]),t._v(" "),n("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(e){t.reject(a.validationperiod_id)}}},[t._v("Rejeter")])]):a.validabe?n("span",[0==a.validators.length?n("span",[n("i",{staticClass:"icon-attention-1"}),t._v(" Aucun validateur pour cette étape, contacter l'administrateur Oscar pour corriger le problème\n                                        ")]):n("div",t._l(a.validators,function(e){return n("span",{staticClass:"cartouche xs"},[t._v(t._s(e))])}))]):t._e()])],2)})]:t._e(),t._v(" "),e.declarations_off?[n("tr",{staticClass:"heading-activity heading"},[n("th",{attrs:{colspan:e.totalDays+2}},[n("i",{staticClass:"icon-lock"}),t._v("Autres déclarations ")])]),t._v(" "),n("tr",{staticClass:"datas"},[t._m(2,!0),t._v(" "),t._l(e.totalDays,function(a){return n("td",[e.declarations_off.timesheets[a]?n("strong",[t._v(t._s(t._f("duration2")(e.declarations_off.timesheets[a])))]):n("em",[t._v("-")])])}),t._v(" "),n("th",[t._v("\n                                    "+t._s(e.declarations_off.total)+"\n                                ")]),t._v(" "),t._m(3,!0)],2)]:t._e()],2),t._v(" "),n("tfoot",[n("tr",{staticClass:"total-row"},[n("th",[t._v("Total période")]),t._v(" "),t._l(e.details,function(e,a){return n("th",{class:{locked:e.locked}},[n("strong",[t._v(t._s(t._f("duration2")(e.duration))),n("small",[t._v("/ "+t._s(t._f("duration2")(e.dayLength)))])])])}),t._v(" "),n("th",[t._v(t._s(t._f("duration2")(e.total)))]),t._v(" "),n("th",[t._v("-")])],2)])])])])})):n("section",{staticClass:"alert alert-info"},[t._v("\n        Aucune déclaration en attente\n    ")])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[n("i",{staticClass:"icon-attention-1"}),t._v(" Oups !")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",{staticStyle:{"max-width":"150px"}},[n("i",{staticClass:"icon-cog"}),t._v(" Validation")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("small",[t._v("~")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("small",[t._v("Vous ne pouvez pas voir le détails pour ces créneaux")])])}],i={render:a,staticRenderFns:s};e.a=i}])});
//# sourceMappingURL=ValidationPeriod.js.map