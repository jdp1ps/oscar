(function(t,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.ResumeActivity=s():t.ResumeActivity=s()})("undefined"!=typeof self?self:this,function(){return function(t){function s(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,s),n.l=!0,n.exports}var e={};return s.m=t,s.c=e,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},s.p="/",s(s.s=1)}([function(t,s,e){"use strict";var a={none:"Non-envoyée","send-prj":"Validation projet","send-sci":"Validation scientifique","send-adm":"Validation administrative",conflict:"Conflit",valid:"Validée"};s.a={data:function(){return{datas:null,details:null}},filters:{state:function(t){return a[t]}},computed:{grouped:function(){var t=this,s={};return Object.keys(this.datas.periods).forEach(function(e){var a=e.split("-"),n=a[0],o=t.datas.periods[e];s.hasOwnProperty(n)||(s[n]={year:n,total:0,totalWps:{},months:{}},Object.keys(t.datas.workspackages).forEach(function(t){s[n].totalWps[t]=0}));var i={period:e,total:0,totalWps:{},days:o.days,persons:{}};o.total>0&&(Object.keys(t.datas.workspackages).forEach(function(t){i.totalWps[t]=0}),Object.keys(o.persons).forEach(function(t){var a=o.persons[t];if(a.total>0){var r={id:t,displayname:a.displayname,period:e,state:a.validation_state,total:0,totalWps:{},details:a.details},l={};Object.keys(a.details).forEach(function(t){Object.keys(a.details[t]).forEach(function(s){l.hasOwnProperty(s)||(l[s]=0),l[s]+=a.details[t][s]})}),r.days=l,Object.keys(a.workpackages).forEach(function(t){var e=a.workpackages[t];s[n].total+=e,s[n].totalWps[t]+=e,r.totalWps[t]=e,i.totalWps[t]+=e,r.total+=e,i.total+=e}),i.persons[t]=r}})),s[n].months[e]=i}),s}},methods:{handlerTimesheetDL:function(t){document.location="/feuille-de-temps/excel?action=export&period="+t.period+"&personid="+t.id},displayDetails:function(t,s){this.details={month:t,person:s}},fetch:function(){var t=this;this.$http.get("").then(function(s){t.datas=s.body},function(t){console.log(t)})}},mounted:function(){this.fetch()}}},function(t,s,e){t.exports=e(2)},function(t,s,e){"use strict";function a(t){e(3)}Object.defineProperty(s,"__esModule",{value:!0});var n=e(0),o=e(5),i=e(4),r=a,l=i(n.a,o.a,!1,r,null,null);s.default=l.exports},function(t,s){},function(t,s){t.exports=function(t,s,e,a,n,o){var i,r=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(i=t,r=t.default);var c="function"==typeof r?r.options:r;s&&(c.render=s.render,c.staticRenderFns=s.staticRenderFns,c._compiled=!0),e&&(c.functional=!0),n&&(c._scopeId=n);var d;if(o?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=d):a&&(d=a),d){var u=c.functional,_=u?c.render:c.beforeCreate;u?(c._injectStyles=d,c.render=function(t,s){return d.call(s),_(t,s)}):c.beforeCreate=_?[].concat(_,d):[d]}return{esModule:i,exports:r,options:c}}},function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("transition",{attrs:{name:"fade"}},[t.details?e("div",{staticClass:"overlay"},[e("div",{staticClass:"overlay-content"},[e("a",{staticClass:"overlay-closer",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.details=null}}},[e("i",{staticClass:"icon-cancel-outline"})]),t._v(" "),e("h1",[e("i",{staticClass:"icon-cube"}),t._v(" "),e("strong",[t._v(t._s(t.datas.acronym)+" "),e("br"),e("small",[t._v(t._s(t.datas.label))])])]),t._v(" "),e("h2",[t._v("\n                Déclaration pour\n                "+t._s(t._f("period")(t.details.month.period))+" - "),e("strong",[t._v(t._s(t.details.person.displayname))])]),t._v(" "),e("div",{staticClass:"alert alert-info"},[t._v("\n                État de la déclaration : "),e("strong",[e("i",{class:"icon-"+t.details.person.state}),t._v("\n                    "+t._s(t._f("state")(t.details.person.state))+"\n                ")])]),t._v(" "),e("table",{staticClass:"table-bordered table details"},[e("thead",{staticStyle:{"font-size":".7em"}},[e("tr",[e("th",[t._v(" ")]),t._v(" "),t._l(t.details.month.days,function(s,a){return e("th",[e("small",[t._v(t._s(s))]),t._v(" "),e("strong",[t._v(t._s(a))])])}),t._v(" "),e("th",[t._v("Total")])],2)]),t._v(" "),e("tbody",t._l(t.datas.workspackages,function(s){return e("tr",[e("th",[t._v(t._s(s.code))]),t._v(" "),t._l(t.details.month.days,function(a,n){return e("td",{staticClass:"duration"},[t.details.person.details[s.id]&&t.details.person.details[s.id][n]?e("strong",[t._v("\n                                "+t._s(t._f("duration2")(t.details.person.details[s.id][n]))+"\n                            ")]):e("small",[t._v("\n                                -\n                            ")])])}),t._v(" "),e("td",[t.details.person.totalWps[s.id]?e("strong",{staticClass:"duration total"},[t._v(t._s(t._f("duration2")(t.details.person.totalWps[s.id])))]):e("small",[t._v("0.0")])])],2)}),0),t._v(" "),e("tfoot",[e("tr",[e("th",[t._v(" ")]),t._v(" "),t._l(t.details.month.days,function(s,a){return e("td",{staticClass:"duration total"},[t.details.person.days[a]?e("strong",[t._v("\n                                "+t._s(t._f("duration2")(t.details.person.days[a]))+"\n                            ")]):e("small",{staticClass:"nothing"},[t._v("\n                                0.0\n                            ")])])}),t._v(" "),e("td",{staticClass:"total duration"},[e("strong",[t._v(t._s(t._f("duration2")(t.details.person.total)))])])],2)])])])]):t._e()]),t._v(" "),t.datas?t._l(t.grouped,function(s,a){return e("div",{staticClass:"year"},[e("h1",[t._v(t._s(a))]),t._v(" "),t._l(s.months,function(s,a){return e("section",{staticClass:"month card"},[e("div",{staticClass:"line line-heading"},[e("strong",{staticClass:"line-label"},[t._v(t._s(t._f("period")(a)))]),t._v(" "),t._l(s.totalWps,function(s,a){return e("span",[t._v(t._s(t.datas.workspackages[a].code))])}),t._v(" "),e("span",{staticClass:"total duration"},[t._v(" ")])],2),t._v(" "),s.total>0?t._l(s.persons,function(a){return e("div",{staticClass:"line line-datas",class:a.state,on:{click:function(e){return e.preventDefault(),t.displayDetails(s,a)}}},[e("strong",{staticClass:"line-label"},[e("i",{staticClass:"icon-user"}),t._v("\n                            "+t._s(a.displayname)+"\n                            "),e("small",{staticClass:"state",class:"state-"+a.state},[e("i",{class:"icon-"+a.state}),t._v("\n                                "+t._s(t._f("state")(a.state))+"\n                            ")]),t._v(" "),"valid"==a.state?e("a",{on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.handlerTimesheetDL(a)}}},[e("i",{staticClass:"icon-file-excel"}),t._v("\n                                Télécharger la feuille de temps\n                            ")]):t._e()]),t._v(" "),t._l(a.totalWps,function(s){return e("span",{staticClass:"duration",class:{nothing:0==s}},[t._v("\n                            "+t._s(t._f("duration")(s))+"\n                        ")])}),t._v(" "),e("span",{staticClass:"duration total"},[a.total>0?e("strong",[t._v(t._s(t._f("duration")(a.total)))]):e("small",[t._v("0.0")])])],2)}):t._e(),t._v(" "),s.total>0?e("div",{staticClass:"line line-total"},[e("strong",{staticClass:"line-label"},[t._v("Total")]),t._v(" "),t._l(s.totalWps,function(s){return e("span",{staticClass:"duration"},[e("strong",[t._v(t._s(t._f("duration")(s)))])])}),t._v(" "),e("span",{staticClass:"total duration"},[t._v(t._s(t._f("duration")(s.total)))])],2):t._e()],2)})],2)}):t._e()],2)},n=[],o={render:a,staticRenderFns:n};s.a=o}])});
//# sourceMappingURL=ResumeActivity.js.map