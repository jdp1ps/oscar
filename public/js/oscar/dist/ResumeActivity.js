(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ResumeActivity=e():t.ResumeActivity=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(a){if(s[a])return s[a].exports;var n=s[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var s={};return e.m=t,e.c=s,e.d=function(t,s,a){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={none:"Non-envoyée","send-prj":"Validation projet","send-sci":"Validation scientifique","send-adm":"Validation administrative",conflict:"Conflit",valid:"Validée"};e.default={data:function(){return{datas:null,details:null}},filters:{state:function(t){return a[t]}},computed:{grouped:function(){var t=this,e={};return Object.keys(this.datas.periods).forEach(function(s){var a=s.split("-"),n=a[0],o=t.datas.periods[s];e.hasOwnProperty(n)||(e[n]={year:n,total:0,totalWps:{},months:{}},Object.keys(t.datas.workspackages).forEach(function(t){e[n].totalWps[t]=0}));var i={period:s,total:0,totalWps:{},days:o.days,persons:{}};o.total>0&&(Object.keys(t.datas.workspackages).forEach(function(t){i.totalWps[t]=0}),Object.keys(o.persons).forEach(function(t){var a=o.persons[t];if(a.total>0){var r={id:t,displayname:a.displayname,period:s,state:a.validation_state,total:0,totalWps:{},details:a.details},l={};Object.keys(a.details).forEach(function(t){Object.keys(a.details[t]).forEach(function(e){l.hasOwnProperty(e)||(l[e]=0),l[e]+=a.details[t][e]})}),r.days=l,Object.keys(a.workpackages).forEach(function(t){var s=a.workpackages[t];e[n].total+=s,e[n].totalWps[t]+=s,r.totalWps[t]=s,i.totalWps[t]+=s,r.total+=s,i.total+=s}),i.persons[t]=r}})),e[n].months[s]=i}),e}},methods:{handlerTimesheetDL:function(t){document.location="/feuille-de-temps/excel?action=export&period="+t.period+"&personid="+t.id},displayDetails:function(t,e){this.details={month:t,person:e}},fetch:function(){var t=this;this.$http.get("").then(function(e){t.datas=e.body},function(t){console.log(t)})}},mounted:function(){this.fetch()}}},function(t,e,s){t.exports=s(2)},function(t,e,s){"use strict";function a(t){s(3)}Object.defineProperty(e,"__esModule",{value:!0});var n=s(0),o=s.n(n);for(var i in n)"default"!==i&&function(t){s.d(e,t,function(){return n[t]})}(i);var r=s(5),l=s(4),d=a,c=l(o.a,r.a,!1,d,null,null);e.default=c.exports},function(t,e){},function(t,e){t.exports=function(t,e,s,a,n,o){var i,r=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(i=t,r=t.default);var d="function"==typeof r?r.options:r;e&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0),s&&(d.functional=!0),n&&(d._scopeId=n);var c;if(o?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=c):a&&(c=a),c){var u=d.functional,_=u?d.render:d.beforeCreate;u?(d._injectStyles=c,d.render=function(t,e){return c.call(e),_(t,e)}):d.beforeCreate=_?[].concat(_,c):[c]}return{esModule:i,exports:r,options:d}}},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("transition",{attrs:{name:"fade"}},[t.details?s("div",{staticClass:"overlay"},[s("div",{staticClass:"overlay-content"},[s("a",{staticClass:"overlay-closer",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.details=null}}},[s("i",{staticClass:"icon-cancel-outline"})]),t._v(" "),s("h1",[s("i",{staticClass:"icon-cube"}),t._v(" "),s("strong",[t._v(t._s(t.datas.acronym)+" "),s("br"),s("small",[t._v(t._s(t.datas.label))])])]),t._v(" "),s("h2",[t._v("\n                Déclaration pour\n                "+t._s(t._f("period")(t.details.month.period))+" - "),s("strong",[t._v(t._s(t.details.person.displayname))])]),t._v(" "),s("div",{staticClass:"alert alert-info"},[t._v("\n                État de la déclaration : "),s("strong",[s("i",{class:"icon-"+t.details.person.state}),t._v("\n                    "+t._s(t._f("state")(t.details.person.state))+"\n                ")])]),t._v(" "),s("table",{staticClass:"table-bordered table details"},[s("thead",{staticStyle:{"font-size":".7em"}},[s("tr",[s("th",[t._v(" ")]),t._v(" "),t._l(t.details.month.days,function(e,a){return s("th",[s("small",[t._v(t._s(e))]),t._v(" "),s("strong",[t._v(t._s(a))])])}),t._v(" "),s("th",[t._v("Total")])],2)]),t._v(" "),s("tbody",t._l(t.datas.workspackages,function(e){return s("tr",[s("th",[t._v(t._s(e.code))]),t._v(" "),t._l(t.details.month.days,function(a,n){return s("td",{staticClass:"duration"},[t.details.person.details[e.id]&&t.details.person.details[e.id][n]?s("strong",[t._v("\n                                "+t._s(t._f("duration2")(t.details.person.details[e.id][n]))+"\n                            ")]):s("small",[t._v("\n                                -\n                            ")])])}),t._v(" "),s("td",[t.details.person.totalWps[e.id]?s("strong",{staticClass:"duration total"},[t._v(t._s(t._f("duration2")(t.details.person.totalWps[e.id])))]):s("small",[t._v("0.0")])])],2)})),t._v(" "),s("tfoot",[s("tr",[s("th",[t._v(" ")]),t._v(" "),t._l(t.details.month.days,function(e,a){return s("td",{staticClass:"duration total"},[t.details.person.days[a]?s("strong",[t._v("\n                                "+t._s(t._f("duration2")(t.details.person.days[a]))+"\n                            ")]):s("small",{staticClass:"nothing"},[t._v("\n                                0.0\n                            ")])])}),t._v(" "),s("td",{staticClass:"total duration"},[s("strong",[t._v(t._s(t._f("duration2")(t.details.person.total)))])])],2)])])])]):t._e()]),t._v(" "),t.datas?t._l(t.grouped,function(e,a){return s("div",{staticClass:"year"},[s("h1",[t._v(t._s(a))]),t._v(" "),t._l(e.months,function(e,a){return s("section",{staticClass:"month card"},[s("div",{staticClass:"line line-heading"},[s("strong",{staticClass:"line-label"},[t._v(t._s(t._f("period")(a)))]),t._v(" "),t._l(e.totalWps,function(e,a){return s("span",[t._v(t._s(t.datas.workspackages[a].code))])}),t._v(" "),s("span",{staticClass:"total duration"},[t._v(" ")])],2),t._v(" "),e.total>0?t._l(e.persons,function(a){return s("div",{staticClass:"line line-datas",class:a.state,on:{click:function(s){s.preventDefault(),t.displayDetails(e,a)}}},[s("strong",{staticClass:"line-label"},[s("i",{staticClass:"icon-user"}),t._v("\n                            "+t._s(a.displayname)+"\n                            "),s("small",{staticClass:"state",class:"state-"+a.state},[s("i",{class:"icon-"+a.state}),t._v("\n                                "+t._s(t._f("state")(a.state))+"\n                            ")]),t._v(" "),"valid"==a.state?s("a",{on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.handlerTimesheetDL(a)}}},[s("i",{staticClass:"icon-file-excel"}),t._v("\n                                Télécharger la feuille de temps\n                            ")]):t._e()]),t._v(" "),t._l(a.totalWps,function(e){return s("span",{staticClass:"duration",class:{nothing:0==e}},[t._v("\n                            "+t._s(t._f("duration")(e))+"\n                        ")])}),t._v(" "),s("span",{staticClass:"duration total"},[a.total>0?s("strong",[t._v(t._s(t._f("duration")(a.total)))]):s("small",[t._v("0.0")])])],2)}):t._e(),t._v(" "),e.total>0?s("div",{staticClass:"line line-total"},[s("strong",{staticClass:"line-label"},[t._v("Total")]),t._v(" "),t._l(e.totalWps,function(e){return s("span",{staticClass:"duration"},[s("strong",[t._v(t._s(t._f("duration")(e)))])])}),t._v(" "),s("span",{staticClass:"total duration"},[t._v(t._s(t._f("duration")(e.total)))])],2):t._e()],2)})],2)}):t._e()],2)},n=[],o={render:a,staticRenderFns:n};e.a=o}])});
//# sourceMappingURL=ResumeActivity.js.map