(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OrganizationRole=t():e.OrganizationRole=t()})("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=1)}([function(e,t,n){"use strict";t.a={data:function(){return{roles:[],loadingMsg:null,form:null,manage:!1,deleteRole:null}},props:{url:{required:!0},manage:{default:!1}},computed:{loading:function(){return null!=this.loadingMsg}},methods:{formNew:function(){this.form={label:"",description:"",principal:!1}},save:function(){var e=this;this.form.id?(this.loadingMsg="Mise à jour du rôle...",this.$http.put(this.url+"/"+this.form.id,this.form).then(function(t){console.log(t.body,e.form);for(var n=0;n<e.roles.length;n++)e.roles[n].id==e.form.id&&(e.roles.splice(n,1,t.body),flashMessage("success","le rôle a bien été mis à jour."))},function(e){flashMessage("error",e.body)}).then(function(){e.loadingMsg=null,e.form=null})):(this.loadingMsg="Ajout du nouveau rôle...",this.$http.post(this.url+"",this.form).then(function(t){e.roles.push(t.body),flashMessage("success","le rôle a bien été ajouté.")},function(e){flashMessage("error",e.body)}).then(function(){e.loadingMsg=null,e.form=null}))},performDelete:function(){var e=this;this.loadingMsg="Suppression du rôle...";var t=this.deleteRole;this.$http.delete(this.url+"/"+t.id,this.form).then(function(n){e.roles.splice(e.roles.indexOf(t),1),flashMessage("success","le rôle a bien été supprimé.")},function(e){flashMessage("error",e.body)}).then(function(){e.loadingMsg=null,e.form=null,e.deleteRole=null})},remove:function(e){this.deleteRole=e},fetch:function(){var e=this;this.loadingMsg="Chargement des rôles",this.$http.get(this.url).then(function(t){console.log(t),e.roles=t.body},function(e){flashMessage("error",e.body)}).then(function(){return e.loadingMsg=null})}},created:function(){this.fetch()}}},function(e,t,n){e.exports=n(2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(4),s=n(3),i=s(r.a,o.a,!1,null,null,null);t.default=i.exports},function(e,t){e.exports=function(e,t,n,r,o,s){var i,l=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(i=e,l=e.default);var c="function"==typeof l?l.options:l;t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),o&&(c._scopeId=o);var u;if(s?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=u):r&&(u=r),u){var f=c.functional,p=f?c.render:c.beforeCreate;f?(c._injectStyles=u,c.render=function(e,t){return u.call(t),p(e,t)}):c.beforeCreate=p?[].concat(p,u):[u]}return{esModule:i,exports:l,options:c}}},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[e.loading?n("div",{staticClass:"vue-loader"},[n("span",[e._v(e._s(e.loadingMsg))])]):e._e(),e._v(" "),e.deleteRole?n("div",{staticClass:"overlay"},[n("div",{staticClass:"overlay-content container"},[n("h3",[e._v("Supprimer le role "),n("strong",[e._v(e._s(e.deleteRole.label))]),e._v(" ?")]),e._v(" "),n("nav",[n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return e.performDelete()}}},[e._v("Supprimer")]),e._v(" "),n("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){e.deleteRole=null}}},[e._v("Annuler")])])])]):e._e(),e._v(" "),n("transition",{attrs:{name:"popup"}},[e.form?n("div",{staticClass:"form-wrapper"},[n("form",{staticClass:"container oscar-form",attrs:{action:""},on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[n("header",[n("h1",[e.form.id?n("span",[e._v("Modification de "),n("strong",[e._v(e._s(e.form.label))])]):n("span",[e._v("Nouveau rôle")])]),e._v(" "),n("a",{staticClass:"closer",attrs:{href:"#"},on:{click:function(t){e.form=null}}},[n("i",{staticClass:"glyphicon glyphicon-remove"})])]),e._v(" "),n("div",{staticClass:"form-group"},[n("label",[e._v("Nom du rôle")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.label,expression:"form.label"}],staticClass:"form-control",attrs:{id:"role_roleid",type:"text",placeholder:"Role",name:"label"},domProps:{value:e.form.label},on:{input:function(t){t.target.composing||e.$set(e.form,"label",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group"},[n("label",[e._v("Principal ("),n("span",{style:{"text-decoration":e.form.principal?"underline":"line-through"}},[e._v("Activation des privilèges")]),e._v(")")]),e._v(" "),n("p",{staticClass:"alert alert-warning"},[n("i",{staticClass:"icon-help-circled"}),e._v("\n                        Un rôle définit comme principal débloque les droits des membres de l'oganisation lorsqu'elle est affectée avec ce rôle à une activités\n                    ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.principal,expression:"form.principal"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.form.principal)?e._i(e.form.principal,null)>-1:e.form.principal},on:{change:function(t){var n=e.form.principal,r=t.target,o=!!r.checked;if(Array.isArray(n)){var s=e._i(n,null);r.checked?s<0&&e.$set(e.form,"principal",n.concat([null])):s>-1&&e.$set(e.form,"principal",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.form,"principal",o)}}})]),e._v(" "),n("div",{staticClass:"form-group"},[n("label",[e._v("Description")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.description,expression:"form.description"}],staticClass:"form-control",domProps:{value:e.form.description},on:{input:function(t){t.target.composing||e.$set(e.form,"description",t.target.value)}}})]),e._v(" "),n("footer",{staticClass:"buttons-bar"},[n("div",{staticClass:"btn-group"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[n("i",{staticClass:"icon-floppy"}),e._v("\n                            Enregistrer\n                        ")]),e._v(" "),n("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){e.form=null}}},[n("i",{staticClass:"icon-block"}),e._v("\n                            Annuler\n                        ")])])])])]):e._e()]),e._v(" "),e._l(e.roles,function(t){return n("article",{staticClass:"card xs",class:{active:t.principal}},[n("h1",{staticClass:"card-title"},[n("span",[t.principal?n("i",{staticClass:"icon-asterisk"}):e._e(),e._v("\n                "+e._s(t.label)+"\n            ")])]),e._v(" "),t.principal?n("p",{staticClass:"alert alert-warning"},[n("i",{staticClass:"icon-attention-1"}),e._v("\n            Ce rôle "),n("strong",{staticStyle:{"text-decoration":"underline"}},[e._v("débloque les privilèges")]),e._v(" de ces membres lorsqu'il est utilisé pour qualifier le rôle d'une organisation sur une activité/un projet\n        ")]):e._e(),e._v(" "),n("p",[e._v(e._s(t.description))]),e._v(" "),e.manage?n("nav",{staticClass:"card-footer"},[n("button",{staticClass:"btn btn-xs btn-default",on:{click:function(n){e.form=JSON.parse(JSON.stringify(t))}}},[n("i",{staticClass:"icon-pencil"}),e._v("\n                Éditer\n            ")]),e._v(" "),n("button",{staticClass:"btn btn-xs btn-danger",on:{click:function(n){return e.remove(t)}}},[n("i",{staticClass:"icon-trash"}),e._v("\n                Supprimer\n            ")])]):e._e()])}),e._v(" "),e.manage?n("button",{staticClass:"btn btn-default",on:{click:e.formNew}},[n("i",{staticClass:"icon-circled-plus"}),e._v("\n        Ajouter un nouveau rôle\n    ")]):e._e()],2)},o=[],s={render:r,staticRenderFns:o};t.a=s}])});
//# sourceMappingURL=OrganizationRole.js.map