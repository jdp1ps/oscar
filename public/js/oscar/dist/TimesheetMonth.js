(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TimesheetMonth=e():t.TimesheetMonth=e()})("undefined"!=typeof self?self:this,function(){return function(t){function e(a){if(s[a])return s[a].exports;var n=s[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var s={};return e.m=t,e.c=s,e.d=function(t,s,a){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=8)}([function(t,e){t.exports=function(t,e,s,a,n,i){var o,r=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(o=t,r=t.default);var l="function"==typeof r?r.options:r;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),s&&(l.functional=!0),n&&(l._scopeId=n);var d;if(i?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},l._ssrRegister=d):a&&(d=a),d){var u=l.functional,v=u?l.render:l.beforeCreate;u?(l._injectStyles=d,l.render=function(t,e){return d.call(e),v(t,e)}):l.beforeCreate=v?[].concat(v,d):[d]}return{esModule:o,exports:r,options:l}}},function(t,e,s){"use strict";var a=s(11),n=new Date,i=function(){};e.a={name:"TimesheetMonth",props:{moment:{required:!0},bootbox:{required:!0},declarationInHours:{required:!0},defaultMonth:{default:n.getMonth()+1},defaultYear:{default:n.getFullYear()},defaultDayLength:{default:8},urlimport:{default:null},url:{required:!0}},components:{timesheetmonthday:s(12).default,timesheetmonthdaydetails:s(15).default,timechooser:s(22).default,wpselector:s(4).default},data:function(){return{editWindow:{display:!1,wp:null,type:"infos"},configureColor:!1,_colorsProjects:null,colors:["#0b098c","#09518c","#09858c","#098c66","#098c27","#818c09","#8c6d09","#8c4e09","#8c1109","#8c0971","#8c6f09"],copyClipboard:null,clipboardDataDay:null,showHours:!0,loading:!1,debug:null,help:!1,popup:"",screensend:null,sendaction:null,error:"",commentaire:"",fillSelectedWP:null,ts:null,month:null,year:null,dayLength:null,selectedWeek:null,rejectPeriod:null,selectedDay:null,dayMenuLeft:50,dayMenuTop:50,dayMenu:"none",selectedWP:null,selectionWP:null,selectedTime:null,dayMenuSelected:null,dayMenuTime:0,editedTimesheet:null,fillMonthWP:null}},filters:{date:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ddd DD MMMM  YYYY";return i(t).format(e)},datefull:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ddd DD MMMM  YYYY";return i(t).format(e)},day:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ddd DD";return i(t).format(e)}},computed:{projectsColors:function(){return this._colorsProjects},recapsend:function(){var t=this,e={},s={};return Object.keys(this.ts.otherWP).forEach(function(e){var a=t.ts.otherWP[e];s[a.code]={id:a.code,code:a.code,label:a.label,days:{},total:a.total}}),Object.keys(this.ts.activities).forEach(function(s){var a=t.ts.activities[s],n=a.project_id,i=a.project,o="";t.screensend&&t.screensend.hasOwnProperty(s)&&(o=t.screensend[s]),e.hasOwnProperty(n)||(e[n]={label:i,id:n,activities:{}}),e[n].activities.hasOwnProperty(a.id)||(e[n].activities[a.id]={id:a.id,label:a.label,acronym:a.acronym,total:a.total,days:{},workpackages:{},comment:o})}),Object.keys(this.ts.workpackages).forEach(function(s){var a=t.ts.workpackages[s],n=a.project_id,i=a.activity_id;e[n]&&e[n].activities[i]&&(e[n].activities[i].workpackages[a.id]={label:a.code,description:a.label,total:a.total,days:{}})}),Object.keys(this.ts.days).forEach(function(a){var n=t.ts.days[a];n.declarations.forEach(function(t){var s=t.activity_id,n=t.project_id,i=t.wp_id;e[n].activities[s].days.hasOwnProperty(a)||(e[n].activities[s].days[a]=0),e[n].activities[s].workpackages[i].days.hasOwnProperty(a)||(e[n].activities[s].workpackages[i].days[a]=0),e[n].activities[s].days[a]+=t.duration,e[n].activities[s].workpackages[i].days[a]+=t.duration}),n.othersWP&&n.othersWP.forEach(function(t){var e=t.code;s.hasOwnProperty(e)||(s[e]={days:{},total:0}),s[e].days.hasOwnProperty(a)||(s[e].days[a]=0),s[e].days[a]+=t.duration,s[e].total+=t.duration})}),{lot:e,hl:s}},monthRest:function(){return this.monthLength-this.ts.total},monthLength:function(){var t=0;for(var e in this.ts.days)t+=this.ts.days[e].dayLength;return t},dayLabel:function(){return this.selectedDay?i(this.selectedDay.data).format("dddd DD MMMM YYYY"):""},fillDayValue:function(){var t=this.selectedDay.dayLength-this.selectedDay.duration;return t<0&&(t=0),t},mois:function(){return i(this.ts.from).format("MMMM YYYY")},periodCode:function(){return this.ts.from.substr(0,7)},cssDayMenu:function(){return{display:this.dayMenu,top:this.dayMenuTop+"px",left:this.dayMenuLeft+"px"}},totalWP:function(){var t=0;for(var e in this.ts.otherWP)this.ts.otherWP[e].total&&(t+=this.ts.otherWP[e].total);return t},weeks:function(){var t=this,e=[];return this.ts&&this.ts.days&&function(){var s=t.ts.days[1],a=s.week,n={label:a,days:[],total:0,totalOpen:0,weekLength:0,editable:t.ts.editable,drafts:0,weekExcess:t.ts.weekExcess};for(var i in t.ts.days){var o=t.ts.days[i];a!=o.week&&(e.push(n),n={label:o.week,days:[],total:0,totalOpen:0,weekLength:0,drafts:0,weekExcess:t.ts.weekExcess}),a=o.week,n.total+=o.duration,o.locked||o.closed||(n.totalOpen+=o.dayLength),o.declarations&&o.declarations.forEach(function(t){2==t.status_id&&n.drafts++}),o.closed||(n.weekLength+=o.dayLength),n.days.push(o)}n.days.length&&e.push(n)}(),e}},methods:{getAcronymColor:function(t){return this._colorsProjects.hasOwnProperty(t)?this._colorsProjects[t]:"#333333"},handlerChangeColor:function(t,e){var s=JSON.parse(JSON.stringify(this._colorsProjects));s[t]=e.target.value,this._colorsProjects=s,window.localStorage&&window.localStorage.setItem("colorsprojects",JSON.stringify(this._colorsProjects)),this.$forceUpdate()},handlerFillMonth:function(t){var e=this,s=[];Object.keys(this.ts.days).forEach(function(a){var n=e.ts.days[a];n.closed||n.locked||n.duration>=n.dayLength||s.push({day:n.date,wpId:t.id,code:t.code,commentaire:"",duration:60*(n.dayLength-n.duration)})}),this.performAddDays(s)},handlerPasteDay:function(t){var e=[];this.clipboardDataDay.forEach(function(s){var a=JSON.parse(JSON.stringify(s));a.day=t.datefull,e.push(a)}),this.performAddDays(e)},handlerCopyDay:function(t){var e=[];t.declarations&&t.declarations.forEach(function(t){e.push({code:t.wpCode,comment:t.comment,duration:60*t.duration,wpId:t.wp_id})}),t.othersWP&&t.othersWP.forEach(function(t){e.push({code:t.code,comment:"",duration:60*t.duration,wpId:null})}),this.clipboardDataDay=e},editTimesheet:function(t,e){this.editedTimesheet=t,this.commentaire=t.comment,this.selectedDay=e,this.dayMenuTime=t.duration,t.wp_id?this.selectionWP=this.getWorkpackageById(t.wp_id):t.code&&(this.selectionWP=this.getHorsLotByCode(t.code))},getHorsLotByCode:function(t){return this.ts.otherWP[t]},getWorkpackageById:function(t){return this.ts.workpackages[t]},reSendPeriod:function(t){this.sendMonth("resend")},sendMonth:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sendmonth";if(this.sendaction=e,1!=this.ts.submitable&&1!=this.ts.hasConflict)return void(this.error="Vous ne pouvez pas soumettre vos déclarations pour cette période : "+this.ts.submitableInfos);var s={};Object.keys(this.ts.days).forEach(function(e){var a=t.ts.days[e];a.othersWP&&a.othersWP.length&&a.othersWP.forEach(function(t){var e=t.code;s.hasOwnProperty(e)||(s[e]=[]),t.description&&s[e].indexOf(t.description)<0&&s[e].push(t.description)}),a.declarations.forEach(function(t){var e=t.activity_id;s.hasOwnProperty(e)||(s[e]=[]),t.comment&&s[e].indexOf(t.comment)<0&&s[e].push(t.comment)})}),Object.keys(s).forEach(function(t){s[t]=" - "+s[t].join("\n - ")}),this.screensend=s},sendMonthProceed:function(){var t=this,e=new FormData;e.append("action",this.sendaction),e.append("comments",JSON.stringify(this.screensend)),e.append("datas",JSON.stringify({from:this.ts.from,to:this.ts.to})),this.loading=!0,this.$http.post("",e).then(function(e){t.fetch()},function(e){t.error=a.a.resolve("Impossible d'envoyer la période",e)}).then(function(e){t.selectedWeek=null,t.screensend=null,t.loading=!1})},fillWeek:function(t,e){var s=this,a=[];t.days.forEach(function(t){t.closed||t.locked||t.duration>=t.dayLength||a.push({day:t.date,wpId:e.id,code:e.code,commentaire:s.commentaire,duration:60*(t.dayLength-t.duration)})}),this.performAddDays(a)},fillDay:function(){},selectWeek:function(t){this.selectedDay=null,this.selectedWeek=t},deleteWeek:function(t){var e=[];t.days.forEach(function(t){t.declarations.forEach(function(t){e.push(t.id)}),t.othersWP&&t.othersWP.forEach(function(t){e.push(t.id)})}),this.performDelete(e)},deleteTimesheet:function(t){this.performDelete([t.id])},handlerPasteWeek:function(t){var e=this,s=[];t.days.forEach(function(t){e.clipboardData.forEach(function(e){if(e.day==t.day){var a=JSON.parse(JSON.stringify(e));a.day=t.datefull,s.push(a)}})}),this.performAddDays(s)},handlerCopyWeek:function(t){var e=[];t.days.forEach(function(t){t.declarations&&t.declarations.forEach(function(s){e.push({code:s.wpCode,comment:s.comment,duration:60*s.duration,day:t.day,wpId:s.wp_id})}),t.othersWP&&t.othersWP.forEach(function(s){e.push({code:s.code,comment:"",duration:60*s.duration,day:t.day,wpId:null})})}),this.clipboardData=e},handlerSaveMenuTime:function(){var t=[{id:this.editedTimesheet?this.editedTimesheet.id:null,day:this.selectedDay.date,wpId:this.selectionWP.id,duration:60*this.dayMenuTime,comment:this.commentaire,code:this.selectionWP.code}];this.performAddDays(t)},performAddDays:function(t){var e=this,s=new FormData;s.append("timesheets",JSON.stringify(t)),s.append("action","add"),this.loading="Enregistrement des créneaux",this.$http.post(this.url,s).then(function(t){e.fetch(!1)},function(t){e.error=a.a.resolve("Impossible d'enregistrer les créneaux",t)}).then(function(t){e.selectedWeek=null,e.selectionWP=null,e.loading=!1,e.commentaire="",e.editedTimesheet=null})},performDelete:function(t){var e=this;this.loading="Suppression des créneaux",this.$http.delete(this.url+"&id="+t.join(",")).then(function(t){e.fetch(!1)},function(t){e.error=a.a.resolve("Impossible de supprimer le créneau",t)}).then(function(t){e.selectedWeek=null,e.loading=!1})},handlerDayUpdated:function(){var t=arguments[0];this.dayMenuTime=t.h+t.m},handlerSelectWP:function(t){this.selectedWP=t,this.selectionWP=t,this.dayMenu="none"},hideWpSelector:function(){this.selectedWP=null,this.selectedTime=null,this.dayMenu="none"},handlerKeyDown:function(t){},handlerClick:function(){this.hideWpSelector()},handlerWpFromDetails:function(t){this.handlerSelectWP(t)},handlerDayMenu:function(t,e){this.dayMenuLeft=t.clientX,this.dayMenuTop=t.clientY,this.dayMenu="block",this.selectedDay=e},handlerSelectData:function(t){this.selectedDay=t},nextYear:function(){this.year+=1,this.fetch(!0)},nextMonth:function(){this.month+=1,this.month>12?(this.month=1,this.nextYear()):this.fetch(!0)},prevYear:function(){this.year-=1,this.fetch(!0)},prevMonth:function(){this.month-=1,this.month<1?(this.month=12,this.prevYear()):this.fetch(!0)},fetch:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading="Chargement de la période",e&&(this.selectedDay=null,this.selectedWeek=null);var s=void 0;this.selectedDay&&(s=this.selectedDay.i),this.$http.get(this.url+"&month="+this.month+"&year="+this.year).then(function(e){t.dayLength=e.body.dayLength,t.ts=e.body,s&&(t.selectedDay=t.ts.days[s]),t.selectedWP=null,t.selectionWP=null,t.fillSelectedWP=null},function(e){t.error=a.a.resolve("Impossible de charger cette période",e)}).then(function(e){t.loading=!1})}},mounted:function(){i=this.moment,this.month=this.defaultMonth,this.year=this.defaultYear,this.dayLength=this.defaultDayLength,window.localStorage&&(window.localStorage.getItem("colorsprojects")?this._colorsProjects=JSON.parse(window.localStorage.getItem("colorsprojects")):this._colorsProjects={}),this.fetch(!0)}}},function(t,e,s){"use strict";e.a={name:"TimesheetMonthDay",props:{others:{required:!0},day:{required:!0},projectscolors:{required:!0,default:null}},data:function(){return{colors:["#093b8c","#098c29","#8c2109","#4c098c","#8c0971","#8c6f09"]}},filters:{duration:function(t){var e=Math.floor(t),s=Math.round(60*(t-e));return s<10&&(s="0"+s),e+":"+s}},computed:{groupProject:function(){var t=this,e={};return this.day.declarations&&this.day.declarations.forEach(function(s){e.hasOwnProperty(s.acronym)||(e[s.acronym]={label:s.label,acronym:s.acronym,duration:0,status_id:s.status_id,color:t.getProjectColor(s.acronym)}),e[s.acronym].duration+=s.duration}),e}},methods:{getProjectColor:function(t){return this.projectscolors&&this.projectscolors.hasOwnProperty(t)?this.projectscolors[t]:"#8c0971"},totalOther:function(t){var e=0;return this.day[t].forEach(function(t){e+=t.duration}),e},handlerClick:function(){this.$emit("selectDay",this.day)},handlerRightClick:function(t){this.$emit("daymenu",t,this.day)}}}},function(t,e,s){"use strict";var a=s(4),n=s(19);e.a={name:"TimesheetMonthDayDetails",components:{wpselector:a.default,day:n.a},props:{workPackages:{require:!0},others:{require:!0},editable:{required:!0},day:{require:!0},selection:{require:!0},label:{require:!0},dayExcess:{require:!0},copiable:{default:null}},data:function(){return{formAdd:!1,debug:!1}},filters:{heures:function(t){var e=Math.floor(t),s=Math.round(60*(t-e));return s<10&&(s="0"+s),console.log(t," => ",e,"h",s),e+":"+s}},computed:{isExceed:function(){return this.total>this.day.dayLength},totalWP:function(){var t=0;return this.day.declarations.forEach(function(e){t+=e.duration}),t},totalHWP:function(){var t=0;return this.day.othersWP&&this.day.othersWP.forEach(function(e){t+=e.duration}),t},totalJour:function(){return this.totalWP+this.totalHWP},enseignements:function(){var t=0;return this.day.teaching.forEach(function(e){t+=e.duration}),t},abs:function(){var t=0;return this.day.vacations.forEach(function(e){t+=e.duration}),t},learn:function(){var t=0;return this.day.training.forEach(function(e){t+=e.duration}),t},other:function(){var t=0;return this.day.infos.forEach(function(e){t+=e.duration}),t},sickleave:function(){var t=0;return this.day.sickleave.forEach(function(e){t+=e.sickleave}),t},research:function(){var t=0;return this.day.research.forEach(function(e){t+=e.research}),t}},methods:{addToWorkpackage:function(t){this.$emit("addtowp",t)},hasDeclarationHWP:function(t){return this.day[t]&&this.day[t].length}}}},function(t,e,s){"use strict";function a(t){s(17)}Object.defineProperty(e,"__esModule",{value:!0});var n=s(5),i=s(18),o=s(0),r=a,c=o(n.a,i.a,!1,r,"data-v-23248056",null);e.default=c.exports},function(t,e,s){"use strict";e.a={props:{workpackages:{default:[]},selection:{required:!0},others:{required:!0},usevalidation:{default:!1}},data:function(){return{showSelector:!1}},computed:{hasSelected:function(){return null!=this.selection},selectedCode:function(){return this.selection?this.selection.code:""},selectedLabel:function(){return this.selection?this.selection.label:""},selectedIcon:function(){return this.selection&&this.selection.icon?this.selection.code:""},selectedDescription:function(){return this.selection?this.selection.description:""}},methods:{handlerSelectWP:function(t){this.selection=t,this.usevalidation||this.handlerValidSelection()},handlerValidSelection:function(){this.selection&&(this.showSelector=!1,this.$emit("select",this.selection))},handlerSelectOther:function(t){this.selection=t,this.usevalidation||this.handlerValidSelection()}}}},function(t,e,s){"use strict";e.a={name:"TimesheetMonthDeclarationItem",props:{d:{required:!0},dayLength:{required:!0}},filters:{heures:function(t){var e=Math.floor(t),s=Math.round(60*(t-e));return s<10&&(s="0"+s),console.log(t," => ",e,"h",s),e+":"+s}}}},function(t,e,s){"use strict";e.a={props:{duration:{default:0},baseTime:{default:7.5},declarationInHours:{required:!0},pas:{default:10},fill:{default:0}},data:function(){return{hours:0,minutes:0}},computed:{displayHours:function(){return Math.floor(this.duration)},displayMinutes:function(){return Math.round(60*(this.duration-this.displayHours))},displayPercent:function(){return Math.round(100/this.baseTime*this.duration)}},methods:{standardizeDuration:function(t){return Math.round(t/this.pas)*this.pas/60},moreMinutes:function(){this.duration=this.standardizeDuration(60*this.duration+this.pas),this.emitUpdate()},lessMinutes:function(){this.duration=this.standardizeDuration(60*this.duration-this.pas),this.emitUpdate()},moreHours:function(){this.duration+=1,this.emitUpdate()},lessHours:function(){this.duration-=1,this.duration<0&&(this.duration=0),this.emitUpdate()},applyDuration:function(t){this.duration=t,this.emitUpdate()},roundMinutes:function(t){return Math.round(t/this.pas)*this.pas},applyPercent:function(t){this.duration=this.baseTime*t/100,this.emitUpdate()},emitUpdate:function(){var t=Math.floor(this.duration),e=this.duration-t;console.log(this.duration,t,e),this.$emit("timeupdate",{h:t,m:e})}}}},function(t,e,s){t.exports=s(9)},function(t,e,s){"use strict";function a(t){s(10)}Object.defineProperty(e,"__esModule",{value:!0});var n=s(1),i=s(25),o=s(0),r=a,c=o(n.a,i.a,!1,r,null,null);e.default=c.exports},function(t,e){},function(t,e,s){"use strict";e.a={resolve:function(t,e){var s="Erreur inconnue";return e&&(s=e.body,403==e.status&&(s="Vous avez été déconnectez de l'application")),t+" (Réponse : "+s+")"}}},function(t,e,s){"use strict";function a(t){s(13)}Object.defineProperty(e,"__esModule",{value:!0});var n=s(2),i=s(14),o=s(0),r=a,c=o(n.a,i.a,!1,r,"data-v-7e0f0ac4",null);e.default=c.exports},function(t,e){},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"day",class:{locked:t.day.locked,error:t.day.total>t.day.maxLength},on:{click:t.handlerClick}},[s("span",{staticClass:"label"},[t._v("\n        "+t._s(t.day.i)+"\n    ")]),t._v(" "),t.day.total>t.day.maxLength?s("span",{staticClass:"text-danger"},[s("i",{staticClass:"icon-attention"}),t._v("\n        Erreur\n    ")]):t._e(),t._v(" "),t._l(t.groupProject,function(e){return s("span",{staticClass:"cartouche wp xs",style:{"background-color":e.color},attrs:{title:e.label}},[null==e.status_id?s("i",{staticClass:"icon-draft"}):s("i",{class:"icon-"+e.status_id}),t._v("\n        "+t._s(e.acronym)+"\n        "),s("span",{staticClass:"addon"},[t._v("\n            "+t._s(t._f("duration2")(e.duration,t.day.dayLength))+"\n        ")])])}),t._v(" "),s("span",t._l(t.day.othersWP,function(e){return s("span",{staticClass:"cartouche xs",class:e.code},[null==e.validations?s("i",{staticClass:"icon-draft"}):s("i",{class:"icon-"+e.status_id}),t._v("\n            "+t._s(e.label)+"\n            "),s("span",{staticClass:"addon"},[t._v("\n                "+t._s(t._f("duration2")(e.duration,t.day.dayLength))+"\n            ")])])}),0),t._v(" "),t.day.closed?s("span",{staticStyle:{"font-size":".7em"},attrs:{title:t.day.lockedReason}},[s("i",{staticClass:"icon-minus-circled"}),t._v("\n        Fermé\n    ")]):t.day.locked?s("span",{staticStyle:{"font-size":".7em"},attrs:{title:t.day.lockedReason}},[s("i",{staticClass:"icon-lock"}),t._v("\n        Verrouillé\n    ")]):t._e(),t._v("\n     \n")],2)},n=[],i={render:a,staticRenderFns:n};e.a=i},function(t,e,s){"use strict";function a(t){s(16)}Object.defineProperty(e,"__esModule",{value:!0});var n=s(3),i=s(21),o=s(0),r=a,c=o(n.a,i.a,!1,r,null,null);e.default=c.exports},function(t,e){},function(t,e){},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.showSelector?s("div",{staticClass:"overlay"},[s("div",{staticClass:"overlay-content"},[s("p",[t._v("Choississez un type de créneau : ")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[t._m(0),t._v(" "),t._l(t.workpackages,function(e){return s("article",{staticClass:"timesheet-item",class:{selected:t.selection&&t.selection.id==e.id,disabled:!e.validation_up},on:{click:function(s){return s.preventDefault(),t.handlerSelectWP(e)}}},[s("abbr",{staticClass:"project-acronym",attrs:{title:t.project}},[s("i",{staticClass:"icon-cube"}),t._v(" "+t._s(e.acronym))]),t._v(" "),s("span",{staticClass:"activity-label"},[t._v(t._s(e.activity))]),t._v(" "),s("strong",{staticClass:"workpackage-infos"},[s("span",{staticClass:"code"},[t._v(t._s(e.code))]),t._v(" "),s("small",{staticClass:"workpackage-label"},[t._v(t._s(e.label))])])])})],2),t._v(" "),s("div",{staticClass:"col-md-6"},[s("h3",[t._v("Hors activité (Hors-lot)")]),t._v(" "),t._l(t.others,function(e){return s("article",{staticClass:"timesheet-item horslots-item",class:{selected:t.selection==e,disabled:!e.validation_up},on:{click:function(s){return s.preventDefault(),t.handlerSelectOther(e)}}},[s("span",{staticClass:"project-acronym"},[s("i",{class:"icon-"+e.code}),t._v(" "+t._s(e.label))]),t._v(" "),s("small",{staticClass:"workpackage-infos"},[t._v(t._s(e.description))])])})],2)]),t._v(" "),s("nav",[s("button",{staticClass:"btn btn-default",on:{click:function(e){t.showSelector=!1}}},[t._v("Annuler")]),t._v(" "),t.usevalidation?s("button",{staticClass:"btn btn-primary",class:t.selection?"":"disabled",on:{click:function(e){return t.handlerValidSelection()}}},[t._v("Valider")]):t._e()])])]):t._e(),t._v(" "),s("div",{staticClass:"dropdown"},[s("button",{staticClass:"btn-lg btn btn-default dropdown-toggle",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.showSelector=!0}}},[t.hasSelected?s("span",{staticClass:"info"},[s("i",{class:t.selectedIcon?"icon-"+t.selectedIcon:"icon-archive"}),t._v(" "),s("strong",[t._v(t._s(t.selectedCode))]),t._v(" "),s("em",[t._v(t._s(t.selectedLabel))]),s("br"),t._v(" "),s("small",{staticClass:"text-light"},[t._v(t._s(t.selectedDescription))])]):s("em",{staticClass:"info"},[t._v("Lot de travail/Activité...")]),t._v(" "),s("span",{staticClass:"caret"})])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",[s("i",{staticClass:"icon-cube"}),t._v(" Activités")])}],i={render:a,staticRenderFns:n};e.a=i},function(t,e,s){"use strict";var a=s(6),n=s(20),i=s(0),o=i(a.a,n.a,!1,null,null,null);e.a=o.exports},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{staticClass:"card card-xs xs wp-duration",class:"status-"+t.d.status_id},[s("span",{staticClass:"infos"},[s("strong",[s("i",{staticClass:"icon-archive"}),t._v(" "),s("abbr",{attrs:{title:t.d.project}},[t._v(t._s(t.d.acronym))]),t._v(" "),s("i",{staticClass:"icon-angle-right"}),t._v(" "+t._s(t.d.wpCode)+"\n            "),s("i",{staticClass:"icon-comment",class:t.d.comment?"with-comment":"",attrs:{title:t.d.comment}})]),s("br"),t._v(" "),s("small",[s("i",{staticClass:"icon-cubes"}),t._v(" "+t._s(t.d.label))]),t._v(" "),s("div",{staticClass:"status"},[s("i",{class:"icon-"+t.d.status_id}),t._v(" "+t._s(t._f("status")(t.d.status_id))+"\n            "),t.d.validations.conflict?s("span",{staticClass:"text-danger"},[t._v("\n                "+t._s(t.d.validations.conflict)+"\n            ")]):t._e()])]),t._v(" "),s("div",{staticClass:"total"},[t._v("\n        "+t._s(t._f("duration2")(t.d.duration,t.dayLength))+"\n    ")]),t._v(" "),s("div",{staticClass:"left buttons-icon"},[s("i",{staticClass:"icon-trash",class:1!=t.d.credentials.deletable?"disabled":"",on:{click:function(e){return t.$emit("removetimesheet",t.d)}}}),t._v(" "),s("i",{staticClass:"icon-edit",class:1!=t.d.credentials.editable?"disabled":"",on:{click:function(e){return t.$emit("edittimesheet",t.d)}}})])])},n=[],i={render:a,staticRenderFns:n};e.a=i},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"day-details",class:{locked:t.day.locked}},[s("h3",{staticClass:"title-with-menu",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),e.shiftKey?t.$emit("debug",t.day):null}}},[s("div",{staticClass:"text"},[s("i",{staticClass:"icon-calendar"}),t._v(" "),s("strong",[t._v(t._s(t.label))])]),t._v(" "),s("nav",{staticClass:"right-menu"},[s("a",{directives:[{name:"show",rawName:"v-show",value:t.day.othersWP||t.day.declarations.length,expression:"day.othersWP || day.declarations.length"}],attrs:{href:"#",title:"Copier les créneaux"},on:{click:function(e){return e.preventDefault(),t.$emit("copy",t.day)}}},[s("i",{staticClass:"icon-docs"})]),t._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:t.copiable,expression:"copiable"}],attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("paste",t.day)}}},[s("i",{staticClass:"icon-paste"})])])]),t._v(" "),s("a",{staticClass:"btn btn-xs btn-default",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("cancel")}}},[s("i",{staticClass:"icon-angle-left"}),t._v(" Retour\n    ")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.day.locked,expression:"day.locked"}],staticClass:"alert alert-danger"},[s("i",{staticClass:"icon-attention"}),t._v(" Cette journée est verrouillé "),s("strong",[t._v(t._s(t.day.lockedReason))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.day.total>t.day.maxLength,expression:"day.total > day.maxLength"}],staticClass:"alert alert-danger"},[s("i",{staticClass:"icon-attention"}),t._v(" Le temps déclaré "),s("strong",[t._v("excède la durée autorisée")]),t._v(". Vous ne pourrez pas soumettre votre feuille de temps.\n    ")]),t._v(" "),t.editable?s("div",[t._v("\n        Compléter avec :\n        "),s("wpselector",{attrs:{others:t.others,workpackages:t.workPackages,selection:t.selection},on:{select:t.addToWorkpackage}})],1):t._e(),t._v(" "),s("section",[t.day.declarations.length?[t._m(0),t._v(" "),t._l(t.day.declarations,function(e){return s("day",{key:e.id,attrs:{d:e,"day-length":t.day.dayLength},on:{debug:function(e){return t.$emit("debug",e)},removetimesheet:function(e){return t.$emit("removetimesheet",e)},edittimesheet:function(e){return t.$emit("edittimesheet",e,t.day)}}})}),t._v(" "),s("article",{staticClass:"wp-duration card xs"},[t._m(1),t._v(" "),s("div",{staticClass:"total"},[s("span",{staticClass:"text-large text-xl"},[t._v(t._s(t._f("duration2")(t.totalWP,t.day.dayLength)))])]),t._v(" "),s("div",{staticClass:"left"})]),t._v(" "),s("hr")]:t._e(),t._v(" "),t.day.othersWP?s("section",{staticClass:"othersWP"},[t._m(2),t._v(" "),t._l(t.day.othersWP,function(e){return s("article",{staticClass:"wp-duration card xs"},[s("strong",[s("i",{class:"icon-"+e.code}),t._v(" "+t._s(t.others[e.label]?t.others[e.label].label:e.label)),s("br"),t._v(" "),s("small",[t._v(t._s(e.description))])]),t._v(" "),s("div",{staticClass:"total"},[t._v(t._s(t._f("duration2")(e.duration,t.day.dayLength)))]),t._v(" "),s("div",{staticClass:"left buttons-icon"},[s("i",{staticClass:"icon-trash",class:1!=t.day.editable?"disabled":"",on:{click:function(s){return t.$emit("removetimesheet",e)}}}),t._v(" "),s("i",{staticClass:"icon-edit",class:1!=t.day.editable?"disabled":"",on:{click:function(s){return t.$emit("edittimesheet",e,t.day)}}})])])}),t._v(" "),s("hr")],2):t._e(),t._v(" "),s("article",{staticClass:"wp-duration card xl"},[t._m(3),t._v(" "),s("div",{staticClass:"total"},[t._v(t._s(t._f("duration2")(t.totalJour,t.day.dayLength)))])])],2)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",[s("i",{staticClass:"icon-archive"}),t._v(" Heures identifiées sur des lots")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[s("strong",[s("i",{staticClass:"icon-archive"}),t._v(" Total"),s("br"),t._v(" "),s("small",[t._v("sur les lot de travail")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",[s("i",{staticClass:"icon-tags"}),t._v(" Heures Hors-Lots")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("strong",[t._v("\n                Total de la journée"),s("br")])}],i={render:a,staticRenderFns:n};e.a=i},function(t,e,s){"use strict";function a(t){s(23)}Object.defineProperty(e,"__esModule",{value:!0});var n=s(7),i=s(24),o=s(0),r=a,c=o(n.a,i.a,!1,r,"data-v-044d2ea8",null);e.default=c.exports},function(t,e){},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui-timechooser"},[s("div",{staticClass:"percents"},[t.fill>0?s("span",{on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.applyDuration(t.fill)}}},[t._v("Remplir")]):t._e(),t._v(" "),s("span",{class:"100"==t.displayPercent?"selected":"",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.applyPercent(100)}}},[t._v("100%")]),t._v(" "),s("span",{class:"75"==t.displayPercent?"selected":"",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.applyPercent(75)}}},[t._v("75%")]),t._v(" "),s("span",{class:"50"==t.displayPercent?"selected":"",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.applyPercent(50)}}},[t._v("50%")]),t._v(" "),s("span",{class:"25"==t.displayPercent?"selected":"",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.applyPercent(25)}}},[t._v("25%")])]),t._v(" "),t.declarationInHours?s("div",{staticClass:"hours"},[s("span",{staticClass:"hour sel"},[s("span",{on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.moreHours()}}},[s("i",{staticClass:"icon-angle-up"})]),t._v("\n            "+t._s(t.displayHours)+"\n            "),s("span",{on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.lessHours()}}},[s("i",{staticClass:"icon-angle-down"})])]),t._v(" "),s("span",{staticClass:"separator"},[t._v(":")]),t._v(" "),s("span",{staticClass:"minutes sel"},[s("span",{on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.moreMinutes()}}},[s("i",{staticClass:"icon-angle-up"})]),t._v("\n            "+t._s(t.displayMinutes)+"\n            "),s("span",{on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.lessMinutes()}}},[s("i",{staticClass:"icon-angle-down"})])])]):t._e()])},n=[],i={render:a,staticRenderFns:n};e.a=i},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{on:{click:t.handlerClick,keyup:t.handlerKeyDown}},[s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading-message"},[s("i",{staticClass:"icon-spinner animate-spin"}),t._v("\n            "+t._s(t.loading)+"\n        ")])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.screensend?s("div",{staticClass:"overlay"},[s("div",{staticClass:"overlay-content"},[s("h2",[s("i",{staticClass:"icon-paper-plane"}),t._v(" Soumettre la déclaration pour\n                    "),s("strong",[t._v(t._s(t.mois))])]),t._v(" "),s("table",{staticClass:"table table-bordered table-recap"},[s("thead",[s("th",{attrs:{colspan:"2"}},[t._v(" ")]),t._v(" "),t._l(t.ts.days,function(e){return s("th",[s("small",[t._v(t._s(e.label))]),s("br"),t._v(" "),s("strong",[t._v(t._s(e.i))])])}),t._v(" "),s("th",[t._v("\n                            Total\n                        ")])],2),t._v(" "),t._l(t.recapsend.lot,function(e){return s("tbody",[t._l(e.activities,function(e){return[s("tr",{staticClass:"activity-line"},[s("th",{attrs:{colspan:t.ts.dayNbr+3}},[s("h3",[s("strong",[s("i",{staticClass:"icon-cube"}),t._v(" ["+t._s(e.acronym)+"] "+t._s(e.label))])])])]),t._v(" "),s("tr",[s("th",{attrs:{colspan:"2"}},[t._v(" ")]),t._v(" "),s("td",{attrs:{colspan:t.ts.dayNbr}},[s("strong",[t._v("Commentaires : ")]),s("br"),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.screensend[e.id],expression:"screensend[activity.id]"}],staticClass:"form-control",staticStyle:{"max-width":"100%"},domProps:{value:t.screensend[e.id]},on:{input:function(s){s.target.composing||t.$set(t.screensend,e.id,s.target.value)}}})]),t._v(" "),s("td",[t._v(" ")])]),t._v(" "),t._l(e.workpackages,function(e){return s("tr",{staticClass:"workpackage-line"},[s("th",{attrs:{colspan:"2"}},[s("i",{staticClass:"icon-archive"}),t._v(" "+t._s(e.label)+"\n                                ")]),t._v(" "),t._l(t.ts.days,function(a){return s("td",[e.days[a.i]?s("strong",[t._v(t._s(t._f("duration2")(e.days[a.i])))]):s("small",[t._v("-")])])}),t._v(" "),s("th",{staticClass:"total"},[t._v("\n                                    "+t._s(t._f("duration2")(e.total))+"\n                                ")])],2)}),t._v(" "),s("tr",{staticClass:"activity-line-total"},[s("th",{attrs:{colspan:"2"}},[t._v("Total")]),t._v(" "),t._l(t.ts.days,function(a){return s("td",[e.days[a.i]?s("strong",[t._v(t._s(t._f("duration2")(e.days[a.i])))]):s("small",[t._v("-")])])}),t._v(" "),s("th",{staticClass:"total"},[t._v(t._s(t._f("duration2")(e.total)))])],2)]})],2)}),t._v(" "),s("tbody",[s("tr",[s("th",{attrs:{colspan:t.ts.dayNbr+3}},[s("h3",[s("i",{staticClass:"icon-tags"}),t._v(" "),s("strong",[t._v("Hors-Lot")])])])]),t._v(" "),t._l(t.recapsend.hl,function(e){return s("tr",{staticClass:"workpackage-line"},[s("th",[s("i",{class:"icon-"+e.code}),t._v("\n                                "+t._s(e.label)+"\n                            ")]),t._v(" "),s("td",[s("strong",[t._v("Commentaire : ")]),s("br"),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.screensend[e.code],expression:"screensend[hl.code]"}],domProps:{value:t.screensend[e.code]},on:{input:function(s){s.target.composing||t.$set(t.screensend,e.code,s.target.value)}}})]),t._v(" "),t._l(t.ts.days,function(a){return s("td",[e.days[a.i]?s("strong",[t._v(t._s(t._f("duration2")(e.days[a.i])))]):s("small",[t._v("-")])])}),t._v(" "),s("th",{staticClass:"total"},[t._v("\n                                "+t._s(t._f("duration2")(e.total))+"\n                            ")])],2)})],2),t._v(" "),s("tbody",[s("tr",[s("th",{attrs:{colspan:t.ts.dayNbr+3}},[s("h3",[s("strong",[t._v("Total")])])])]),t._v(" "),s("tr",{staticClass:"total-line"},[s("th",{attrs:{colspan:"2"}},[t._v("\n                                 =\n                            ")]),t._v(" "),t._l(t.ts.days,function(e){return s("td",[e.total?s("strong",[t._v(t._s(t._f("duration2")(e.total)))]):s("small",[t._v("-")])])}),t._v(" "),s("th",{staticClass:"total"},[t._v("\n                                "+t._s(t._f("duration2")(t.ts.total))+"\n                            ")])],2)])],2),t._v(" "),s("nav",{staticClass:"buttons"},[s("button",{staticClass:"btn btn-primary",on:{click:t.sendMonthProceed}},[t._v("Envoyer la déclaration")]),t._v(" "),s("button",{staticClass:"btn btn-default",on:{click:function(e){t.screensend=null}}},[t._v("Annuler")])])])]):t._e()]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.configureColor?s("div",{staticClass:"overlay"},[s("div",{staticClass:"overlay-content"},[s("h2",[s("i",{staticClass:"icon-tags"}),t._v(" Couleurs des activités\n                ")]),t._v(" "),s("p",[t._v("Les options ajustables ici pemettent uniquement")]),t._v(" "),t._l(t.ts.activities,function(e){return s("article",[s("strong",{staticClass:"cartouche ",style:{"background-color":t.getAcronymColor(e.acronym)}},[t._v(t._s(e.acronym)+"\n                        "),s("em",{staticClass:"addon"},[t._v(t._s(e.label))])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t._colorsProjects[e.acronym],expression:"_colorsProjects[a.acronym]"}],attrs:{type:"color"},domProps:{value:t._colorsProjects[e.acronym]},on:{change:function(s){return t.handlerChangeColor(e.acronym,s)},input:function(s){s.target.composing||t.$set(t._colorsProjects,e.acronym,s.target.value)}}})])}),t._v(" "),s("hr"),t._v(" "),s("nav",{staticClass:"buttons"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){t.configureColor=!1}}},[s("i",{staticClass:"icon-cancel-alt"}),t._v("\n                        Terminé")])])],2)]):t._e()]),t._v(" "),t.error?s("div",{staticClass:"overlay",staticStyle:{"z-index":"2002"}},[s("div",{staticClass:"content container overlay-content"},[t._m(0),t._v(" "),s("pre",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]),t._v(" "),s("p",{staticClass:"text-danger"},[t._v("\n                Si ce message ne vous aide pas, transmettez le à l'administrateur Oscar.\n            ")]),t._v(" "),s("nav",{staticClass:"buttons"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){t.error=""}}},[t._v("Fermer")])])])]):t._e(),t._v(" "),t.rejectPeriod?s("div",{staticClass:"overlay",staticStyle:{"z-index":"2002"}},[s("div",{staticClass:"content container overlay-content"},[t._m(1),t._v(" "),t.rejectPeriod.rejectadmin_at?s("div",[s("p",[t._v("Déclaration rejetée administrativement par "),s("strong",[t._v(t._s(t.rejectPeriod.rejectadmin_by))]),t._v("\n                    le\n                    "),s("time",[t._v(t._s(t.rejectPeriod.rejectadmin_at))])]),t._v(" "),s("pre",[s("strong",[t._v("Motif : ")]),t._v(t._s(t.rejectPeriod.rejectadmin_message))])]):t.rejectPeriod.rejectsci_at?s("div",[s("p",[t._v("Déclaration rejetée scientifiquement par "),s("strong",[t._v(t._s(t.rejectPeriod.rejectsci_by))]),t._v("\n                    le\n                    "),s("time",[t._v(t._s(t.rejectPeriod.rejectsci_at))])]),t._v(" "),s("pre",[s("strong",[t._v("Motif : ")]),t._v(t._s(t.rejectPeriod.rejectsci_message))])]):t.rejectPeriod.rejectactivity_at?s("div",[s("p",[t._v("Déclaration rejetée par "),s("strong",[t._v(t._s(t.rejectPeriod.rejectactivity_by))]),t._v("\n                    le\n                    "),s("time",[t._v(t._s(t.rejectPeriod.rejectactivity_at))])]),t._v(" "),s("pre",[s("strong",[t._v("Motif : ")]),t._v(t._s(t.rejectPeriod.rejectactivity_message))])]):t._e(),t._v(" "),s("nav",{staticClass:"buttons"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){t.rejectPeriod=null}}},[t._v("Fermer")])])])]):t._e(),t._v(" "),t.popup?s("div",{staticClass:"overlay",staticStyle:{"z-index":"2001"}},[s("div",{staticClass:"content container overlay-content"},[s("h2",[t._v("Historique")]),t._v(" "),s("pre",{staticClass:"alert alert-info"},[t._v(t._s(t.popup))]),t._v(" "),s("nav",{staticClass:"buttons"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){t.popup=""}}},[t._v("Fermer")])])])]):t._e(),t._v(" "),t.help?s("div",{staticClass:"overlay",staticStyle:{"z-index":"2002"}},[s("div",{staticClass:"content container overlay-content"},[t._m(2),t._v(" "),t._m(3),t._v(" "),t.ts?s("ul",[s("li",[t._v("Durée "),s("em",[t._v("normal")]),t._v(" d'une journée : "),s("strong",[t._v(t._s(t._f("duration")(t.ts.daylength)))])]),t._v(" "),s("li",[t._v("Durée "),s("strong",[t._v("maximum légale")]),t._v(" d'une journée : "),s("strong",[t._v(t._s(t._f("duration")(t.ts.dayExcess)))])]),t._v(" "),s("li",[t._v("Durée "),s("strong",[t._v("maximum légale")]),t._v(" d'une semaine : "),s("strong",[t._v(t._s(t._f("duration")(t.ts.weekExcess)))])]),t._v(" "),s("li",[t._v("Durée "),s("strong",[t._v("maximum légale")]),t._v(" d'un mois : "),s("strong",[t._v(t._s(t._f("duration")(t.ts.monthExcess)))])])]):t._e(),t._v(" "),t._m(4),t._v(" "),s("nav",{staticClass:"buttons"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){t.help=""}}},[t._v("Fermer")])])])]):t._e(),t._v(" "),t.debug?s("div",{staticClass:"overlay",staticStyle:{"z-index":"2002"}},[s("div",{staticClass:"content container overlay-content"},[t._m(5),t._v(" "),s("pre",{staticClass:"alert alert-info",staticStyle:{"white-space":"pre","font-size":"12px"}},[t._v(t._s(t.debug))]),t._v(" "),s("nav",{staticClass:"buttons"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){t.debug=""}}},[t._v("Fermer")])])])]):t._e(),t._v(" "),t.selectedDay&&t.selectionWP&&t.selectionWP.code?s("div",{staticClass:"overlay",staticStyle:{"z-index":"2001"}},[s("div",{staticClass:"content container overlay-content"},[s("section",[t.selectionWP.id?s("h3",[s("small",[t._v("Déclaration pour le lot")]),t._v(" "),s("strong",[s("i",{staticClass:"icon-archive"}),t._v(" "),s("abbr",[t._v(t._s(t.selectionWP.code))]),t._v(" "+t._s(t.selectionWP.label)+"\n                    ")])]):s("h3",[s("small",[t._v("Déclaration hors-lot pour")]),t._v(" "),s("strong",[s("i",{class:"icon-"+t.selectionWP.code}),t._v("\n                        "+t._s(t.selectionWP.label)+"\n                    ")])])]),t._v(" "),1!=t.selectionWP.validation_up?s("div",{staticClass:"alert alert-danger"},[t._v("\n                Vous ne pouvez plus ajouter de créneaux pour ce lot sur cette période\n            ")]):s("div",[s("p",[s("i",{staticClass:"icon-calendar"}),t._v("\n                    Journée : "),s("strong",[t._v(t._s(t._f("datefull")(t.selectedDay.date)))]),s("br")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("h4",[t._v("Temps")]),t._v(" "),s("pre",[t._v(t._s(t.selection))]),t._v(" "),s("timechooser",{attrs:{declarationInHours:t.declarationInHours,baseTime:t.selectedDay.dayLength,fill:t.fillDayValue,duration:t.editedTimesheet?t.editedTimesheet.duration:0},on:{timeupdate:t.handlerDayUpdated}})],1),t._v(" "),s("div",{staticClass:"col-md-6"},[s("h4",[t._v("Commentaire")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentaire,expression:"commentaire"}],staticClass:"form-control textarea",domProps:{value:t.commentaire},on:{input:function(e){e.target.composing||(t.commentaire=e.target.value)}}})])])]),t._v(" "),s("nav",{staticClass:"buttons"},[s("button",{staticClass:"btn btn-default",on:{click:function(e){t.selectionWP=null}}},[s("i",{staticClass:"icon-block"}),t._v("\n                    Annuler\n                ")]),t._v(" "),1==t.selectionWP.validation_up?s("button",{staticClass:"btn btn-primary",on:{click:t.handlerSaveMenuTime}},[s("i",{staticClass:"icon-floppy"}),t._v("\n                    Valider\n                ")]):t._e()])])]):t._e(),t._v(" "),t.ts?s("section",{staticClass:"container-fluid",staticStyle:{"margin-bottom":"5em"}},[s("div",{staticClass:"month col-lg-8"},[s("h2",[t._v("\n                Déclarations de temps pour "),s("strong",[t._v(t._s(t.ts.person))]),t._v(" "),s("small",{staticStyle:{position:"absolute",right:"0","font-size":"14px",cursor:"pointer"},on:{click:function(e){t.configureColor=!0}}},[t._v("\n                    Options\n                    "),s("i",{staticClass:"icon-cog"})])]),t._v(" "),s("h3",{staticClass:"periode"},[t._v("Période\n                "),s("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.prevMonth(e)}}},[s("i",{staticClass:"icon-angle-left"})]),t._v(" "),s("strong",{on:{click:function(e){if(!e.shiftKey)return null;t.debug=t.ts}}},[t._v(t._s(t.mois))]),t._v(" "),s("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.nextMonth(e)}}},[s("i",{staticClass:"icon-angle-right"})]),t._v(" "),t.urlimport?s("a",{staticClass:"btn btn-default",class:{disabled:!t.ts.submitable},attrs:{href:t.urlimport+"&period="+t.periodCode,title:t.ts.submitable?"":"Vous ne pouvez pas importer pour cette période"}},[s("i",{staticClass:"icon-calendar"}),t._v("\n                    Importer un calendrier"),s("br"),t._v(" "),t.ts.submitable?t._e():s("small",[t._v("\n                        Vous ne pouvez pas importer pour une période en cours/déjà envoyée\n                    ")])]):t._e()]),t._v(" "),s("div",{staticClass:"month"},[t._m(6),t._v(" "),s("div",{staticClass:"weeks"},t._l(t.weeks,function(e){return t.ts?s("section",{staticClass:"week",class:t.selectedWeek==e?"selected":""},[s("header",{staticClass:"week-header",on:{click:function(s){return t.selectWeek(e)}}},[s("span",[t._v("Semaine "+t._s(e.label))]),t._v(" "),s("small",[s("em",[t._v("Cumul des heures : ")]),t._v(" "),s("strong",{class:e.total>e.weekExcess?"has-titled-error":"",attrs:{title:e.total>e.weekExcess?"Les heures excédentaires risques d'être ignorées lors d'une justification financière dans le cadre des projets soumis aux feuilles de temps":""}},[e.total>e.weekExcess?s("i",{staticClass:"icon-attention-1"}):t._e(),t._v(t._s(t._f("duration2")(e.total,e.weekLength)))])])]),t._v(" "),s("div",{staticClass:"days"},t._l(e.days,function(e){return s("timesheetmonthday",{key:e.date,class:t.selectedDay==e?"selected":"",attrs:{others:t.ts.otherWP,projectscolors:t._colorsProjects,day:e},on:{selectDay:function(s){return t.handlerSelectData(e)},daymenu:t.handlerDayMenu,debug:function(e){t.debug=e}}})}),1)]):t._e()}),0)])]),t._v(" "),s("section",{staticClass:"col-lg-4"},[t.selectedDay?s("timesheetmonthdaydetails",{attrs:{day:t.selectedDay,workPackages:t.ts.workpackages,others:t.ts.otherWP,selection:t.selectionWP,editable:t.ts.editable,label:t.dayLabel,"day-excess":t.ts.dayExcess,copiable:t.clipboardDataDay},on:{debug:function(e){t.debug=e},copy:t.handlerCopyDay,paste:t.handlerPasteDay,cancel:function(e){t.selectedDay=null},removetimesheet:t.deleteTimesheet,edittimesheet:t.editTimesheet,addtowp:function(e){return t.handlerWpFromDetails(e)}}}):t.selectedWeek?s("div",[s("h3",{staticClass:"title-with-menu",on:{click:function(e){if(!e.shiftKey)return null;t.debug=t.selectedWeek}}},[s("div",{staticClass:"text"},[s("i",{staticClass:"icon-calendar"}),t._v(" "),s("strong",[t._v("Semaine "+t._s(t.selectedWeek.label))])]),t._v(" "),t.ts.editable?s("nav",{staticClass:"right-menu"},[s("a",{attrs:{href:"#",title:"Copier les créneaux de la semaine"},on:{click:function(e){return t.handlerCopyWeek(t.selectedWeek)}}},[s("i",{staticClass:"icon-docs"})]),t._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:t.clipboardData,expression:"clipboardData"}],attrs:{href:"#",title:"Coller les créneaux"},on:{click:function(e){return t.handlerPasteWeek(t.selectedWeek)}}},[s("i",{staticClass:"icon-paste"})])]):t._e()]),t._v(" "),s("a",{staticClass:"btn btn-default",on:{click:function(e){t.selectedWeek=null}}},[s("i",{staticClass:"icon-angle-left"}),t._v(" Revenir au mois\n                ")]),t._v(" "),s("h4",[t._v("Jours (OK): ")]),t._v(" "),t._l(t.selectedWeek.days,function(e){return s("article",{staticClass:"card xs total repport-item",class:{locked:e.locked,closed:e.closed,excess:e.duration>t.ts.dayExcess},on:{click:function(s){return t.handlerSelectData(e)}}},[s("div",{staticClass:"week-header",class:{"text-thin":e.closed||e.locked}},[s("span",{},[s("i",{staticClass:"icon-calendar"}),t._v(" "),e.closed?s("i",{staticClass:"icon-minus-circled"}):e.locked?s("i",{staticClass:"icon-lock"}):e.total>e.amplitudemin&&e.total<e.amplitudemax?s("i",{staticClass:"icon-ok-circled",staticStyle:{color:"#2d7800"}}):s("i",{staticClass:"icon-help-circled",staticStyle:{color:"#777777"}}),t._v("\n\n                                "+t._s(t._f("datefull")(e.data))+"\n\n                                "),s("i",{staticClass:"icon-attention-circled",staticStyle:{color:"red"},attrs:{title:"Les heures déclarées dépassent la limite légales"}})]),t._v(" "),s("small",[s("strong",{staticClass:"text-large"},[t._v(t._s(t._f("duration2")(e.duration,e.dayLength)))])])])])}),t._v(" "),s("article",{staticClass:"card xs total"},[s("div",{staticClass:"week-header"},[s("span",{},[s("i",{staticClass:"icon-clock"}),t._v("\n                                Heures déclarées "),s("br"),t._v(" "),t.selectedWeek.totalOpen<t.selectedWeek.weekLength?s("small",{staticClass:"text-thin"},[s("i",{staticClass:"icon-attention-1"}),t._v("\n                                    Cette semaine n'est pas encore terminée\n                                ")]):t._e()]),t._v(" "),s("small",{staticClass:"text-big"},[s("strong",[t._v(t._s(t._f("duration2")(t.selectedWeek.total,t.selectedWeek.weekLength)))])])])]),t._v(" "),t.selectedWeek.total>t.ts.weekExcess?s("div",{staticClass:"alert alert-danger"},[s("i",{staticClass:"icon-attention-1"}),t._v("\n                    Vos déclarations pour cette semaine dépasse la limite légale fixée à "),s("strong",[t._v(t._s(t._f("duration")(t.ts.weekExcess)))]),t._v(" heures.\n                ")]):t._e(),t._v(" "),t.selectedWeek.total>0?s("nav",{staticClass:"buttons-bar"},[t.ts.editable?s("button",{staticClass:"btn btn-danger btn-xs",on:{click:function(e){return t.deleteWeek(t.selectedWeek)}}},[s("i",{staticClass:"icon-trash"}),t._v("\n                        Supprimer les déclarations non-envoyées\n                    ")]):t._e()]):t._e(),t._v(" "),t.selectedWeek.total<t.selectedWeek.totalOpen&&t.ts.editable?s("section",[s("p",[s("i",{staticClass:"icon-help-circled"}),t._v("\n                        Vous pouvez compléter automatiquement cette semaine en affectant les\n                        "),s("strong",[t._v(t._s(t._f("duration")(t.selectedWeek.totalOpen-t.selectedWeek.total))+" heure(s)")]),t._v("\n                        avec une des activités ci-dessous :\n                    ")]),t._v(" "),s("wpselector",{attrs:{others:t.ts.otherWP,workpackages:t.ts.workpackages,selection:t.fillSelectedWP,usevalidation:!0},on:{select:function(e){t.fillSelectedWP=e,t.fillWeek(t.selectedWeek,t.fillSelectedWP)}}})],1):t._e()],2):s("div",[s("h3",{on:{click:function(e){if(e.preventDefault(),!e.shiftKey)return null;e.stopPropagation(),t.debug=t.ts}}},[s("i",{staticClass:"icon-calendar"}),t._v("\n                    Mois de "),s("strong",[t._v(t._s(t.mois))])]),t._v(" "),t.monthRest>0&&t.ts.periodFinished?s("section",[s("p",[s("i",{staticClass:"icon-help-circled"}),t._v("\n                        Vous pouvez compléter automatiquement ce mois avec :\n                    ")]),t._v(" "),s("wpselector",{attrs:{others:t.ts.otherWP,workpackages:t.ts.workpackages,selection:t.fillMonthWP,usevalidation:!0},on:{select:function(e){t.fillMonthWP=e,t.handlerFillMonth(t.fillMonthWP)}}})],1):t._e(),t._v(" "),s("hr"),t._v(" "),t._l(t.weeks,function(e){return t.ts?s("section",{staticClass:"card xs"},[s("header",{staticClass:"week-header",on:{click:function(s){return t.selectWeek(e)}}},[s("span",[t._v("\n                                Semaine "+t._s(e.label)+"\n                                "),e.total<e.weekLength?s("i",{staticClass:"icon-ok-circled",staticStyle:{color:"#999"}}):e.total>e.weekExcess?s("i",{staticClass:"icon-attention-circled",staticStyle:{color:"#993d00"},attrs:{title:"La déclaration est incomplète pour cette période"}}):s("i",{staticClass:"icon-ok-circled",staticStyle:{color:"#2d7800"}})]),t._v(" "),s("small",[s("strong",{class:e.total>e.weekExcess?"has-titled-error":"",attrs:{title:e.total>e.weekExcess?"Les décalarations dépassent la limite légales et risques d'être ignorées lors d'une justification financière dans le cadre des projets soumis aux feuilles de temps":""}},[e.total>e.weekExcess?s("i",{staticClass:"icon-attention-1"}):t._e(),t._v(t._s(t._f("duration2")(e.total,e.weekLength)))])])])]):t._e()}),t._v(" "),s("section",{staticClass:"card xs total interaction-off"},[s("div",{staticClass:"week-header"},[s("span",{staticClass:"text-big text-xxl"},[t._v("Total")]),t._v(" "),s("small",[s("strong",{staticClass:"text-large"},[t._v(t._s(t._f("duration2")(t.ts.total,t.monthLength)))])])])]),t._v(" "),t.ts.total>t.ts.monthExcess?s("div",{staticClass:"alert alert-danger"},[s("i",{staticClass:"icon-attention-circled"}),t._v("\n                    Les heures mensuelles dépassent le cadre légale fixé à "),s("strong",[t._v(t._s(t._f("duration")(t.ts.monthExcess)))]),t._v(" heures.\n                ")]):t._e(),t._v(" "),s("hr"),t._v(" "),s("h4",[s("i",{staticClass:"icon-tags"}),t._v(" Hors-lot")]),t._v(" "),t._l(t.ts.otherWP,function(e){return e.total>0?s("section",{staticClass:"card xs"},[s("div",{staticClass:"week-header interaction-off"},[s("span",[s("i",{class:"icon-"+e.code}),t._v("\n                                "+t._s(e.label)+"\n                                "),null==e.validation_state?s("i"):"send-prj"==e.validation_state.status?s("i",{staticClass:"icon-cube",attrs:{title:"Validation projet en attente"}}):"send-sci"==e.validation_state.status?s("i",{staticClass:"icon-beaker",attrs:{title:"Validation scientifique en attente"}}):"send-adm"==e.validation_state.status?s("i",{staticClass:"icon-hammer",attrs:{title:"Validation administrative en attente"}}):"conflict"==e.validation_state.status?s("i",{staticClass:"icon-minus-circled",attrs:{title:"Il y'a un problème dans la déclaration"}}):"valid"==e.validation_state.status?s("i",{staticClass:"icon-ok-circled",attrs:{title:"Cette déclaration est valide"}}):t._e(),t._v(" "),s("br"),t._v(" "),s("em",{staticClass:"text-thin"},[t._v(t._s(e.description))])]),t._v(" "),s("small",[s("strong",{staticClass:"text-large"},[t._v(t._s(t._f("duration2")(e.total,t.monthLength)))])])])]):t._e()}),t._v(" "),s("section",{staticClass:"card xs total interaction-off"},[s("div",{staticClass:"week-header"},[s("span",{staticClass:"text-big text-xxl"},[t._v("Total")]),t._v(" "),s("small",[s("strong",{staticClass:"text-large"},[t._v(t._s(t._f("duration2")(t.totalWP,t.monthLength)))])])])]),t._v(" "),s("h4",[s("i",{staticClass:"icon-cubes"}),t._v(" Activités pour cette période")]),t._v(" "),0==t.ts.activities.length?s("p",{staticClass:"alert alert-info"},[t._v("\n                    Vous n'être identifié comme déclarant sur aucune activité pour cette période. Si cette situation\n                    vous semble anormale, prenez contact avec votre responsable scientifique.\n                ")]):t._l(t.ts.activities,function(e){return s("section",{staticClass:"card xs",on:{click:function(e){t.configureColor=!0}}},[s("div",{staticClass:"week-header interaction-off"},[s("span",[s("strong",[t._v(t._s(e.acronym))]),t._v(" "),s("span",{staticClass:"icon-tag",style:{color:t._colorsProjects[e.acronym]}},[t._v(" ")]),t._v(" "),null==e.validation_state?s("i"):"send-prj"==e.validation_state.status?s("i",{staticClass:"icon-cube",attrs:{title:"Validation projet en attente"}}):"send-sci"==e.validation_state.status?s("i",{staticClass:"icon-beaker",attrs:{title:"Validation scientifique en attente"}}):"send-adm"==e.validation_state.status?s("i",{staticClass:"icon-hammer",attrs:{title:"Validation administrative en attente"}}):"conflict"==e.validation_state.status?s("i",{staticClass:"icon-minus-circled",attrs:{title:"Il y'a un problème dans la déclaration"}}):"valid"==e.validation_state.status?s("i",{staticClass:"icon-ok-circled",attrs:{title:"Cette déclaration est valide"}}):t._e(),t._v(" "),s("br"),t._v(" "),s("em",{staticClass:"text-thin"},[t._v(t._s(e.label))])]),t._v(" "),s("small",{staticClass:"subtotal"},[s("strong",{staticClass:"text-large"},[t._v(t._s(t._f("duration2")(e.total,t.monthLength)))])])])])}),t._v(" "),s("section",{staticClass:"card xs total interaction-off"},[s("div",{staticClass:"week-header"},[s("span",[s("strong",{staticClass:"text-big text-xxl"},[t._v("Total")]),s("br"),t._v(" "),s("small",[t._v("Pour les activités soumisses aux déclarations")])]),t._v(" "),s("small",[s("strong",{staticClass:"text-large"},[t._v(t._s(t._f("duration2")(t.ts.periodDeclarations,t.monthLength)))])])])]),t._v(" "),t.ts.periodsValidations.length?s("div",[s("h3",[t._v("Procédures de validation pour cette période")]),t._v(" "),t._l(t.ts.periodsValidations,function(e){return s("section",{staticClass:"card card-xs"},["valid"==e.status?s("i",{staticClass:"icon-ok-circled"}):"conflict"==e.status?s("i",{staticClass:"icon-minus-circled"}):s("i",{staticClass:"icon-history"}),t._v("\n                        "+t._s(e.label)+"\n\n                        "),s("a",{attrs:{href:"#"},on:{click:function(s){t.popup=e.log}}},[t._v("Historique")]),t._v(" "),"conflict"==e.status&&(e.rejectadmin_message||e.rejectsci_message||e.rejectactivity_message)?s("a",{attrs:{href:"#"},on:{click:function(s){t.rejectPeriod=e}}},[t._v("Détails sur le rejet")]):t._e()])})],2):t._e(),t._v(" "),s("nav",{staticClass:"buttons-bar"},[t.ts.submitable?s("button",{staticClass:"btn btn-primary",class:{disabled:!t.ts.submitable,enabled:t.ts.submitable},staticStyle:{"margin-left":"auto"},on:{click:function(e){return t.sendMonth()}}},[s("i",{staticClass:"icon-upload"}),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"icon-spinner animate-spin"}),t._v(" "),s("span",[t._v("\n                                Soumettre mes déclarations\n                            ")])]):t.ts.hasConflict?s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.reSendPeriod()}}},[t._v("\n                        Réenvoyer\n                    ")]):s("span",[t._v("\n                        Vous ne pouvez pas soumettre cette période"),s("br"),t._v(" "),s("small",[t._v(t._s(t.ts.submitableInfos))])])])],2)],1)]):t._e()],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",[s("i",{staticClass:"icon-attention-1"}),t._v(" Oups !")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",[s("i",{staticClass:"icon-attention-1"}),t._v(" Déclaration rejetée !")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",[s("i",{staticClass:"icon-help-circled"}),t._v(" Informations légales")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("\n                Dans le cadre des projets soumis aux feuilles de temps, l'organisme financeur impose la\n                justification des heures,\n                "),s("strong",[t._v("incluant les activités hors-projets")]),t._v(".\n                Le culum des heures déclarées doit respecter le cadre légale : "),s("br")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("\n                Selon les modalités de financement, les dépacements (même en éxcédent) peuvent être considérés comme\n                des "),s("em",[t._v("irrégularité")]),t._v(" pouvant déclencher la suspension ou le remboursement des financements\n                engagés ou à venir.\n            ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",[s("i",{staticClass:"icon-bug"}),t._v(" Debug")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"month-header"},[s("strong",[t._v("Lundi")]),t._v(" "),s("strong",[t._v("Mardi")]),t._v(" "),s("strong",[t._v("Mercredi")]),t._v(" "),s("strong",[t._v("Jeudi")]),t._v(" "),s("strong",[t._v("Vendredi")]),t._v(" "),s("strong",[t._v("Samedi")]),t._v(" "),s("strong",[t._v("Dimanche")])])}],i={render:a,staticRenderFns:n};e.a=i}])});
//# sourceMappingURL=TimesheetMonth.js.map