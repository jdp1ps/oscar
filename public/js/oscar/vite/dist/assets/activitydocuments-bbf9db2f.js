import{a as y,h as U,r as P,c as o,b as e,d as m,t as r,e as p,F as f,f as D,g as k,w as b,v as C,i as E,j as T,k as I,n as v,l as F,o as i,p as O,m as M,q as W}from"../vendor.js";import{D as A,m as x,f as z}from"../vendor2.js";import{D as q,P as j}from"../vendor3.js";import{_ as B}from"../vendor4.js";const R="private",X={components:{"document-list":A,"date-picker":q,"person-auto-completer":j},props:{urlUploadNewDoc:{required:!0},urlSignDocument:{required:!1},url:{required:!0}},data(){return{idCurrentPerson:null,persons:[],computedDocuments:[],dateDeposit:"",dateSend:"",fileUrl:"",fileUrlLabel:"",privateDocument:!1,selectedIdTypeDocument:null,selectedIdTabDocument:null,informationsDocument:"",fileToDownload:null,uploadNewDocData:{dateDeposit:this.dateDeposit,dateSend:this.dateSend,private:this.privateDocument,type:this.selectedIdTypeDocument,tab:this.selectedIdTabDocument,informations:this.informationsDocument,persons:this.persons,baseUrlUpload:this.urlUploadNewDoc,url:"",init:!1},errorMessages:[],tabId:null,tabsWithDocuments:null,formData:null,error:null,deleteData:null,editData:null,uploadDoc:null,documents:[],loading:!0,sortField:"dateUpload",sortDirection:-1,editable:!0,remoterState:null,displayComputed:!1,signDocument:null,signProcess:null,selectedSignProcess:null,signProcessError:"",editedDocument:null,mode:null,processDetails:null,mode_url:!1,typesDocuments:[],selectedTab:null,selectedTabId:null}},computed:{currentFlow(){if(this.editedDocument.category.id){let t=this.typesDocuments.find(l=>l.id==this.editedDocument.category.id);if(t.flow)return t.flow.signatureflow}return!1},selectedTypeDocument(){return this.selectedIdTypeDocument?this.typesDocuments.find(t=>t.id==this.selectedIdTypeDocument):null},documentsPacked(){let t=[];return this.documents&&(t=this.documents.sort(function(d,h){return d[this.sortField]<h[this.sortField]?-1*this.sortDirection:d[this.sortField]>h[this.sortField]?1*this.sortDirection:0}.bind(this))),t},packedDocuments(){let t={};if(this.tabsWithDocuments)for(const[l,d]of Object.entries(this.tabsWithDocuments)){let h={};for(const[s,c]of Object.entries(d.documents)){let _=c.fileName;h.hasOwnProperty(_)?h[_].versions.push(c):(c.versions=[],h[_]=c)}t[l]={id:d.id,label:d.label,total:d.total,description:d.description,manage:d.manage,roles:d.roles,documents:h}}return t}},methods:{handlerPerformSignDocumentDisabled(t,l){if(!l||l.missing_recipients)return!0;for(let d=0;d<l.steps.length;d++){let h=l.steps[d],s=h.editable,c=0;for(let _=0;_<h.recipients.length;_++){let g=h.recipients[_];s?g.selected==!0&&c++:c++}if(c==0)return this.signProcessError="L'étape "+h.order+' "'+h.label+`" n'a pas de destinataire.`,!0}return this.signProcessError="",!1},handlerSelectProcess(t){this.signProcessError="",this.selectedSignProcess=t},handlerPerformSignDocument(t,l){let d=new FormData,h=this.urlSignDocument;return d.append("document_id",t.id),d.append("flow_datas",JSON.stringify(l)),y.post(h,d).then(s=>{this.signDocument=null,this.selectedSignProcess=null,this.fetch()},s=>{this.error=s.response.data?s.response.data:s.message}),!1},renderDate(t){return t?U(t).fromNow():"non précisé"},handlerProcessDetailsOn(t){this.processDetails=t},handlerProcessDetailsOff(){this.processDetails=null},activeTab(t){this.tabId=t},deleteDocument(t){this.deleteData=t},handlerSignDocument(t){this.signDocument=t},order:function(t){this.sortField==t?this.sortDirection*=-1:this.sortField=t},cssStepCurrent(t){return t===this.tabId?"current":""},cssSort:function(t){return t===this.sortField?"active":""},handlerEdit(t){this.editedDocument=t,this.mode="edit"},handlerSelectPersons(t){if(t.id){let l={personName:t.displayname,personId:t.id,affectation:t.affectation},d=t.id,h=!1;this.persons.forEach(function(s){s.personId===d&&(h=!0)}),h===!1&&(this.editedDocument?(this.editedDocument.persons||(this.editedDocument.persons=[]),this.editedDocument.persons.push(l)):this.persons.push(l))}},handlerDeletePerson(t){this.persons.splice(this.persons.indexOf(t),1)},handlerNew(t){this.mode="new",this.editedDocument={id:-1,version:1,information:"",fileName:"",process:!1,process_sendable:null,fileSize:0,typeMime:null,dateUpload:null,dateDeposit:null,dateSend:null,extension:null,category:{id:null},tabDocument:this.getTabById(t),private:!1,persons:[],location:"local",urlDelete:"",urlDownload:"",urlReupload:"",uploader:null,urlPerson:!1}},handlerNewVersion(t){this.mode="version",this.editedDocument=t},uploadFile(t){t.target.files.length!==0&&(this.fileToDownload=t.target.files[0])},handlerProcessReload(t){let l=new FormData;y.post(t.manage_process,l).then(d=>{this.fetch()},d=>{this.error=d.response&&d.response.data?d.response.data:d})},applyEdit(){let t=new FormData,l="";if(t.append("data",JSON.stringify(this.editedDocument)),this.mode=="version"?(t.append("action","version"),l=this.editedDocument.urlReupload):this.mode=="new"?(t.append("action","new"),t.append("flow",""),l=this.urlUploadNewDoc):this.mode=="edit"&&(t.append("action","edit"),l=this.editedDocument.urlReupload),this.mode!="edit")if(this.fileToDownload!==null)t.append("file",this.fileToDownload,this.fileToDownload.name);else{this.error="Aucun fichier sélectionner a téléverser !";return}y.post(l,t).then(d=>{this.editedDocument=null,this.fetch()},d=>{this.error=d.response&&d.response.data?d.response.data:d})},performEdit(){this.errorMessages=[];let t=[],l="",d=!0;if(this.editData.private===!0?(d=1,this.persons.length!==0&&this.persons.forEach(_=>{t.push(_.personId)})):(d=0,this.editData.tabDocument_id===R||this.editData.tabDocument_id===""?this.errorMessages.push("Vous devez sélectionner un onglet pour la modification (ce n'est pas un document qualifié privé)"):l=this.editData.tabDocument_id),this.errorMessages.length!==0)return;let h=this.editData.document.id,s=this.editData.documentype_id;this.editData=null,this.persons=[];let c=new FormData;c.append("documentId",h),c.append("type",s),c.append("tabDocument",l),c.append("private",d),c.append("persons",t)},getTabById(t){let l=this.tabsWithDocuments[t];return{id:l.id,label:l.label}},handlerSuccess(t){try{if(!t.data)throw"Impossible de charger les documents, vérifiez que vous êtes toujours connecté";this.idCurrentPerson=t.data.idCurrentPerson;let l=Array.isArray(t.data.tabsWithDocuments)?{}:t.data.tabsWithDocuments,d=null,h=null;if(l)if(Object.keys(l).forEach(s=>{let c=l[s];c.total=c.documents.length,c.documents.sort((_,g)=>g.version-_.version),c.documents.forEach(_=>{_.explode=!0}),d==null&&(d=c.id),h==null&&c.documents.length>0&&(h=c.id)}),this.tabsWithDocuments=l,this.computedDocuments=t.data.computedDocuments,this.signProcess=t.data.process_datas,this.typesDocuments=t.data.typesDocuments,this.selectedTabId==null&&(this.selectedTabId=h||d),this.tabsWithDocuments.unclassified&&this.tabsWithDocuments.unclassified.documents.length)this.selectedTab=this.tabsWithDocuments.unclassified;else{let s=Object.keys(this.tabsWithDocuments)[0];s.length&&(this.selectedTab=this.tabsWithDocuments[s[0]])}else throw new Error("Vous n'avez pas accès aux documents")}catch(l){this.error=l}},handlerSelectTab(t){t=="computed"?(this.displayComputed=!0,this.selectedTab=null,this.selectedTabId=null):(this.displayComputed=!1,this.selectedTab=t,this.selectedTabId=t.id)},fetch(){y.get(this.url).then(t=>{this.handlerSuccess(t)},t=>{this.error=t.response.data?t.response.data:t})}},mounted(){this.fetch()}},a=t=>(O("data-v-d7ad441a"),t=t(),M(),t),L={key:0,class:"overlay",style:{"z-index":"101"}},J={class:"overlay-content",style:{"max-width":"50%"}},K={class:"alert-danger alert"},G=a(()=>e("i",{class:"icon-attention-1"},null,-1)),H=a(()=>e("i",{class:"icon-cancel-outline"},null,-1)),Q={key:1,class:"overlay"},Y={class:"overlay-content",style:{"max-width":"50%"}},Z=a(()=>e("small",null,[e("i",{class:"icon-edit"}),m(" Procédure")],-1)),$=a(()=>e("br",null,null,-1)),ee=a(()=>e("br",null,null,-1)),te={class:"signature-status-101"},se={class:"status"},ne={class:"metas"},le={class:"meta"},oe={class:"meta"},ie={class:"fullname"},re={class:"email"},de={class:"status"},ce={class:"status-text"},ae=a(()=>e("strong",null,"Observateurs : ",-1)),ue={class:"buttons-bar"},me=a(()=>e("i",{class:"icon-cancel-outline"},null,-1)),he={style:{position:"relative","min-height":"100px"}},pe={key:0,class:"overlay"},_e={class:"overlay-content"},fe={class:"alert-danger alert"},De=a(()=>e("i",{class:"icon-attention-1"},null,-1)),be=a(()=>e("i",{class:"icon-cancel-alt"},null,-1)),ve=["href"],ge=a(()=>e("i",{class:"icon-valid"},null,-1)),ye={key:1,class:"overlay"},ke={class:"overlay-content"},Se=a(()=>e("i",{class:"icon-doc"},null,-1)),we={key:0},Pe={key:1},Ce={key:2},Te=a(()=>e("br",null,null,-1)),Ie={key:0},xe={key:1},Fe={class:"row"},Ne={class:"col-md-6"},Ve={key:0},Ue=a(()=>e("label",{for:"file"},"Fichier",-1)),Ee=a(()=>e("label",{for:"dateDeposit"},"Date de dépôt",-1)),Oe=a(()=>e("label",{for:"dateSend"},"Date d'envoi",-1)),Me={class:"col-md-6"},We={key:0},Ae=a(()=>e("label",{for:"tabdocument"},"Onglet",-1)),ze=["value"],qe={key:1},je=a(()=>e("label",{for:"typedocument"},"Type de document",-1)),Be={key:0,class:"alert alert-warning"},Re={key:1},Xe=["value","disabled"],Le={class:"col-md-12"},Je=a(()=>e("label",{for:"information"},"Informations",-1)),Ke={key:0,class:"col-md-6"},Ge={class:"row"},He={key:0},Qe=a(()=>e("label",{for:"tabdocument"},"Onglet document",-1)),Ye=["value"],Ze=a(()=>e("div",{class:"col-md-6"},[e("label",{for:"private"},"Document privé")],-1)),$e={class:"col-md-6"},et={key:0},tt=a(()=>e("label",null,"Choix des personnes ayant accès à ce document",-1)),st=a(()=>e("h3",null,"Ce document sera classé automatiquement dans l'onglet privé",-1)),nt=a(()=>e("i",{class:"icon-cube"},null,-1)),lt={class:"addon"},ot=["onClick"],it={class:"row"},rt={class:"col-md-12"},dt={class:"buttons-bar"},ct=a(()=>e("i",{class:"icon-cancel-alt"},null,-1)),at=a(()=>e("i",{class:"icon-valid"},null,-1)),ut={key:2,class:"overlay"},mt={class:"overlay-content"},ht=["onClick"],pt=a(()=>e("br",null,null,-1)),_t={key:0},ft=a(()=>e("small",null,"Procédure de signature",-1)),Dt=a(()=>e("br",null,null,-1)),bt={class:"metas"},vt={class:"meta"},gt={class:"meta"},yt={class:"meta"},kt={key:0,class:"alert alert-danger"},St={class:"row"},wt={class:"col-md-6"},Pt=a(()=>e("h5",null,"Destinataires",-1)),Ct={class:"recipient"},Tt=["onUpdate:modelValue"],It={class:"email"},xt={class:"fullname"},Ft={class:"col-md-6"},Nt=a(()=>e("h5",null,"Observateurs",-1)),Vt={class:"recipient"},Ut=["onUpdate:modelValue"],Et={class:"email"},Ot={class:"fullname"},Mt={key:1,class:"alert alert-info"},Wt={key:1,class:"alert alert-danger"},At={class:"buttons-bar"},zt=a(()=>e("i",{class:"icon-cancel-alt"},null,-1)),qt=a(()=>e("i",{class:"icon-cancel-alt"},null,-1)),jt={key:3,class:"overlay"},Bt={class:"overlay-content"},Rt=a(()=>e("i",{class:"icon-cancel-alt"},null,-1)),Xt={class:"documents-content"},Lt={class:"tabs"},Jt=["onClick"],Kt={class:"label label-default"},Gt={class:"tab-content"},Ht={class:""},Qt=a(()=>e("i",{class:"picto icon-doc"},null,-1)),Yt=a(()=>e("small",{class:"text-light"},"  (Document généré automatiquement) ",-1)),Zt={class:"text-right show-over"},$t=["href"],es=a(()=>e("i",{class:"icon-upload-outline"},null,-1)),ts={class:"tab-content"},ss={key:0,class:"text-right"},ns=["onClick"],ls=a(()=>e("i",{class:"icon-download"},null,-1));function os(t,l,d,h,s,c){const _=P("date-picker"),g=P("person-auto-completer"),V=P("document-list");return i(),o(f,null,[s.error?(i(),o("div",L,[e("div",J,[e("h2",null,[m(" Erreur documents "),e("span",{class:"overlay-closer",onClick:l[0]||(l[0]=n=>s.error=null)},"X")]),e("p",K,[G,m(r(s.error),1)]),e("button",{class:"btn btn-default",onClick:l[1]||(l[1]=n=>s.error=null)},[H,m(" Fermer ")])])])):p("",!0),s.processDetails?(i(),o("div",Q,[e("div",Y,[e("h2",null,[Z,m(),$,e("strong",null,r(s.processDetails.label),1),m(),ee,e("span",te,[m(r(s.processDetails.status_text)+" - ",1),e("em",null,"étape "+r(s.processDetails.current_step)+" / "+r(s.processDetails.total_steps),1)]),e("span",{class:"overlay-closer",onClick:l[2]||(l[2]=(...n)=>c.handlerProcessDetailsOff&&c.handlerProcessDetailsOff(...n))},"X")]),(i(!0),o(f,null,D(s.processDetails.steps,n=>(i(),o("section",{class:v(["signature","signature-status-"+n.status])},[e("h4",null,[e("small",null,"étape "+r(n.order)+" : ",1),e("strong",null,r(n.label),1),e("span",se," ("+r(n.status_text)+")",1)]),e("ul",ne,[e("li",le,[m("Parapheur "),e("strong",null,r(n.letterfile),1)]),e("li",oe,[m("Niveau "),e("strong",null,r(n.level),1)])]),(i(!0),o(f,null,D(n.recipients,u=>(i(),o("article",{class:v(["recipient","signature-status-"+u.status])},[e("strong",ie,r(u.fullname),1),e("em",re,r(u.email),1),e("small",null,r(t.$filters.dateFull(u.dateFinished)),1),e("span",de,[e("span",ce,r(u.status_text),1)])],2))),256)),ae,(i(!0),o(f,null,D(n.observers,u=>(i(),o("span",null,[e("small",null,r(u.firstname),1),m(),e("span",null,r(u.lastname),1)]))),256))],2))),256)),e("div",ue,[e("button",{class:"btn btn-default",onClick:l[3]||(l[3]=(...n)=>c.handlerProcessDetailsOff&&c.handlerProcessDetailsOff(...n))},[me,m(" Fermer ")])])])])):p("",!0),e("section",he,[s.deleteData?(i(),o("div",pe,[e("div",_e,[e("h2",null,[m(" Suppression du fichier ? "),e("span",{class:"overlay-closer",onClick:l[4]||(l[4]=n=>s.deleteData=null)},"X")]),e("p",fe,[De,m(" Souhaitez-vous supprimer le fichier "),e("strong",null,r(s.deleteData.fileName),1),m(" ? ")]),e("button",{class:"btn btn-danger",onClick:l[5]||(l[5]=n=>s.deleteData=null)},[be,m(" Annuler ")]),e("a",{class:"btn btn-success",href:s.deleteData.urlDelete},[ge,m(" Confirmer ")],8,ve)])])):p("",!0),s.editedDocument?(i(),o("div",ye,[e("div",ke,[e("h2",null,[e("small",null,[Se,s.mode=="new"?(i(),o("span",we,"Téléversement d'un document")):p("",!0),s.mode=="edit"?(i(),o("span",Pe,"Modification des informations")):p("",!0),s.mode=="version"?(i(),o("span",Ce,"Nouvelle version")):p("",!0)]),Te,s.editedDocument.id>0?(i(),o("span",Ie,[e("strong",null,r(s.editedDocument.fileName),1)])):(i(),o("span",xe,[m(" Nouveau document dans "),e("strong",null,r(s.editedDocument.tabDocument.label),1)])),e("span",null," ("+r(s.mode)+") ",1),e("span",{class:"overlay-closer",onClick:l[6]||(l[6]=n=>s.editedDocument=null)},"X")]),e("div",Fe,[e("div",Ne,[s.mode!="edit"?(i(),o("div",Ve,[Ue,e("input",{onChange:l[7]||(l[7]=(...n)=>c.uploadFile&&c.uploadFile(...n)),type:"file",class:"form-control",name:"file",id:"file"},null,32)])):p("",!0),e("div",null,[Ee,k(_,{modelValue:s.editedDocument.dateDeposit,"onUpdate:modelValue":l[8]||(l[8]=n=>s.editedDocument.dateDeposit=n),id:"dateDeposit"},null,8,["modelValue"])]),e("div",null,[Oe,k(_,{modelValue:s.editedDocument.dateSend,"onUpdate:modelValue":l[9]||(l[9]=n=>s.editedDocument.dateSend=n),id:"dateSend"},null,8,["modelValue"])])]),e("div",Me,[s.mode!="version"?(i(),o("div",We,[Ae,e("div",null,[b(e("select",{name:"tabdocument",id:"tabdocument","onUpdate:modelValue":l[10]||(l[10]=n=>s.editedDocument.tabDocument.id=n),class:"form-control"},[(i(!0),o(f,null,D(s.tabsWithDocuments,(n,u)=>(i(),o("option",{value:u,key:u},r(n.label),9,ze))),128))],512),[[C,s.editedDocument.tabDocument.id]])])])):p("",!0),s.mode!="version"?(i(),o("div",qe,[je,s.editedDocument.process?(i(),o("div",Be," Vous ne pouvez pas modifier le type d'un document engagé dans un processus de signature. ")):(i(),o("div",Re,[b(e("select",{class:"form-control",name:"type",id:"typedocument","onUpdate:modelValue":l[11]||(l[11]=n=>s.editedDocument.category.id=n)},[(i(!0),o(f,null,D(s.typesDocuments,(n,u)=>(i(),o("option",{value:n.id,key:n.id,disabled:n.flow&&s.editedDocument.id>0},r(n.label)+" "+r(n.flow&&s.editedDocument.id?"(signature)":""),9,Xe))),128))],512),[[C,s.editedDocument.category.id]])]))])):p("",!0)]),e("div",Le,[Je,b(e("textarea",{"onUpdate:modelValue":l[12]||(l[12]=n=>s.editedDocument.information=n),id:"information",class:"form-control"},null,512),[[E,s.editedDocument.information]])]),s.mode=="change"?(i(),o("div",Ke,[e("div",Ge,[s.editedDocument.private===!1?(i(),o("span",He,[Qe,e("div",null,[b(e("select",{name:"tabdocument",id:"tabdocument","onUpdate:modelValue":l[13]||(l[13]=n=>s.editedDocument.tabDocument.id=n),class:"form-control"},[(i(!0),o(f,null,D(s.tabsWithDocuments,(n,u)=>(i(),o("option",{value:u,key:u},r(n.label),9,Ye))),128))],512),[[C,s.editedDocument.tabDocument.id]])])])):p("",!0),Ze,e("div",$e,[b(e("input",{type:"checkbox",name:"private",id:"privateModifDoc",class:"form-control","onUpdate:modelValue":l[14]||(l[14]=n=>s.editedDocument.private=n)},null,512),[[T,s.editedDocument.private]])])]),s.editedDocument.private===!0?(i(),o("span",et,[tt,st,k(g,{onChange:c.handlerSelectPersons},null,8,["onChange"]),(i(!0),o(f,null,D(s.editedDocument.persons,n=>(i(),o("span",{key:n.id,class:"cartouche"},[nt,e("span",null,r(n.personName),1),e("span",lt,r(n.affectation),1),n.personId!==s.idCurrentPerson?(i(),o("i",{key:0,onClick:u=>c.handlerDeletePerson(n),class:"icon-trash icon-clickable"},null,8,ot)):p("",!0)]))),128))])):p("",!0)])):p("",!0)]),e("div",it,[e("div",rt,[e("nav",dt,[e("button",{class:"btn btn-danger",onClick:l[15]||(l[15]=n=>s.editedDocument=null)},[ct,m(" Annuler ")]),e("a",{class:"btn btn-success",href:"#",onClick:l[16]||(l[16]=I(n=>c.applyEdit(),["prevent"]))},[at,m(" Enregistrer ")])])])])])])):p("",!0),s.signDocument?(i(),o("div",ut,[e("div",mt,[e("h2",null,[e("span",{class:"overlay-closer",onClick:l[17]||(l[17]=n=>s.signDocument=null)},"X")]),e("nav",null,[m(" Selectionnez un procédure de signature "),(i(!0),o(f,null,D(s.signProcess,n=>(i(),o("span",{class:v(["btn btn-lg btn-default",{"btn-success":s.selectedSignProcess&&s.selectedSignProcess.id==n.id}]),onClick:u=>c.handlerSelectProcess(n)},[e("strong",null,r(n.label),1),pt,e("em",null,r(n.description)+" ",1)],10,ht))),256))]),s.selectedSignProcess?(i(),o("section",_t,[e("h3",null,[ft,Dt,e("strong",null,r(s.selectedSignProcess.label),1)]),(i(!0),o(f,null,D(s.selectedSignProcess.steps,n=>(i(),o("article",{class:v(["step",n.missing_recipients?"error":"ok"])},[e("h4",null,[m("étape "+r(n.order)+" :",1),e("strong",null,r(n.label),1)]),e("ul",bt,[e("li",vt,[m("Parapheur: "),e("strong",null,r(n.letterfile_label),1)]),e("li",gt,[m("Type: "),e("strong",null,r(n.level_label),1)]),e("li",yt,[m("Tous signent: "),e("strong",null,r(n.allSignToComplete?"Oui":"non"),1)])]),n.missing_recipients?(i(),o("div",kt," Il manque des destinataires pour cette procédure. ")):p("",!0),e("div",St,[e("div",wt,[Pt,(i(!0),o(f,null,D(n.recipients,u=>(i(),o("div",Ct,[n.editable?b((i(),o("input",{key:0,type:"checkbox","onUpdate:modelValue":w=>u.selected=w},null,8,Tt)),[[T,u.selected]]):p("",!0),e("strong",It,r(u.email),1),e("span",xt,r(u.firstname)+" "+r(u.lastname),1)]))),256))]),e("div",Ft,[Nt,n.observers.length?(i(!0),o(f,{key:0},D(n.observers,u=>(i(),o("div",Vt,[n.editable?b((i(),o("input",{key:0,type:"checkbox","onUpdate:modelValue":w=>u.selected=w},null,8,Ut)),[[T,u.selected]]):p("",!0),e("strong",Et,r(u.email),1),e("span",Ot,r(u.firstname)+" "+r(u.lastname),1)]))),256)):(i(),o("div",Mt," Pas d'observateur pour cette étape "))])])],2))),256))])):p("",!0),s.signProcessError?(i(),o("div",Wt,[m(" Signature non-disponible : "),e("strong",null,r(s.signProcessError),1)])):p("",!0),e("nav",At,[e("button",{class:"btn btn-default",onClick:l[18]||(l[18]=n=>s.signDocument=null)},[zt,m(" Annuler ")]),e("button",{class:v(["btn btn-success",{disabled:c.handlerPerformSignDocumentDisabled(s.signDocument,s.selectedSignProcess)}]),onClick:l[19]||(l[19]=n=>c.handlerPerformSignDocument(s.signDocument,s.selectedSignProcess))},[qt,m(" Valider ")],2)])])])):p("",!0),s.errorMessages.length!==0?(i(),o("div",jt,[e("div",Bt,[e("h2",null,[e("span",{class:"overlay-closer",onClick:l[20]||(l[20]=n=>s.errorMessages=[])},"X")]),e("ul",null,[(i(!0),o(f,null,D(s.errorMessages,n=>(i(),o("li",null,r(n),1))),256))]),e("button",{class:"btn btn-danger",onClick:l[21]||(l[21]=n=>s.errorMessages=[])},[Rt,m(" Retour ")])])])):p("",!0),e("section",Xt,[e("div",Lt,[(i(!0),o(f,null,D(c.packedDocuments,n=>(i(),o("div",{class:v(["tab",{selected:s.selectedTabId===n.id}]),onClick:I(u=>c.handlerSelectTab(n),["prevent"])},[m(r(n.label)+" ",1),e("sup",Kt,r(n.total),1)],10,Jt))),256)),e("div",{class:v(["tab",{selected:s.displayComputed}]),onClick:l[22]||(l[22]=I(n=>c.handlerSelectTab("computed"),["prevent"]))}," Documents générés ",2)]),b(e("div",Gt,[(i(!0),o(f,null,D(s.computedDocuments,n=>(i(),o("article",{class:"card xs",key:n.key},[e("div",Ht,[Qt,e("strong",null,r(n.label),1),Yt]),e("nav",Zt,[e("a",{class:"btn btn-default btn-xs",href:n.url},[es,m(" Télécharger ")],8,$t)])]))),128))],512),[[F,s.displayComputed]]),(i(!0),o(f,null,D(c.packedDocuments,n=>b((i(),o("div",ts,[n.manage?(i(),o("nav",ss,[n.manage?(i(),o("button",{key:0,onClick:u=>c.handlerNew(n.id),class:"btn btn-xs btn-default"},[ls,m(" Téléverser un document ")],8,ns)):p("",!0)])):p("",!0),k(V,{documents:n.documents,tabs:s.tabsWithDocuments,types:s.typesDocuments,"sign-process":s.signProcess,"display-activity":!1,onFetch:c.fetch},null,8,["documents","tabs","types","sign-process","onFetch"])],512)),[[F,s.selectedTabId===n.id]])),256))])])],64)}const is=B(X,[["render",os],["__scopeId","data-v-d7ad441a"]]);let S=document.querySelector("#activitydocuments");const N=W(is,{url:S.dataset.url,urlUploadNewDoc:S.dataset.urlUploadNewDoc,urlSignDocument:S.dataset.urlSignDocument,manage:S.dataset.manage});N.config.globalProperties.$filters={timeAgo(t){return x.timeAgo(t)},date(t){return x.date(t)},dateFull(t){return x.dateFull(t)},filesize(t){return z.filesize(t)}};N.mount("#activitydocuments");
