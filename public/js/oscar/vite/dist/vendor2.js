import{h as x,a as b,r as V,o as n,c as l,b as e,d as a,t as r,e as d,k as y,g as w,w as D,v as S,F as h,f as p,i as T,j as M,n as f,p as N,m as L}from"./vendor.js";import{D as A,P as E}from"./vendor3.js";import{_ as Y}from"./vendor4.js";x.locale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(s){return s+(s===1?"er":"e")},meridiemParse:/PD|MD/,isPM:function(s){return s.charAt(0)==="M"},meridiem:function(s,i,_){return s<12?"PD":"MD"},week:{dow:1,doy:4}});const xs={timeAgo(s,i="Non définie"){return s?x(s).fromNow():i},date(s,i="Non définie"){return s?"le "+x(s).format("D MMMM YYYY"):i},dateFull(s,i="Non définie"){return s?this.date(s)+" ("+this.timeAgo(s)+")":i}},Vs={filesize(s,i="Inconnue"){if(s){let _="o";return s>1e3&&(s=Math.round(s/1e3),_="Ko"),s>1e3&&(s=Math.round(s/1e3),_="Mo"),s+" "+_}else return i}},k={error(s){return s.request&&s.request.status===403?"Authorisation insuffisante (ou vous avez été déconnecté)":s.response?s.response.data?s.response.data:"Pas de message d'erreur":s.message?s.message:"Erreur inconnue"}};const F={components:{"date-picker":A,"person-auto-completer":E},props:{editable:{default:!1},displayActivity:{default:!1},documents:{default:[]},signProcess:{default:null},tabs:{default:[]},types:{default:[]},displayButtonSign:{default:!0}},data(){return{deleteDocument:null,signDocument:null,signProcessError:"",selectedSignProcess:null,processDetails:null,error:null,editedDocument:null,mode:null,fileToDownload:null}},methods:{urlShow(s=null){if(console.log(s),s)document.location=s;else return!1},handlerProcessInit(s){console.log("Affichage fenêtre de signature"),this.signDocument=s},handlerPerformSignDocumentDisabled(s,i){if(!i||i.missing_recipients)return!0;for(let _=0;_<i.steps.length;_++){let v=i.steps[_],o=v.editable,m=0;for(let g=0;g<v.recipients.length;g++){let P=v.recipients[g];o?P.selected==!0&&m++:m++}if(m==0)return this.signProcessError="L'étape "+v.order+' "'+v.label+`" n'a pas de destinataire.`,!0}return this.signProcessError="",!1},handlerSelectProcess(s){this.signProcessError="",this.selectedSignProcess=s},handlerPerformSignDocument(s,i){let _=new FormData,v=s.urlProcessCreate;return _.append("document_id",s.id),_.append("flow_datas",JSON.stringify(i)),b.post(v,_).then(o=>{this.signDocument=null,this.selectedSignProcess=null,this.$emit("fetch")},o=>{this.error=k.error(o)}),!1},handlerProcessDetailsOn(s){this.processDetails=s},handlerDeleteProcess(s){console.log("handlerDeleteProcess",s),b.post(s.urlProcessDelete).then(i=>{this.$emit("fetch")},i=>{this.error=k.error(i)})},handlerDeleteDocument(s){this.deleteDocument=s},handlerDeleteDocumentConfirm(){console.log(this.deleteDocument.urlDelete),b.post(this.deleteDocument.urlDelete).then(s=>{this.$emit("fetch")},s=>{this.error=k.error(s)}),this.deleteDocument=null},handlerEdit(s){this.mode="edit",this.editedDocument=s},handlerEditConfirm(){let s=new FormData,i="";if(s.append("data",JSON.stringify(this.editedDocument)),this.mode=="version"?(s.append("action","version"),i=this.editedDocument.urlReupload):this.mode=="new"?(s.append("action","new"),i=this.urlUploadNewDoc):this.mode=="edit"&&(s.append("action","edit"),i=this.editedDocument.urlEdit),this.mode!="edit")if(this.fileToDownload!==null)s.append("file",this.fileToDownload,this.fileToDownload.name);else{this.error="Aucun fichier sélectionner a téléverser !";return}b.post(i,s).then(_=>{this.editedDocument=null,this.$emit("fetch")},_=>{this.error=k.error(_)})},handlerChangeFile(s){event.target.files.length!==0&&(this.fileToDownload=event.target.files[0])},handlerNewVersion(s){console.log("handlerNewVersion"),this.fileToDownload=null,this.mode="version",this.editedDocument=s},handlerProcessDetailsOff(){this.processDetails=null},handlerProcessReload(s){let i=new FormData;b.post(s.urlProcessUpdate,i).then(_=>{this.$emit("fetch")},_=>{this.error=k.error(_)})}}},c=s=>(N("data-v-49cea7a6"),s=s(),L(),s),O={key:0,class:"overlay",style:{"z-index":"10000"}},U={class:"overlay-content",style:{"max-width":"50%"}},j={key:1,class:"overlay"},I={class:"overlay-content"},H={class:"alert-danger alert"},q=c(()=>e("i",{class:"icon-attention-1"},null,-1)),B=c(()=>e("i",{class:"icon-cancel-alt"},null,-1)),X=c(()=>e("i",{class:"icon-valid"},null,-1)),z={key:2,class:"overlay"},R={class:"overlay-content"},J=c(()=>e("i",{class:"icon-doc"},null,-1)),W={key:0},K={key:1},G={key:2},Q=c(()=>e("br",null,null,-1)),Z={key:0},$={key:1},ee={class:"row"},te={class:"col-md-6"},se={key:0},ne=c(()=>e("label",{for:"file"},"Fichier",-1)),le=c(()=>e("label",{for:"dateDeposit"},"Date de dépôt",-1)),oe=c(()=>e("label",{for:"dateSend"},"Date d'envoi",-1)),ie={class:"col-md-6"},re={key:0},ae=c(()=>e("label",{for:"tabdocument"},"Onglet",-1)),ce=["value"],ue={key:1},de=c(()=>e("label",{for:"typedocument"},"Type de document",-1)),_e={key:0,class:"alert alert-warning"},me={key:1},he=["value","disabled"],pe={class:"col-md-12"},fe=c(()=>e("label",{for:"information"},"Informations",-1)),ve={key:0,class:"col-md-6"},De={class:"row"},ge={key:0},be=c(()=>e("label",{for:"tabdocument"},"Onglet document",-1)),ye=["value"],ke=c(()=>e("div",{class:"col-md-6"},[e("label",{for:"private"},"Document privé")],-1)),Pe={class:"col-md-6"},Ce={key:0},we=c(()=>e("label",null,"Choix des personnes ayant accès à ce document",-1)),Se=c(()=>e("h3",null,"Ce document sera classé automatiquement dans l'onglet privé",-1)),Me=c(()=>e("i",{class:"icon-cube"},null,-1)),xe={class:"addon"},Ve=["onClick"],Te={class:"row"},Ne={class:"col-md-12"},Le={class:"buttons-bar"},Ae=c(()=>e("i",{class:"icon-cancel-alt"},null,-1)),Ee=c(()=>e("i",{class:"icon-valid"},null,-1)),Ye={key:3,class:"overlay"},Fe={class:"overlay-content"},Oe={key:0,class:"alert alert-danger"},Ue={key:1},je=["onClick"],Ie=c(()=>e("br",null,null,-1)),He={key:0},qe=c(()=>e("small",null,"Procédure de signature",-1)),Be=c(()=>e("br",null,null,-1)),Xe={class:"metas"},ze={class:"meta"},Re={class:"meta"},Je={class:"meta"},We={key:0,class:"alert alert-danger"},Ke={class:"row"},Ge={class:"col-md-6"},Qe=c(()=>e("h5",null,"Destinataires",-1)),Ze={class:"recipient"},$e=["onUpdate:modelValue"],et={class:"email"},tt={class:"fullname"},st={class:"col-md-6"},nt=c(()=>e("h5",null,"Observateurs",-1)),lt={class:"recipient"},ot=["onUpdate:modelValue"],it={class:"email"},rt={class:"fullname"},at={key:1,class:"alert alert-info"},ct={key:2,class:"alert alert-danger"},ut={class:"buttons-bar"},dt=c(()=>e("i",{class:"icon-cancel-alt"},null,-1)),_t=c(()=>e("i",{class:"icon-cancel-alt"},null,-1)),mt={key:4,class:"overlay"},ht={class:"overlay-content",style:{"max-width":"50%"}},pt=c(()=>e("small",null,[e("i",{class:"icon-edit"}),a(" Procédure")],-1)),ft=c(()=>e("br",null,null,-1)),vt=c(()=>e("br",null,null,-1)),Dt={class:"signature-status-101"},gt={class:"status"},bt={class:"metas"},yt={class:"meta"},kt={class:"meta"},Pt={class:"meta"},Ct={class:"fullname"},wt={class:"email"},St={class:"status"},Mt={class:"status-text"},xt=c(()=>e("strong",null,"Observateurs : ",-1)),Vt={class:"observer-inline"},Tt={class:"buttons-bar"},Nt=c(()=>e("i",{class:"icon-cancel-outline"},null,-1)),Lt={class:"card-title"},At={key:0,class:"picto icon-anchor-outline"},Et={class:"text-light"},Yt=["title"],Ft=c(()=>e("i",{class:"icon-briefcase"},null,-1)),Ot=c(()=>e("i",{class:"icon-calendar"},null,-1)),Ut=c(()=>e("i",{class:"icon-calendar"},null,-1)),jt=c(()=>e("i",{class:"icon-calendar"},null,-1)),It=c(()=>e("i",{class:"icon-user"},null,-1)),Ht={key:0},qt={key:1},Bt={key:0},Xt=c(()=>e("i",{class:"icon-lock"},null,-1)),zt={class:"cartouche"},Rt={class:"card-content"},Jt=c(()=>e("i",{class:"icon-hammer"},null,-1)),Wt=["onClick"],Kt=c(()=>e("i",{class:"icon-help-circled"},null,-1)),Gt=["onClick"],Qt=c(()=>e("i",{class:"icon-trash"},null,-1)),Zt=["onClick"],$t=c(()=>e("i",{class:"icon-cw-outline"},null,-1)),es={key:1},ts=["onClick"],ss=c(()=>e("i",{class:"icon-cube"},null,-1)),ns={key:0},ls=c(()=>e("i",{class:"icon-cubes"},null,-1)),os={key:2},is=c(()=>e("div",{class:"exploder"}," Versions précédentes : ",-1)),rs={class:"subdoc text-highlight"},as={key:0},cs=["href"],us=c(()=>e("i",{class:"icon-download-outline"},null,-1)),ds={class:"text-right show-over"},_s=["href"],ms=c(()=>e("i",{class:"icon-link-ext"},null,-1)),hs=["onClick"],ps=c(()=>e("i",{class:"icon-bank"},null,-1)),fs=["href"],vs=c(()=>e("i",{class:"icon-upload-outline"},null,-1)),Ds=["onClick"],gs=c(()=>e("i",{class:"icon-download-outline"},null,-1)),bs=["onClick"],ys=c(()=>e("i",{class:"icon-trash"},null,-1)),ks=["onClick"],Ps=c(()=>e("i",{class:"icon-pencil"},null,-1));function Cs(s,i,_,v,o,m){const g=V("date-picker"),P=V("person-auto-completer");return n(),l(h,null,[o.error?(n(),l("div",O,[e("div",U,[e("h2",null,[a(" Erreur "),e("span",{class:"overlay-closer",onClick:i[0]||(i[0]=t=>o.error=null)},"X")]),e("p",null,r(o.error.response&&o.error.response.data?o.error.response.data:o.error),1)])])):d("",!0),o.deleteDocument?(n(),l("div",j,[e("div",I,[e("h2",null,[a(" Supprimer le document ? "),e("span",{class:"overlay-closer",onClick:i[1]||(i[1]=t=>o.deleteDocument=null)},"X")]),e("p",H,[q,a(" Souhaitez-vous supprimer le fichier "),e("strong",null,r(o.deleteDocument.fileName),1),a(" ? ")]),e("button",{class:"btn btn-danger",onClick:i[2]||(i[2]=t=>o.deleteDocument=null)},[B,a(" Annuler ")]),e("a",{class:"btn btn-success",onClick:i[3]||(i[3]=y(t=>m.handlerDeleteDocumentConfirm(),["prevent"]))},[X,a(" Confirmer ")])])])):d("",!0),o.editedDocument?(n(),l("div",z,[e("div",R,[e("h2",null,[e("small",null,[J,o.mode=="new"?(n(),l("span",W,"Téléversement d'un document")):d("",!0),o.mode=="edit"?(n(),l("span",K,"Modification des informations")):d("",!0),o.mode=="version"?(n(),l("span",G,"Nouvelle version")):d("",!0)]),Q,o.editedDocument.id>0?(n(),l("span",Z,[e("strong",null,r(o.editedDocument.fileName),1)])):(n(),l("span",$,[a(" Nouveau document dans "),e("strong",null,r(o.editedDocument.tabDocument.label),1)])),e("span",null," ("+r(o.mode)+") ",1),e("span",{class:"overlay-closer",onClick:i[4]||(i[4]=t=>o.editedDocument=null)},"X")]),e("div",ee,[e("div",te,[o.mode!="edit"?(n(),l("div",se,[ne,e("input",{onChange:i[5]||(i[5]=(...t)=>m.handlerChangeFile&&m.handlerChangeFile(...t)),type:"file",class:"form-control",name:"file",id:"file"},null,32)])):d("",!0),e("div",null,[le,w(g,{modelValue:o.editedDocument.dateDeposit,"onUpdate:modelValue":i[6]||(i[6]=t=>o.editedDocument.dateDeposit=t),id:"dateDeposit"},null,8,["modelValue"])]),e("div",null,[oe,w(g,{modelValue:o.editedDocument.dateSend,"onUpdate:modelValue":i[7]||(i[7]=t=>o.editedDocument.dateSend=t),id:"dateSend"},null,8,["modelValue"])])]),e("div",ie,[o.mode!="version"?(n(),l("div",re,[ae,e("div",null,[D(e("select",{name:"tabdocument",id:"tabdocument","onUpdate:modelValue":i[8]||(i[8]=t=>o.editedDocument.tabDocument.id=t),class:"form-control"},[(n(!0),l(h,null,p(_.tabs,(t,u)=>(n(),l("option",{value:u,key:u},r(t.label),9,ce))),128))],512),[[S,o.editedDocument.tabDocument.id]])])])):d("",!0),o.mode!="version"?(n(),l("div",ue,[de,o.editedDocument.process?(n(),l("div",_e," Vous ne pouvez pas modifier le type d'un document engagé dans un processus de signature. ")):(n(),l("div",me,[D(e("select",{class:"form-control",name:"type",id:"typedocument","onUpdate:modelValue":i[9]||(i[9]=t=>o.editedDocument.category.id=t)},[(n(!0),l(h,null,p(_.types,(t,u)=>(n(),l("option",{value:t.id,key:t.id,disabled:t.flow&&o.editedDocument.id>0},r(t.label)+" "+r(t.flow&&o.editedDocument.id?"(signature)":""),9,he))),128))],512),[[S,o.editedDocument.category.id]])]))])):d("",!0)]),e("div",pe,[fe,D(e("textarea",{"onUpdate:modelValue":i[10]||(i[10]=t=>o.editedDocument.information=t),id:"information",class:"form-control"},null,512),[[T,o.editedDocument.information]])]),o.mode=="change"?(n(),l("div",ve,[e("div",De,[o.editedDocument.private===!1?(n(),l("span",ge,[be,e("div",null,[D(e("select",{name:"tabdocument",id:"tabdocument","onUpdate:modelValue":i[11]||(i[11]=t=>o.editedDocument.tabDocument.id=t),class:"form-control"},[(n(!0),l(h,null,p(_.tabs,(t,u)=>(n(),l("option",{value:u,key:u},r(t.label),9,ye))),128))],512),[[S,o.editedDocument.tabDocument.id]])])])):d("",!0),ke,e("div",Pe,[D(e("input",{type:"checkbox",name:"private",id:"privateModifDoc",class:"form-control","onUpdate:modelValue":i[12]||(i[12]=t=>o.editedDocument.private=t)},null,512),[[M,o.editedDocument.private]])])]),o.editedDocument.private===!0?(n(),l("span",Ce,[we,Se,w(P,{onChange:s.handlerSelectPersons},null,8,["onChange"]),(n(!0),l(h,null,p(o.editedDocument.persons,t=>(n(),l("span",{key:t.id,class:"cartouche"},[Me,e("span",null,r(t.personName),1),e("span",xe,r(t.affectation),1),t.personId!==s.idCurrentPerson?(n(),l("i",{key:0,onClick:u=>s.handlerDeletePerson(t),class:"icon-trash icon-clickable"},null,8,Ve)):d("",!0)]))),128))])):d("",!0)])):d("",!0)]),e("div",Te,[e("div",Ne,[e("nav",Le,[e("button",{class:"btn btn-danger",onClick:i[13]||(i[13]=t=>o.editedDocument=null)},[Ae,a(" Annuler ")]),e("a",{class:"btn btn-success",href:"#",onClick:i[14]||(i[14]=y(t=>m.handlerEditConfirm(),["prevent"]))},[Ee,a(" Enregistrer ")])])])])])])):d("",!0),o.signDocument?(n(),l("div",Ye,[e("div",Fe,[e("h2",null,[a(" Signature de document numérique "),e("span",{class:"overlay-closer",onClick:i[15]||(i[15]=t=>o.signDocument=null)},"X")]),_.signProcess?(n(),l("div",Ue,[e("nav",null,[a(" Sélectionnez une procédure de signature "),(n(!0),l(h,null,p(_.signProcess,t=>(n(),l("span",{class:f(["btn btn-lg btn-default",{"btn-success":o.selectedSignProcess&&o.selectedSignProcess.id==t.id}]),onClick:u=>m.handlerSelectProcess(t)},[e("strong",null,r(t.label),1),Ie,e("em",null,r(t.description)+" ",1)],10,je))),256))]),o.selectedSignProcess?(n(),l("section",He,[e("h3",null,[qe,Be,e("strong",null,r(o.selectedSignProcess.label),1)]),(n(!0),l(h,null,p(o.selectedSignProcess.steps,t=>(n(),l("article",{class:f(["step",t.missing_recipients?"error":"ok"])},[e("h4",null,[a("étape "+r(t.order)+" :",1),e("strong",null,r(t.label),1)]),e("ul",Xe,[e("li",ze,[a("Parapheur: "),e("strong",null,r(t.letterfile_label),1)]),e("li",Re,[a("Type: "),e("strong",null,r(t.level_label),1)]),e("li",Je,[a("Tous signent: "),e("strong",null,r(t.allSignToComplete?"Oui":"non"),1)])]),t.missing_recipients?(n(),l("div",We," Il manque des destinataires pour cette procédure. ")):d("",!0),e("div",Ke,[e("div",Ge,[Qe,(n(!0),l(h,null,p(t.recipients,u=>(n(),l("div",Ze,[t.editable?D((n(),l("input",{key:0,type:"checkbox","onUpdate:modelValue":C=>u.selected=C},null,8,$e)),[[M,u.selected]]):d("",!0),e("strong",et,r(u.email),1),e("span",tt,r(u.firstname)+" "+r(u.lastname),1)]))),256))]),e("div",st,[nt,t.observers.length?(n(!0),l(h,{key:0},p(t.observers,u=>(n(),l("div",lt,[t.editable?D((n(),l("input",{key:0,type:"checkbox","onUpdate:modelValue":C=>u.selected=C},null,8,ot)),[[M,u.selected]]):d("",!0),e("strong",it,r(u.email),1),e("span",rt,r(u.firstname)+" "+r(u.lastname),1)]))),256)):(n(),l("div",at," Pas d'observateur pour cette étape "))])])],2))),256))])):d("",!0)])):(n(),l("div",Oe," Aucun processus de signature disponible ")),o.signProcessError?(n(),l("div",ct,[a(" Signature non-disponible : "),e("strong",null,r(o.signProcessError),1)])):d("",!0),e("nav",ut,[e("button",{class:"btn btn-default",onClick:i[16]||(i[16]=t=>o.signDocument=null)},[dt,a(" Annuler ")]),e("button",{class:f(["btn btn-success",{disabled:m.handlerPerformSignDocumentDisabled(o.signDocument,o.selectedSignProcess)}]),onClick:i[17]||(i[17]=t=>m.handlerPerformSignDocument(o.signDocument,o.selectedSignProcess))},[_t,a(" Valider ")],2)])])])):d("",!0),o.processDetails?(n(),l("div",mt,[e("div",ht,[e("h2",null,[pt,a(),ft,e("strong",null,r(o.processDetails.label),1),a(),vt,e("span",Dt,[a(r(o.processDetails.status_text)+" - ",1),e("em",null,"étape "+r(o.processDetails.current_step)+" / "+r(o.processDetails.total_steps),1)]),e("span",{class:"overlay-closer",onClick:i[18]||(i[18]=(...t)=>m.handlerProcessDetailsOff&&m.handlerProcessDetailsOff(...t))},"X")]),(n(!0),l(h,null,p(o.processDetails.steps,t=>(n(),l("section",{class:f(["signature","signature-status-"+t.status])},[e("h4",null,[e("small",null,"étape "+r(t.order)+" : ",1),e("strong",null,r(t.label),1),e("span",gt," ("+r(t.status_text)+")",1)]),e("ul",bt,[e("li",yt,[a("Parapheur "),e("strong",null,r(t.letterfile),1)]),e("li",kt,[a("Niveau "),e("strong",null,r(t.level),1)]),e("li",Pt,[a("Tous les destinataires signent "),e("strong",null,r(t.allSignToComplete?"Oui":"Non"),1)])]),(n(!0),l(h,null,p(t.recipients,u=>(n(),l("article",{class:f(["recipient","signature-status-"+u.status])},[e("strong",Ct,r(u.fullname),1),e("em",wt,r(u.email),1),e("small",null,r(s.$filters.dateFull(u.dateFinished)),1),e("span",St,[e("span",Mt,r(u.status_text),1)])],2))),256)),xt,(n(!0),l(h,null,p(t.observers,u=>(n(),l("span",Vt,[e("small",null,r(u.firstname),1),a(),e("span",null,r(u.lastname),1)]))),256))],2))),256)),e("div",Tt,[e("button",{class:"btn btn-default",onClick:i[19]||(i[19]=(...t)=>m.handlerProcessDetailsOff&&m.handlerProcessDetailsOff(...t))},[Nt,a(" Fermer ")])])])])):d("",!0),(n(!0),l(h,null,p(_.documents,t=>(n(),l("article",{class:f(["card xs",{"private-document":t.private}]),key:t.id},[e("div",Lt,[t.location=="link"?(n(),l("i",At)):(n(),l("i",{key:1,class:f(["picto icon-doc","doc"+t.extension])},null,2)),e("small",Et,r(t.category.label)+" ~ ",1),e("strong",null,r(t.fileName),1),t.location!="url"?(n(),l("small",{key:2,class:"text-light",title:t.fileSize+" octet(s)"},"  Version "+r(t.version),9,Yt)):d("",!0)]),e("small",null,[Ft,a(" Taille "),e("strong",null,r(s.$filters.filesize(t.fileSize)),1),Ot,a(" Envoyé "),e("strong",null,r(s.$filters.timeAgo(t.dateSend)),1),Ut,a(" Déposé "),e("strong",null,r(s.$filters.dateFull(t.dateDeposit)),1),jt,a(" Uploadé "),e("strong",null,r(s.$filters.dateFull(t.dateUpload)),1),It,a(" par "),t.uploader?(n(),l("strong",Ht,r(t.uploader.displayname),1)):(n(),l("em",qt,"Inconnu"))]),e("p",null,r(t.information),1),t.private?(n(),l("section",Bt,[Xt,a(" Ce document est privé, accessible par : "),(n(!0),l(h,null,p(t.persons,u=>(n(),l("span",zt,r(u.personName),1))),256))])):d("",!0),e("div",Rt,[t.process?(n(),l("section",{key:0,class:f(["alert",{"alert-success":t.process.status==201,"alert-danger":t.process.status>=400,"alert-info":t.process.status<200}])},[Jt,a(" Procédure de signature "),e("strong",null,r(t.process.label),1),a(" ("),e("em",null,r(t.process.status_text),1),e("span",null," - étape "+r(t.process.current_step)+" / "+r(t.process.total_steps),1),a(") "),e("button",{class:"btn btn-xs btn-info",onClick:u=>m.handlerProcessDetailsOn(t.process)},[Kt,a(" Détails ")],8,Wt),t.urlProcessDelete?(n(),l("button",{key:0,class:"btn btn-xs btn-danger",onClick:u=>m.handlerDeleteProcess(t)},[Qt,a(" Annuler la procédure ")],8,Gt)):d("",!0),t.urlProcessUpdate?(n(),l("button",{key:1,class:"btn btn-default btn-xs",onClick:u=>m.handlerProcessReload(t)},[$t,a(" Actualiser ")],8,Zt)):d("",!0)],2)):d("",!0),_.displayActivity?(n(),l("section",es,[a(" Activité : "),e("span",{class:f({link:t.activity.url_show}),onClick:u=>m.urlShow(t.activity.url_show)},[e("strong",null,[ss,a(" / "+r(t.activity.num),1)]),a("  "),e("em",null,r(t.activity.label),1),t.activity.project_id?(n(),l("small",ns,[a(" ("),ls,a(r(t.activity.project_acronym)+") ",1)])):d("",!0)],10,ts)])):d("",!0),t.versions&&t.versions.length?(n(),l("div",os,[is,(n(!0),l(h,null,p(t.versions,u=>(n(),l("article",rs,[e("i",{class:f(["picto icon-doc","doc"+u.extension])},null,2),e("strong",null,r(u.fileName),1),a(" version "),e("em",null,r(u.version),1),a(", téléchargé le "),e("time",null,r(u.dateUpload|s.dateFullSort),1),u.uploader?(n(),l("span",as,[a(" par "),e("strong",null,r(u.uploader.displayname),1)])):d("",!0),e("a",{href:u.urlDownload},[us,a(" Télécharger cette version ")],8,cs)]))),256))])):d("",!0),e("nav",ds,[t.location=="url"?(n(),l("a",{key:0,class:"btn btn-default btn-xs",href:t.basename,target:"_blank"},[ms,a(" Accéder au lien ")],8,_s)):d("",!0),t.process_triggerable&&_.displayButtonSign?(n(),l("a",{key:1,class:"btn btn-default btn-xs",href:"#",onClick:y(u=>m.handlerProcessInit(t),["prevent"])},[ps,a(" Signer ce document ")],8,hs)):d("",!0),t.urlDownload&&t.location!="url"?(n(),l("a",{key:2,class:"btn btn-default btn-xs",href:t.urlDownload},[vs,a(" Télécharger ")],8,fs)):d("",!0),t.urlReupload?(n(),l("button",{key:3,onClick:u=>m.handlerNewVersion(t),class:"btn btn-default btn-xs"},[gs,a(" Nouvelle Version ")],8,Ds)):d("",!0),t.urlDelete?(n(),l("a",{key:4,class:"btn btn-default btn-xs",onClick:y(u=>m.handlerDeleteDocument(t),["prevent"])},[ys,a(" Supprimer ")],8,bs)):d("",!0),t.urlEdit?(n(),l("a",{key:5,class:"btn btn-xs btn-default",href:"#",onClick:y(u=>m.handlerEdit(t),["prevent"])},[Ps,a(" Modifier ")],8,ks)):d("",!0)])])],2))),128))],64)}const Ts=Y(F,[["render",Cs],["__scopeId","data-v-49cea7a6"]]);export{Ts as D,Vs as f,xs as m};
