<?php
return array(
    'view_manager' => array(
        'display_not_found_reason' => getenv('APPLICATION_ENV') == 'development',
        'display_exceptions'       => getenv('APPLICATION_ENV') == 'development',
    ),

    // Oscar
    'oscar' => [
        ////////////////////////////////////////////////////////////////////////
        //
        // PATHS
        //
        // Emplacements utilisés par oscar pour stoquer des fichiers.
        // Ces emplacements doivent être accessibles et ouvert en écriture.
        //
        ////////////////////////////////////////////////////////////////////////
        'paths' => [
            // Emplacement des documents issus de centaure (ne sera plus
            // necessaire une fois la synchro centaure suspendue).
            // !!! OBSOLETE
            'document_centaure' => '/chemin/ou/sont/les/documents/centaure/',

            // Emplacement où sont stoqués les documents Oscar
            'document_oscar' => '/chemin/ou/sont/les/documents/oscar/',

            // Emplacement où sont stoqués les documents administratifs Oscar
            'document_admin_oscar' => '/chemin/ou/sont/les/documents/administratifs/',

            // Emplacement de l'index de recherche (emplacement où Lucene écrit
            // sont index de recherche - un DOSSIER).
            'search_activity' => APP_DIR . '/data/luceneindex',
        ],
        ////////////////////////////////////////////////////////////////////////
        //
        // CONNECTORS
        //
        // Les connecteurs sont les points d'entrées pour les données utilisées
        // dans Oscar.
        // Pour le moment ne sont gérés que :
        // - Person (participants aux activités de recherche)
        // - Organization (Structures/Organisations impliquées dans les activités)
        //
        ////////////////////////////////////////////////////////////////////////
        'connectors' => [
            // Connection au tiers d'où seront obtenu les structures
            'organization' => [
               'rest' => [
                  'class'     => \Oscar\Connector\ConnectorOrganizationREST::class,
                  'params'    => APP_DIR . '/config/connectors/organization_rest.yml',
                  'editable'  => false
               ]
            ],
            'person' => [
               'rest' => [
                  'class'     => \Oscar\Connector\ConnectorPersonREST::class,
                  'params'    => APP_DIR . '/config/connectors/person_rest.yml',
                  'editable'  => false
               ]
            ]
        ],

        // Système d'envoi des mails
        'mailer' => [
            // Assure la distribution
            'transport' => [
                'host' => 'smtp.host.tld',
                'port' => 465,
                'username' => 'jean-claude.dus@unicaen.fr',
                'password' => 'XXXXXXXXXX',
                'security' => 'ssl',
            ],
            // Use for FROM email, same as transport maybe
            'from' => [ 'oscar-bot@unicaen.fr' => 'Oscar Bot'],

            // Envoi d'une copy
            'copy' => ['stephane.bouvry@unicaen.fr'],

            // Envoi activé
            'send' => false,

            // Préfixe ajouté dans les sujets
            'subjectPrefix' => '[OSCAR DEV]'
        ]
    ],

    // Accès BDD
    'doctrine' => array(
        'connection' => array(
            'orm_default' => array(
                //////////////////////////////////////////////////////// DRIVERS
                // MySQL
                //'driverClass' => '\Doctrine\DBAL\Driver\PDOMySql\Driver',
                // Postgresql
                'driverClass' => '\Doctrine\DBAL\Driver\PDOPgSql\Driver',
                ////////////////////////////////////////////////////////////////

                'doctrine_type_mappings' => array(
                    'enum' => 'string'
                ),

                ////////////////////////////////////////////////////// CONNEXION
                // Exemple (MySQL)
                'params' => array(
                    'host'     => 'localhost',
                    'port'     => '5432',
                    'user'     => 'oscar_dev',
                    'password' => 'azerty',
                    'dbname'   => 'oscar_dev',
                    'charset'  => 'utf8'
                ),

                // Exemple (POSGRESQL)
//                'params' => array(
//                    'host'     => 'sub.domain.tld',
//                    'port'     => '5432',
//                    'user'     => 'jeanclaude',
//                    'password' => 'jvéconclure',
//                    'dbname'   => 'ma_base_preprod',
//                    'charset'  => 'utf8'
//                ),
            ),
        ),
    ),
);
